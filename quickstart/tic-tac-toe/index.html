
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="React 中文文档">
      
      
        <meta name="author" content="Mingmin Yu">
      
      
        <link rel="canonical" href="https://mingminyu.github.io/quickstart/tic-tac-toe/">
      
      
        <link rel="prev" href="../..">
      
      
        <link rel="next" href="../thinking-in-react/">
      
      
      <link rel="icon" href="../../custom/assets/react.svg">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.47">
    
    
      
        <title>井字棋 - React 中文文档</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.6f8fc17f.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue-grey" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#_1" class="md-skip">
          跳转至
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="页眉">
    <a href="../.." title="React 中文文档" class="md-header__button md-logo" aria-label="React 中文文档" data-md-component="logo">
      
  <img src="../../custom/assets/react.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            React 中文文档
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              井字棋
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="blue-grey" data-md-color-accent="indigo"  aria-label="暗黑模式"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="暗黑模式" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="indigo"  aria-label="明亮模式"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="明亮模式" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="搜索" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="查找">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="分享" aria-label="分享" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="清空当前内容" aria-label="清空当前内容" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            正在初始化搜索引擎
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="标签" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
    
  
  
    
    
      
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../.." class="md-tabs__link">
          
  
    
  
  教程

        </a>
      </li>
    
  

    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="导航栏" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="React 中文文档" class="md-nav__button md-logo" aria-label="React 中文文档" data-md-component="logo">
      
  <img src="../../custom/assets/react.svg" alt="logo">

    </a>
    React 中文文档
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" checked>
        
          
          <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="">
            
  
  <span class="md-ellipsis">
    教程
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            教程
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_1" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../.." class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    快速入门
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_1_1" id="__nav_1_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_1_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_1_1">
            <span class="md-nav__icon md-icon"></span>
            快速入门
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    井字棋
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    井字棋
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1" class="md-nav__link">
    <span class="md-ellipsis">
      1. 配置
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2" class="md-nav__link">
    <span class="md-ellipsis">
      2. 初步设计
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. 初步设计">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21" class="md-nav__link">
    <span class="md-ellipsis">
      2.1 看一下刚刚的代码
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2.1 看一下刚刚的代码">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-appjs" class="md-nav__link">
    <span class="md-ellipsis">
      (1)) App.js
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-stylecss" class="md-nav__link">
    <span class="md-ellipsis">
      (2) style.css
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-indexjs" class="md-nav__link">
    <span class="md-ellipsis">
      (3) index.js
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22" class="md-nav__link">
    <span class="md-ellipsis">
      2.2 构建棋盘
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#23-props" class="md-nav__link">
    <span class="md-ellipsis">
      2.3 通过 props 传递数据
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#24" class="md-nav__link">
    <span class="md-ellipsis">
      2.4 创建一个具有交互性的组件
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#25-react" class="md-nav__link">
    <span class="md-ellipsis">
      2.5 React 开发者工具
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3" class="md-nav__link">
    <span class="md-ellipsis">
      3. 完成这个游戏
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3. 完成这个游戏">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31" class="md-nav__link">
    <span class="md-ellipsis">
      3.1 状态提升
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32" class="md-nav__link">
    <span class="md-ellipsis">
      3.2 为什么不变性很重要
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#33" class="md-nav__link">
    <span class="md-ellipsis">
      3.3 交替落子
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#34" class="md-nav__link">
    <span class="md-ellipsis">
      3.4 宣布获胜者
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4" class="md-nav__link">
    <span class="md-ellipsis">
      4. 添加时间旅行
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4. 添加时间旅行">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#41" class="md-nav__link">
    <span class="md-ellipsis">
      4.1 存储落子历史
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#42" class="md-nav__link">
    <span class="md-ellipsis">
      4.2 再一次“状态提升”
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#43" class="md-nav__link">
    <span class="md-ellipsis">
      4.3 显示过去的落子
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#44-key" class="md-nav__link">
    <span class="md-ellipsis">
      4.4 选择 key
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#45" class="md-nav__link">
    <span class="md-ellipsis">
      4.5 实现时间旅行
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#46" class="md-nav__link">
    <span class="md-ellipsis">
      4.6 最后清理
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../thinking-in-react/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    React 哲学
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_2" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../installation/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    安装
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_1_2" id="__nav_1_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_2">
            <span class="md-nav__icon md-icon"></span>
            安装
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/start-a-new-react-project/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    启动一个新的 React 项目
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/add-react-to-an-existing-project/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    将 React 添加到现有项目中
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/use-typescript/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    使用 TypeScript
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_3" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../describing-ui/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    描述 UI
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_1_3" id="__nav_1_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_3">
            <span class="md-nav__icon md-icon"></span>
            描述 UI
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../describing-ui/your-first-component/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    你的第一个组件
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../describing-ui/importing-and-exporting-components/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    组件的导入与导出
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../describing-ui/writing-markup-with-jsx/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    使用 JSX 书写标签语言
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../describing-ui/javascript-in-jsx-with-curly-braces/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    在 JSX 中通过大括号使用 JavaScript
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../describing-ui/passing-props-to-a-component/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    将 Props 传递给组件
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../describing-ui/conditional-rendering/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    条件渲染
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../describing-ui/rendering-lists/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    渲染列表
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../describing-ui/keeping-components-pure/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    保持组件纯粹
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../describing-ui/understanding-your-ui-as-a-tree/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    将 UI 视作树
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_4" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../adding-interactivity/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    添加交互
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_1_4" id="__nav_1_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_4">
            <span class="md-nav__icon md-icon"></span>
            添加交互
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../adding-interactivity/responding-to-events/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    响应事件
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../adding-interactivity/state-a-components-memory/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    组件的内存
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../adding-interactivity/render-and-commit/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    渲染和提交
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../adding-interactivity/state-as-a-snapshot/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    状态快照
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../adding-interactivity/queueing-a-series-of-state-updates/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    队列—系列状态更新
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../adding-interactivity/updating-objects-in-state/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    更新状态中的对象
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../adding-interactivity/updating-arrays-in-state/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    更新状态中的数组
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_5" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../managing-state/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    状态管理
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_1_5" id="__nav_1_5_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_5">
            <span class="md-nav__icon md-icon"></span>
            状态管理
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../managing-state/reacting-to-input-with-state/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    使用状态对输入做出反应
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../managing-state/choosing-the-state-structure/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    选择状态结构
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../managing-state/sharing-state-between-components/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    在组件之间共享状态
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../managing-state/preserving-and-resetting-state/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    保留和重置状态
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../managing-state/extracting-state-logic-into-a-reducer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    将状态逻辑提取到Reducer中
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../managing-state/passing-data-deeply-with-context/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    使用上下文深入传递数据
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../managing-state/scaling-up-with-reducer-and-context/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    使用Reducer和上下文进行扩展
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_6" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../escape-hatches/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    脱围机制
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_1_6" id="__nav_1_6_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_6">
            <span class="md-nav__icon md-icon"></span>
            脱围机制
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../escape-hatches/referencing-values-with-refs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    使用引用引用值
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../escape-hatches/manipulating-the-dom-with-refs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    使用引用操作DOM
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../escape-hatches/synchronizing-with-effects/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    使用副作用进行同步
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../escape-hatches/you-might-not-need-an-effect/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    你可能不需要副作用
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../escape-hatches/lifecycle-of-reactive-effects/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    反应式副作用的生命周期
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../escape-hatches/separating-events-from-effects/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    将事件与副作用分开
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../escape-hatches/removing-effect-dependencies/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    移除副作用依赖
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../escape-hatches/reusing-logic-with-custom-hooks/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    使用自定义钩子重用逻辑
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1" class="md-nav__link">
    <span class="md-ellipsis">
      1. 配置
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2" class="md-nav__link">
    <span class="md-ellipsis">
      2. 初步设计
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. 初步设计">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21" class="md-nav__link">
    <span class="md-ellipsis">
      2.1 看一下刚刚的代码
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2.1 看一下刚刚的代码">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-appjs" class="md-nav__link">
    <span class="md-ellipsis">
      (1)) App.js
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-stylecss" class="md-nav__link">
    <span class="md-ellipsis">
      (2) style.css
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-indexjs" class="md-nav__link">
    <span class="md-ellipsis">
      (3) index.js
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22" class="md-nav__link">
    <span class="md-ellipsis">
      2.2 构建棋盘
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#23-props" class="md-nav__link">
    <span class="md-ellipsis">
      2.3 通过 props 传递数据
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#24" class="md-nav__link">
    <span class="md-ellipsis">
      2.4 创建一个具有交互性的组件
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#25-react" class="md-nav__link">
    <span class="md-ellipsis">
      2.5 React 开发者工具
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3" class="md-nav__link">
    <span class="md-ellipsis">
      3. 完成这个游戏
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3. 完成这个游戏">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31" class="md-nav__link">
    <span class="md-ellipsis">
      3.1 状态提升
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32" class="md-nav__link">
    <span class="md-ellipsis">
      3.2 为什么不变性很重要
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#33" class="md-nav__link">
    <span class="md-ellipsis">
      3.3 交替落子
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#34" class="md-nav__link">
    <span class="md-ellipsis">
      3.4 宣布获胜者
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4" class="md-nav__link">
    <span class="md-ellipsis">
      4. 添加时间旅行
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4. 添加时间旅行">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#41" class="md-nav__link">
    <span class="md-ellipsis">
      4.1 存储落子历史
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#42" class="md-nav__link">
    <span class="md-ellipsis">
      4.2 再一次“状态提升”
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#43" class="md-nav__link">
    <span class="md-ellipsis">
      4.3 显示过去的落子
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#44-key" class="md-nav__link">
    <span class="md-ellipsis">
      4.4 选择 key
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#45" class="md-nav__link">
    <span class="md-ellipsis">
      4.5 实现时间旅行
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#46" class="md-nav__link">
    <span class="md-ellipsis">
      4.6 最后清理
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="_1">井字棋游戏<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h1>
<p>本教程将引导你逐步实现一个简单的井字棋游戏，并且不需要你对 React 有任何了解。在此过程中你会学习到一些编写 React 程序的基本知识，完全理解它们可以让你对 React 有比较深入的理解。</p>
<div class="admonition note">
<p>本教程专为喜欢 理论与实战相结合 以及希望快速看见成果的人而设计。如果你喜欢逐步学习每个概念，请从 <strong>描述 UI</strong> 开始。</p>
</div>
<p>教程分成以下几个部分：</p>
<ul>
<li>配置 是一些准备工作。</li>
<li>概览 介绍了 React 的 基础知识：组件、props 和 state。</li>
<li>完成游戏 介绍了 React 开发中 最常用的技术。</li>
<li>添加 “时间旅行” 可以让你更深入地了解 React 的独特优势。</li>
</ul>
<details class="example" open="open">
<summary>实现的程序</summary>
<div class="tabbed-set tabbed-alternate" data-tabs="1:2"><input checked="checked" id="_1-效果" name="__tabbed_1" type="radio" /><input id="_1-appjs" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="_1-效果">效果</label><label for="_1-appjs">App.js</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p><img alt="alt text" src="../../images/qs-03.png" /></p>
</div>
<div class="tabbed-block">
<div class="language-jsx highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">useState</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;react&#39;</span><span class="p">;</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="kd">function</span><span class="w"> </span><span class="nx">Square</span><span class="p">({</span><span class="w"> </span><span class="nx">value</span><span class="p">,</span><span class="w"> </span><span class="nx">onSquareClick</span><span class="w"> </span><span class="p">})</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="k">return</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="w">    </span><span class="p">&lt;</span><span class="nt">button</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;square&quot;</span><span class="w"> </span><span class="na">onClick</span><span class="o">=</span><span class="p">{</span><span class="nx">onSquareClick</span><span class="p">}&gt;</span>
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="w">    </span><span class="p">{</span><span class="nx">value</span><span class="p">}</span>
</span><span id="__span-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="w">    </span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span><span id="__span-0-8"><a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="p">);</span>
</span><span id="__span-0-9"><a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a><span class="p">}</span>
</span><span id="__span-0-10"><a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a>
</span><span id="__span-0-11"><a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a><span class="kd">function</span><span class="w"> </span><span class="nx">Board</span><span class="p">({</span><span class="w"> </span><span class="nx">xIsNext</span><span class="p">,</span><span class="w"> </span><span class="nx">squares</span><span class="p">,</span><span class="w"> </span><span class="nx">onPlay</span><span class="w"> </span><span class="p">})</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-0-12"><a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a><span class="kd">function</span><span class="w"> </span><span class="nx">handleClick</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-0-13"><a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">calculateWinner</span><span class="p">(</span><span class="nx">squares</span><span class="p">)</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nx">squares</span><span class="p">[</span><span class="nx">i</span><span class="p">])</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-0-14"><a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a><span class="w">    </span><span class="k">return</span><span class="p">;</span>
</span><span id="__span-0-15"><a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-0-16"><a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">nextSquares</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">squares</span><span class="p">.</span><span class="nx">slice</span><span class="p">();</span>
</span><span id="__span-0-17"><a id="__codelineno-0-17" name="__codelineno-0-17" href="#__codelineno-0-17"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">xIsNext</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-0-18"><a id="__codelineno-0-18" name="__codelineno-0-18" href="#__codelineno-0-18"></a><span class="w">    </span><span class="nx">nextSquares</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;X&#39;</span><span class="p">;</span>
</span><span id="__span-0-19"><a id="__codelineno-0-19" name="__codelineno-0-19" href="#__codelineno-0-19"></a><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-0-20"><a id="__codelineno-0-20" name="__codelineno-0-20" href="#__codelineno-0-20"></a><span class="w">    </span><span class="nx">nextSquares</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;O&#39;</span><span class="p">;</span>
</span><span id="__span-0-21"><a id="__codelineno-0-21" name="__codelineno-0-21" href="#__codelineno-0-21"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-0-22"><a id="__codelineno-0-22" name="__codelineno-0-22" href="#__codelineno-0-22"></a><span class="w">    </span><span class="nx">onPlay</span><span class="p">(</span><span class="nx">nextSquares</span><span class="p">);</span>
</span><span id="__span-0-23"><a id="__codelineno-0-23" name="__codelineno-0-23" href="#__codelineno-0-23"></a><span class="p">}</span>
</span><span id="__span-0-24"><a id="__codelineno-0-24" name="__codelineno-0-24" href="#__codelineno-0-24"></a>
</span><span id="__span-0-25"><a id="__codelineno-0-25" name="__codelineno-0-25" href="#__codelineno-0-25"></a><span class="kd">const</span><span class="w"> </span><span class="nx">winner</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">calculateWinner</span><span class="p">(</span><span class="nx">squares</span><span class="p">);</span>
</span><span id="__span-0-26"><a id="__codelineno-0-26" name="__codelineno-0-26" href="#__codelineno-0-26"></a><span class="kd">let</span><span class="w"> </span><span class="nx">status</span><span class="p">;</span>
</span><span id="__span-0-27"><a id="__codelineno-0-27" name="__codelineno-0-27" href="#__codelineno-0-27"></a><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">winner</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-0-28"><a id="__codelineno-0-28" name="__codelineno-0-28" href="#__codelineno-0-28"></a><span class="w">    </span><span class="nx">status</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;Winner: &#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">winner</span><span class="p">;</span>
</span><span id="__span-0-29"><a id="__codelineno-0-29" name="__codelineno-0-29" href="#__codelineno-0-29"></a><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-0-30"><a id="__codelineno-0-30" name="__codelineno-0-30" href="#__codelineno-0-30"></a><span class="w">    </span><span class="nx">status</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;Next player: &#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="p">(</span><span class="nx">xIsNext</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="s1">&#39;X&#39;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;O&#39;</span><span class="p">);</span>
</span><span id="__span-0-31"><a id="__codelineno-0-31" name="__codelineno-0-31" href="#__codelineno-0-31"></a><span class="p">}</span>
</span><span id="__span-0-32"><a id="__codelineno-0-32" name="__codelineno-0-32" href="#__codelineno-0-32"></a>
</span><span id="__span-0-33"><a id="__codelineno-0-33" name="__codelineno-0-33" href="#__codelineno-0-33"></a><span class="k">return</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-0-34"><a id="__codelineno-0-34" name="__codelineno-0-34" href="#__codelineno-0-34"></a><span class="w">    </span><span class="p">&lt;&gt;</span>
</span><span id="__span-0-35"><a id="__codelineno-0-35" name="__codelineno-0-35" href="#__codelineno-0-35"></a><span class="w">    </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;status&quot;</span><span class="p">&gt;{</span><span class="nx">status</span><span class="p">}&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="__span-0-36"><a id="__codelineno-0-36" name="__codelineno-0-36" href="#__codelineno-0-36"></a><span class="w">    </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;board-row&quot;</span><span class="p">&gt;</span>
</span><span id="__span-0-37"><a id="__codelineno-0-37" name="__codelineno-0-37" href="#__codelineno-0-37"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">squares</span><span class="p">[</span><span class="mf">0</span><span class="p">]}</span><span class="w"> </span><span class="na">onSquareClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">handleClick</span><span class="p">(</span><span class="mf">0</span><span class="p">)}</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-0-38"><a id="__codelineno-0-38" name="__codelineno-0-38" href="#__codelineno-0-38"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">squares</span><span class="p">[</span><span class="mf">1</span><span class="p">]}</span><span class="w"> </span><span class="na">onSquareClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">handleClick</span><span class="p">(</span><span class="mf">1</span><span class="p">)}</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-0-39"><a id="__codelineno-0-39" name="__codelineno-0-39" href="#__codelineno-0-39"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">squares</span><span class="p">[</span><span class="mf">2</span><span class="p">]}</span><span class="w"> </span><span class="na">onSquareClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">handleClick</span><span class="p">(</span><span class="mf">2</span><span class="p">)}</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-0-40"><a id="__codelineno-0-40" name="__codelineno-0-40" href="#__codelineno-0-40"></a><span class="w">    </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="__span-0-41"><a id="__codelineno-0-41" name="__codelineno-0-41" href="#__codelineno-0-41"></a><span class="w">    </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;board-row&quot;</span><span class="p">&gt;</span>
</span><span id="__span-0-42"><a id="__codelineno-0-42" name="__codelineno-0-42" href="#__codelineno-0-42"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">squares</span><span class="p">[</span><span class="mf">3</span><span class="p">]}</span><span class="w"> </span><span class="na">onSquareClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">handleClick</span><span class="p">(</span><span class="mf">3</span><span class="p">)}</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-0-43"><a id="__codelineno-0-43" name="__codelineno-0-43" href="#__codelineno-0-43"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">squares</span><span class="p">[</span><span class="mf">4</span><span class="p">]}</span><span class="w"> </span><span class="na">onSquareClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">handleClick</span><span class="p">(</span><span class="mf">4</span><span class="p">)}</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-0-44"><a id="__codelineno-0-44" name="__codelineno-0-44" href="#__codelineno-0-44"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">squares</span><span class="p">[</span><span class="mf">5</span><span class="p">]}</span><span class="w"> </span><span class="na">onSquareClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">handleClick</span><span class="p">(</span><span class="mf">5</span><span class="p">)}</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-0-45"><a id="__codelineno-0-45" name="__codelineno-0-45" href="#__codelineno-0-45"></a><span class="w">    </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="__span-0-46"><a id="__codelineno-0-46" name="__codelineno-0-46" href="#__codelineno-0-46"></a><span class="w">    </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;board-row&quot;</span><span class="p">&gt;</span>
</span><span id="__span-0-47"><a id="__codelineno-0-47" name="__codelineno-0-47" href="#__codelineno-0-47"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">squares</span><span class="p">[</span><span class="mf">6</span><span class="p">]}</span><span class="w"> </span><span class="na">onSquareClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">handleClick</span><span class="p">(</span><span class="mf">6</span><span class="p">)}</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-0-48"><a id="__codelineno-0-48" name="__codelineno-0-48" href="#__codelineno-0-48"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">squares</span><span class="p">[</span><span class="mf">7</span><span class="p">]}</span><span class="w"> </span><span class="na">onSquareClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">handleClick</span><span class="p">(</span><span class="mf">7</span><span class="p">)}</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-0-49"><a id="__codelineno-0-49" name="__codelineno-0-49" href="#__codelineno-0-49"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">squares</span><span class="p">[</span><span class="mf">8</span><span class="p">]}</span><span class="w"> </span><span class="na">onSquareClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">handleClick</span><span class="p">(</span><span class="mf">8</span><span class="p">)}</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-0-50"><a id="__codelineno-0-50" name="__codelineno-0-50" href="#__codelineno-0-50"></a><span class="w">    </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="__span-0-51"><a id="__codelineno-0-51" name="__codelineno-0-51" href="#__codelineno-0-51"></a><span class="w">    </span><span class="p">&lt;/&gt;</span>
</span><span id="__span-0-52"><a id="__codelineno-0-52" name="__codelineno-0-52" href="#__codelineno-0-52"></a><span class="p">);</span>
</span><span id="__span-0-53"><a id="__codelineno-0-53" name="__codelineno-0-53" href="#__codelineno-0-53"></a><span class="p">}</span>
</span><span id="__span-0-54"><a id="__codelineno-0-54" name="__codelineno-0-54" href="#__codelineno-0-54"></a>
</span><span id="__span-0-55"><a id="__codelineno-0-55" name="__codelineno-0-55" href="#__codelineno-0-55"></a><span class="k">export</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">Game</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-0-56"><a id="__codelineno-0-56" name="__codelineno-0-56" href="#__codelineno-0-56"></a><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">history</span><span class="p">,</span><span class="w"> </span><span class="nx">setHistory</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useState</span><span class="p">([</span><span class="nb">Array</span><span class="p">(</span><span class="mf">9</span><span class="p">).</span><span class="nx">fill</span><span class="p">(</span><span class="kc">null</span><span class="p">)]);</span>
</span><span id="__span-0-57"><a id="__codelineno-0-57" name="__codelineno-0-57" href="#__codelineno-0-57"></a><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">currentMove</span><span class="p">,</span><span class="w"> </span><span class="nx">setCurrentMove</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useState</span><span class="p">(</span><span class="mf">0</span><span class="p">);</span>
</span><span id="__span-0-58"><a id="__codelineno-0-58" name="__codelineno-0-58" href="#__codelineno-0-58"></a><span class="kd">const</span><span class="w"> </span><span class="nx">xIsNext</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">currentMove</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mf">2</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span>
</span><span id="__span-0-59"><a id="__codelineno-0-59" name="__codelineno-0-59" href="#__codelineno-0-59"></a><span class="kd">const</span><span class="w"> </span><span class="nx">currentSquares</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">history</span><span class="p">[</span><span class="nx">currentMove</span><span class="p">];</span>
</span><span id="__span-0-60"><a id="__codelineno-0-60" name="__codelineno-0-60" href="#__codelineno-0-60"></a>
</span><span id="__span-0-61"><a id="__codelineno-0-61" name="__codelineno-0-61" href="#__codelineno-0-61"></a><span class="kd">function</span><span class="w"> </span><span class="nx">handlePlay</span><span class="p">(</span><span class="nx">nextSquares</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-0-62"><a id="__codelineno-0-62" name="__codelineno-0-62" href="#__codelineno-0-62"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">nextHistory</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[...</span><span class="nx">history</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="nx">currentMove</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">1</span><span class="p">),</span><span class="w"> </span><span class="nx">nextSquares</span><span class="p">];</span>
</span><span id="__span-0-63"><a id="__codelineno-0-63" name="__codelineno-0-63" href="#__codelineno-0-63"></a><span class="w">    </span><span class="nx">setHistory</span><span class="p">(</span><span class="nx">nextHistory</span><span class="p">);</span>
</span><span id="__span-0-64"><a id="__codelineno-0-64" name="__codelineno-0-64" href="#__codelineno-0-64"></a><span class="w">    </span><span class="nx">setCurrentMove</span><span class="p">(</span><span class="nx">nextHistory</span><span class="p">.</span><span class="nx">length</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">1</span><span class="p">);</span>
</span><span id="__span-0-65"><a id="__codelineno-0-65" name="__codelineno-0-65" href="#__codelineno-0-65"></a><span class="p">}</span>
</span><span id="__span-0-66"><a id="__codelineno-0-66" name="__codelineno-0-66" href="#__codelineno-0-66"></a>
</span><span id="__span-0-67"><a id="__codelineno-0-67" name="__codelineno-0-67" href="#__codelineno-0-67"></a><span class="kd">function</span><span class="w"> </span><span class="nx">jumpTo</span><span class="p">(</span><span class="nx">nextMove</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-0-68"><a id="__codelineno-0-68" name="__codelineno-0-68" href="#__codelineno-0-68"></a><span class="w">    </span><span class="nx">setCurrentMove</span><span class="p">(</span><span class="nx">nextMove</span><span class="p">);</span>
</span><span id="__span-0-69"><a id="__codelineno-0-69" name="__codelineno-0-69" href="#__codelineno-0-69"></a><span class="p">}</span>
</span><span id="__span-0-70"><a id="__codelineno-0-70" name="__codelineno-0-70" href="#__codelineno-0-70"></a>
</span><span id="__span-0-71"><a id="__codelineno-0-71" name="__codelineno-0-71" href="#__codelineno-0-71"></a><span class="kd">const</span><span class="w"> </span><span class="nx">moves</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">history</span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">squares</span><span class="p">,</span><span class="w"> </span><span class="nx">move</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-0-72"><a id="__codelineno-0-72" name="__codelineno-0-72" href="#__codelineno-0-72"></a><span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="nx">description</span><span class="p">;</span>
</span><span id="__span-0-73"><a id="__codelineno-0-73" name="__codelineno-0-73" href="#__codelineno-0-73"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">move</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mf">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-0-74"><a id="__codelineno-0-74" name="__codelineno-0-74" href="#__codelineno-0-74"></a><span class="w">    </span><span class="nx">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;Go to move #&#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">move</span><span class="p">;</span>
</span><span id="__span-0-75"><a id="__codelineno-0-75" name="__codelineno-0-75" href="#__codelineno-0-75"></a><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-0-76"><a id="__codelineno-0-76" name="__codelineno-0-76" href="#__codelineno-0-76"></a><span class="w">    </span><span class="nx">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;Go to game start&#39;</span><span class="p">;</span>
</span><span id="__span-0-77"><a id="__codelineno-0-77" name="__codelineno-0-77" href="#__codelineno-0-77"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-0-78"><a id="__codelineno-0-78" name="__codelineno-0-78" href="#__codelineno-0-78"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-0-79"><a id="__codelineno-0-79" name="__codelineno-0-79" href="#__codelineno-0-79"></a><span class="w">    </span><span class="p">&lt;</span><span class="nt">li</span><span class="w"> </span><span class="na">key</span><span class="o">=</span><span class="p">{</span><span class="nx">move</span><span class="p">}&gt;</span>
</span><span id="__span-0-80"><a id="__codelineno-0-80" name="__codelineno-0-80" href="#__codelineno-0-80"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">button</span><span class="w"> </span><span class="na">onClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">jumpTo</span><span class="p">(</span><span class="nx">move</span><span class="p">)}&gt;{</span><span class="nx">description</span><span class="p">}&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span><span id="__span-0-81"><a id="__codelineno-0-81" name="__codelineno-0-81" href="#__codelineno-0-81"></a><span class="w">    </span><span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
</span><span id="__span-0-82"><a id="__codelineno-0-82" name="__codelineno-0-82" href="#__codelineno-0-82"></a><span class="w">    </span><span class="p">);</span>
</span><span id="__span-0-83"><a id="__codelineno-0-83" name="__codelineno-0-83" href="#__codelineno-0-83"></a><span class="p">});</span>
</span><span id="__span-0-84"><a id="__codelineno-0-84" name="__codelineno-0-84" href="#__codelineno-0-84"></a>
</span><span id="__span-0-85"><a id="__codelineno-0-85" name="__codelineno-0-85" href="#__codelineno-0-85"></a><span class="k">return</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-0-86"><a id="__codelineno-0-86" name="__codelineno-0-86" href="#__codelineno-0-86"></a><span class="w">    </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;game&quot;</span><span class="p">&gt;</span>
</span><span id="__span-0-87"><a id="__codelineno-0-87" name="__codelineno-0-87" href="#__codelineno-0-87"></a><span class="w">    </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;game-board&quot;</span><span class="p">&gt;</span>
</span><span id="__span-0-88"><a id="__codelineno-0-88" name="__codelineno-0-88" href="#__codelineno-0-88"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Board</span><span class="w"> </span><span class="na">xIsNext</span><span class="o">=</span><span class="p">{</span><span class="nx">xIsNext</span><span class="p">}</span><span class="w"> </span><span class="na">squares</span><span class="o">=</span><span class="p">{</span><span class="nx">currentSquares</span><span class="p">}</span><span class="w"> </span><span class="na">onPlay</span><span class="o">=</span><span class="p">{</span><span class="nx">handlePlay</span><span class="p">}</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-0-89"><a id="__codelineno-0-89" name="__codelineno-0-89" href="#__codelineno-0-89"></a><span class="w">    </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="__span-0-90"><a id="__codelineno-0-90" name="__codelineno-0-90" href="#__codelineno-0-90"></a><span class="w">    </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;game-info&quot;</span><span class="p">&gt;</span>
</span><span id="__span-0-91"><a id="__codelineno-0-91" name="__codelineno-0-91" href="#__codelineno-0-91"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">ol</span><span class="p">&gt;{</span><span class="nx">moves</span><span class="p">}&lt;/</span><span class="nt">ol</span><span class="p">&gt;</span>
</span><span id="__span-0-92"><a id="__codelineno-0-92" name="__codelineno-0-92" href="#__codelineno-0-92"></a><span class="w">    </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="__span-0-93"><a id="__codelineno-0-93" name="__codelineno-0-93" href="#__codelineno-0-93"></a><span class="w">    </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="__span-0-94"><a id="__codelineno-0-94" name="__codelineno-0-94" href="#__codelineno-0-94"></a><span class="p">);</span>
</span><span id="__span-0-95"><a id="__codelineno-0-95" name="__codelineno-0-95" href="#__codelineno-0-95"></a><span class="p">}</span>
</span><span id="__span-0-96"><a id="__codelineno-0-96" name="__codelineno-0-96" href="#__codelineno-0-96"></a>
</span><span id="__span-0-97"><a id="__codelineno-0-97" name="__codelineno-0-97" href="#__codelineno-0-97"></a><span class="kd">function</span><span class="w"> </span><span class="nx">calculateWinner</span><span class="p">(</span><span class="nx">squares</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-0-98"><a id="__codelineno-0-98" name="__codelineno-0-98" href="#__codelineno-0-98"></a><span class="kd">const</span><span class="w"> </span><span class="nx">lines</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
</span><span id="__span-0-99"><a id="__codelineno-0-99" name="__codelineno-0-99" href="#__codelineno-0-99"></a><span class="w">    </span><span class="p">[</span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">2</span><span class="p">],</span>
</span><span id="__span-0-100"><a id="__codelineno-0-100" name="__codelineno-0-100" href="#__codelineno-0-100"></a><span class="w">    </span><span class="p">[</span><span class="mf">3</span><span class="p">,</span><span class="w"> </span><span class="mf">4</span><span class="p">,</span><span class="w"> </span><span class="mf">5</span><span class="p">],</span>
</span><span id="__span-0-101"><a id="__codelineno-0-101" name="__codelineno-0-101" href="#__codelineno-0-101"></a><span class="w">    </span><span class="p">[</span><span class="mf">6</span><span class="p">,</span><span class="w"> </span><span class="mf">7</span><span class="p">,</span><span class="w"> </span><span class="mf">8</span><span class="p">],</span>
</span><span id="__span-0-102"><a id="__codelineno-0-102" name="__codelineno-0-102" href="#__codelineno-0-102"></a><span class="w">    </span><span class="p">[</span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">3</span><span class="p">,</span><span class="w"> </span><span class="mf">6</span><span class="p">],</span>
</span><span id="__span-0-103"><a id="__codelineno-0-103" name="__codelineno-0-103" href="#__codelineno-0-103"></a><span class="w">    </span><span class="p">[</span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">4</span><span class="p">,</span><span class="w"> </span><span class="mf">7</span><span class="p">],</span>
</span><span id="__span-0-104"><a id="__codelineno-0-104" name="__codelineno-0-104" href="#__codelineno-0-104"></a><span class="w">    </span><span class="p">[</span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="mf">5</span><span class="p">,</span><span class="w"> </span><span class="mf">8</span><span class="p">],</span>
</span><span id="__span-0-105"><a id="__codelineno-0-105" name="__codelineno-0-105" href="#__codelineno-0-105"></a><span class="w">    </span><span class="p">[</span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">4</span><span class="p">,</span><span class="w"> </span><span class="mf">8</span><span class="p">],</span>
</span><span id="__span-0-106"><a id="__codelineno-0-106" name="__codelineno-0-106" href="#__codelineno-0-106"></a><span class="w">    </span><span class="p">[</span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="mf">4</span><span class="p">,</span><span class="w"> </span><span class="mf">6</span><span class="p">],</span>
</span><span id="__span-0-107"><a id="__codelineno-0-107" name="__codelineno-0-107" href="#__codelineno-0-107"></a><span class="p">];</span>
</span><span id="__span-0-108"><a id="__codelineno-0-108" name="__codelineno-0-108" href="#__codelineno-0-108"></a><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">let</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="nx">lines</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-0-109"><a id="__codelineno-0-109" name="__codelineno-0-109" href="#__codelineno-0-109"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">a</span><span class="p">,</span><span class="w"> </span><span class="nx">b</span><span class="p">,</span><span class="w"> </span><span class="nx">c</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">lines</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
</span><span id="__span-0-110"><a id="__codelineno-0-110" name="__codelineno-0-110" href="#__codelineno-0-110"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">squares</span><span class="p">[</span><span class="nx">a</span><span class="p">]</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nx">squares</span><span class="p">[</span><span class="nx">a</span><span class="p">]</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="nx">squares</span><span class="p">[</span><span class="nx">b</span><span class="p">]</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nx">squares</span><span class="p">[</span><span class="nx">a</span><span class="p">]</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="nx">squares</span><span class="p">[</span><span class="nx">c</span><span class="p">])</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-0-111"><a id="__codelineno-0-111" name="__codelineno-0-111" href="#__codelineno-0-111"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">squares</span><span class="p">[</span><span class="nx">a</span><span class="p">];</span>
</span><span id="__span-0-112"><a id="__codelineno-0-112" name="__codelineno-0-112" href="#__codelineno-0-112"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-0-113"><a id="__codelineno-0-113" name="__codelineno-0-113" href="#__codelineno-0-113"></a><span class="p">}</span>
</span><span id="__span-0-114"><a id="__codelineno-0-114" name="__codelineno-0-114" href="#__codelineno-0-114"></a><span class="k">return</span><span class="w"> </span><span class="kc">null</span><span class="p">;</span>
</span><span id="__span-0-115"><a id="__codelineno-0-115" name="__codelineno-0-115" href="#__codelineno-0-115"></a><span class="p">}</span>
</span></code></pre></div>
</div>
</div>
</div>
</details>
<p>如果你还不是很明白上面的代码，不用担心！本教程的目的就是帮你理解 React 及其语法。</p>
<p>我们建议你在继续本教程之前，先看看上面的井字棋游戏。我们会注意到的一项功能是，棋盘右侧有一个编号列表，它记录了游戏中落子的历史，并随着游戏的进行而更新。</p>
<p>体验完游戏以后，继续阅读本教程吧！我们将从一个更简单的模板开始。下一步将介绍相关配置，以便于你着手实现这个游戏。</p>
<h2 id="1">1. 配置<a class="headerlink" href="#1" title="Permanent link">&para;</a></h2>
<p>在下面的实时代码编辑器中，单击右上角的 Fork 来在新选项卡中打开 CodeSandbox 编辑器。CodeSandbox 让你能够在浏览器中编写代码并预览效果。一切顺利的话，你应该会看见一个空方块和本教程的初始代码。</p>
<div class="language-jsx highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-1-1">1</a></span>
<span class="normal"><a href="#__codelineno-1-2">2</a></span>
<span class="normal"><a href="#__codelineno-1-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1"></a><span class="k">export</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">Square</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">&lt;</span><span class="nt">button</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;square&quot;</span><span class="p">&gt;</span><span class="nx">X</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;;</span>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<div class="admonition warning">
<p class="admonition-title">注意</p>
<p>如果你想要使用本地开发环境来学习这个教程，需要按照下面的流程进行：</p>
<ol>
<li>安装 Node.js</li>
<li>在之前打开的 CodeSandbox 选项卡中，按左上角的按钮打开菜单，然后选择 Download Sandbox，将代码压缩包下载到本地。</li>
<li>将压缩包解压，打开终端并使用 cd 命令切换到你解压后的目录。</li>
<li>使用 <code>npm install</code> 安装依赖。</li>
<li>运行 <code>npm start</code> 启动本地服务器，按照提示在浏览器中查看运行效果。</li>
</ol>
</div>
<p>如果你遇到了困难，不要花费时间去找解决方案。请改为在线进行操作，稍后再尝试本地配置。</p>
<h2 id="2">2. 初步设计<a class="headerlink" href="#2" title="Permanent link">&para;</a></h2>
<h3 id="21">2.1 看一下刚刚的代码<a class="headerlink" href="#21" title="Permanent link">&para;</a></h3>
<p>在 CodeSandbox 中，你将看到三个主要的部分：</p>
<p><img alt="" src="https://zh-hans.react.dev/images/tutorial/react-starter-code-codesandbox.png" /></p>
<ol>
<li><em>Files</em> 部分列出了一些文件：App.js、index.js、styles.css 和 public 文件夹。</li>
<li><em>code editor</em> 部分可以看到你所选中文件的源码。</li>
<li><em>browser</em> 部分可以预览代码的实时结果。</li>
</ol>
<p>App.js 文件里面的内容应该是这样的：</p>
<div class="language-jsx highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-2-1">1</a></span>
<span class="normal"><a href="#__codelineno-2-2">2</a></span>
<span class="normal"><a href="#__codelineno-2-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1"></a><span class="k">export</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">Square</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">&lt;</span><span class="nt">button</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;square&quot;</span><span class="p">&gt;</span><span class="nx">X</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;;</span>
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<p>browser 部分应该会像下面这样在方块里面显示一个 X：</p>
<p><img alt="" src="https://zh-hans.react.dev/images/tutorial/x-filled-square.png" /></p>
<p>现在，让我们仔细研究一下这些文件吧。</p>
<h4 id="1-appjs">(1)) App.js<a class="headerlink" href="#1-appjs" title="Permanent link">&para;</a></h4>
<p>App.js 的代码创建了一个 <strong>组件</strong>。在 React 中，组件是一段可重用代码，它通常作为 UI 界面的一部分。组件用于渲染、管理和更新应用中的 UI 元素。让我们逐行查看这段代码，看看发生了什么：</p>
<div class="language-jsx highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-3-1">1</a></span>
<span class="normal"><a href="#__codelineno-3-2">2</a></span>
<span class="normal"><a href="#__codelineno-3-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1"></a><span class="k">export</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">Square</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">&lt;</span><span class="nt">button</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;square&quot;</span><span class="p">&gt;</span><span class="nx">X</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;;</span>
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<p>第一行定义了一个名为 <code>Square</code> 的函数。JavaScript 的 <code>export</code> <code>关键字使此函数可以在此文件之外访问。</code>default` 关键字表明它是文件中的主要函数。</p>
<div class="language-jsx highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-4-1">1</a></span>
<span class="normal"><a href="#__codelineno-4-2">2</a></span>
<span class="normal"><a href="#__codelineno-4-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1"></a><span class="k">export</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">Square</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">&lt;</span><span class="nt">button</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;square&quot;</span><span class="p">&gt;</span><span class="nx">X</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;;</span>
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<p>第二行返回一个按钮。JavaScript 的 <code>return</code> 关键字意味着后面的内容都作为值返回给函数的调用者。<code>&lt;button&gt;</code> 是一个 JSX 元素。JSX 元素是 JavaScript 代码和 HTML 标签的组合，用于描述要显示的内容。<code>className="square"</code> 是一个 button 属性，它决定 CSS 如何设置按钮的样式。<code>X</code> 是按钮内显示的文本，<code>&lt;/button&gt;</code> 闭合 JSX 元素以表示不应将任何后续内容放置在按钮内。</p>
<h4 id="2-stylecss">(2) style.css<a class="headerlink" href="#2-stylecss" title="Permanent link">&para;</a></h4>
<p>单击 CodeSandbox 中的 <code>styles.css</code> 文件。该文件定义了 React 应用的样式。前两个 <strong>CSS 选择器</strong>（<code>*</code> 和 <code>body</code>）定义了应用大部分的样式，而 <code>.square</code> 选择器定义了 <code>className</code> 属性设置为 <code>square</code> 的组件的样式。这与 <code>App.js</code> 文件中的 <code>Square</code> 组件中的按钮是相匹配的。</p>
<h4 id="3-indexjs">(3) index.js<a class="headerlink" href="#3-indexjs" title="Permanent link">&para;</a></h4>
<p>单击 CodeSandbox 中的 <code>index.js</code> 的文件。在本教程中我们不会编辑此文件，但它是 <code>App.js</code> 文件中创建的组件与 Web 浏览器之间的桥梁。</p>
<div class="language-jsx highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-5-1">1</a></span>
<span class="normal"><a href="#__codelineno-5-2">2</a></span>
<span class="normal"><a href="#__codelineno-5-3">3</a></span>
<span class="normal"><a href="#__codelineno-5-4">4</a></span>
<span class="normal"><a href="#__codelineno-5-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">StrictMode</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;react&#39;</span><span class="p">;</span>
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">createRoot</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;react-dom/client&#39;</span><span class="p">;</span>
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3"></a><span class="k">import</span><span class="w"> </span><span class="s1">&#39;./styles.css&#39;</span><span class="p">;</span>
</span><span id="__span-5-4"><a id="__codelineno-5-4" name="__codelineno-5-4"></a>
</span><span id="__span-5-5"><a id="__codelineno-5-5" name="__codelineno-5-5"></a><span class="k">import</span><span class="w"> </span><span class="nx">App</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./App&#39;</span><span class="p">;</span>
</span></code></pre></div></td></tr></table></div>
<p>第 1-5 行将所有必要的部分组合在一起：</p>
<ul>
<li>React</li>
<li>React 与 Web 浏览器对话的库（React DOM）</li>
<li>组件的样式</li>
<li><code>App.js</code> 里面创建的组件</li>
</ul>
<p>其他文件将它们组合在一起，并将最终成果注入 <code>public</code> 文件夹里面的 <code>index.html</code> 中。</p>
<h3 id="22">2.2 构建棋盘<a class="headerlink" href="#22" title="Permanent link">&para;</a></h3>
<p>让我们回到 <code>App.js</code>。接下来我们将专注于这个文件。目前棋盘只有一个方块，但你需要九个！如果你只是想着复制粘贴来制作两个像这样的方块：</p>
<div class="language-jsx highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-6-1">1</a></span>
<span class="normal"><a href="#__codelineno-6-2">2</a></span>
<span class="normal"><a href="#__codelineno-6-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1"></a><span class="k">export</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">Square</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2"></a><span class="hll"><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">&lt;</span><span class="nt">button</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;square&quot;</span><span class="p">&gt;</span><span class="nx">X</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;&lt;</span><span class="nt">button</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;square&quot;</span><span class="p">&gt;</span><span class="nx">X</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;;</span>
</span></span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<p>你将会得到如下错误：</p>
<div class="language-jsx highlight"><span class="filename">控制台</span><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="err">/src/App.js: Adjacent JSX elements must be wrapped in an enclosing tag. Did you want a JSX Fragment &lt;&gt;...&lt;/&gt;?</span>
</span></code></pre></div>
<p>React 组件必须返回单个 JSX 元素，不能像两个按钮那样返回多个相邻的 JSX 元素。要解决此问题，可以使用 Fragment（<code>&lt;&gt;</code> 与 ``）包裹多个相邻的 JSX 元素，如下所示：</p>
<div class="language-jsx highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-8-1">1</a></span>
<span class="normal"><a href="#__codelineno-8-2">2</a></span>
<span class="normal"><a href="#__codelineno-8-3">3</a></span>
<span class="normal"><a href="#__codelineno-8-4">4</a></span>
<span class="normal"><a href="#__codelineno-8-5">5</a></span>
<span class="normal"><a href="#__codelineno-8-6">6</a></span>
<span class="normal"><a href="#__codelineno-8-7">7</a></span>
<span class="normal"><a href="#__codelineno-8-8">8</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1"></a><span class="k">export</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">Square</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-8-3"><a id="__codelineno-8-3" name="__codelineno-8-3"></a><span class="hll"><span class="w">    </span><span class="p">&lt;&gt;</span>
</span></span><span id="__span-8-4"><a id="__codelineno-8-4" name="__codelineno-8-4"></a><span class="hll"><span class="w">      </span><span class="p">&lt;</span><span class="nt">button</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;square&quot;</span><span class="p">&gt;</span><span class="nx">X</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span></span><span id="__span-8-5"><a id="__codelineno-8-5" name="__codelineno-8-5"></a><span class="hll"><span class="w">      </span><span class="p">&lt;</span><span class="nt">button</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;square&quot;</span><span class="p">&gt;</span><span class="nx">X</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span></span><span id="__span-8-6"><a id="__codelineno-8-6" name="__codelineno-8-6"></a><span class="hll"><span class="w">    </span><span class="p">&lt;/&gt;</span>
</span></span><span id="__span-8-7"><a id="__codelineno-8-7" name="__codelineno-8-7"></a><span class="w">  </span><span class="p">);</span>
</span><span id="__span-8-8"><a id="__codelineno-8-8" name="__codelineno-8-8"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<p>现在你应该可以看见：</p>
<p><img alt="" src="https://zh-hans.react.dev/images/tutorial/two-x-filled-squares.png" /></p>
<p>非常棒！现在你只需要通过复制粘贴来添加九个方块，然后……</p>
<p><img alt="" src="https://zh-hans.react.dev/images/tutorial/nine-x-filled-squares.png" /></p>
<p>但事与愿违的是这些方块并没有排列成网格，而是都在一条线上。要解决此问题，需要使用 <code>div</code> 将方块分到每一行中并添加一些 CSS 样式。当你这样做的时候，需要给每个方块一个数字，以确保你知道每个方块的位置。</p>
<p><code>App.js</code> 文件中，<code>Square</code> 组件看起来像这样：</p>
<div class="language-jsx highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Square 组件</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-9-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-9-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-9-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-9-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-9-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-9-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-9-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-9-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-9-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-9-10">10</a></span>
<span class="normal"><a href="#__codelineno-9-11">11</a></span>
<span class="normal"><a href="#__codelineno-9-12">12</a></span>
<span class="normal"><a href="#__codelineno-9-13">13</a></span>
<span class="normal"><a href="#__codelineno-9-14">14</a></span>
<span class="normal"><a href="#__codelineno-9-15">15</a></span>
<span class="normal"><a href="#__codelineno-9-16">16</a></span>
<span class="normal"><a href="#__codelineno-9-17">17</a></span>
<span class="normal"><a href="#__codelineno-9-18">18</a></span>
<span class="normal"><a href="#__codelineno-9-19">19</a></span>
<span class="normal"><a href="#__codelineno-9-20">20</a></span>
<span class="normal"><a href="#__codelineno-9-21">21</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1"></a><span class="k">export</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">Square</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-9-3"><a id="__codelineno-9-3" name="__codelineno-9-3"></a><span class="hll"><span class="w">    </span><span class="p">&lt;&gt;</span>
</span></span><span id="__span-9-4"><a id="__codelineno-9-4" name="__codelineno-9-4"></a><span class="hll"><span class="w">      </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;board-row&quot;</span><span class="p">&gt;</span>
</span></span><span id="__span-9-5"><a id="__codelineno-9-5" name="__codelineno-9-5"></a><span class="hll"><span class="w">        </span><span class="p">&lt;</span><span class="nt">button</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;square&quot;</span><span class="p">&gt;</span><span class="mf">1</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span></span><span id="__span-9-6"><a id="__codelineno-9-6" name="__codelineno-9-6"></a><span class="hll"><span class="w">        </span><span class="p">&lt;</span><span class="nt">button</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;square&quot;</span><span class="p">&gt;</span><span class="mf">2</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span></span><span id="__span-9-7"><a id="__codelineno-9-7" name="__codelineno-9-7"></a><span class="hll"><span class="w">        </span><span class="p">&lt;</span><span class="nt">button</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;square&quot;</span><span class="p">&gt;</span><span class="mf">3</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span></span><span id="__span-9-8"><a id="__codelineno-9-8" name="__codelineno-9-8"></a><span class="hll"><span class="w">      </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span id="__span-9-9"><a id="__codelineno-9-9" name="__codelineno-9-9"></a><span class="hll"><span class="w">      </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;board-row&quot;</span><span class="p">&gt;</span>
</span></span><span id="__span-9-10"><a id="__codelineno-9-10" name="__codelineno-9-10"></a><span class="hll"><span class="w">        </span><span class="p">&lt;</span><span class="nt">button</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;square&quot;</span><span class="p">&gt;</span><span class="mf">4</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span></span><span id="__span-9-11"><a id="__codelineno-9-11" name="__codelineno-9-11"></a><span class="hll"><span class="w">        </span><span class="p">&lt;</span><span class="nt">button</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;square&quot;</span><span class="p">&gt;</span><span class="mf">5</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span></span><span id="__span-9-12"><a id="__codelineno-9-12" name="__codelineno-9-12"></a><span class="hll"><span class="w">        </span><span class="p">&lt;</span><span class="nt">button</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;square&quot;</span><span class="p">&gt;</span><span class="mf">6</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span></span><span id="__span-9-13"><a id="__codelineno-9-13" name="__codelineno-9-13"></a><span class="hll"><span class="w">      </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span id="__span-9-14"><a id="__codelineno-9-14" name="__codelineno-9-14"></a><span class="hll"><span class="w">      </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;board-row&quot;</span><span class="p">&gt;</span>
</span></span><span id="__span-9-15"><a id="__codelineno-9-15" name="__codelineno-9-15"></a><span class="hll"><span class="w">        </span><span class="p">&lt;</span><span class="nt">button</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;square&quot;</span><span class="p">&gt;</span><span class="mf">7</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span></span><span id="__span-9-16"><a id="__codelineno-9-16" name="__codelineno-9-16"></a><span class="hll"><span class="w">        </span><span class="p">&lt;</span><span class="nt">button</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;square&quot;</span><span class="p">&gt;</span><span class="mf">8</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span></span><span id="__span-9-17"><a id="__codelineno-9-17" name="__codelineno-9-17"></a><span class="hll"><span class="w">        </span><span class="p">&lt;</span><span class="nt">button</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;square&quot;</span><span class="p">&gt;</span><span class="mf">9</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span></span><span id="__span-9-18"><a id="__codelineno-9-18" name="__codelineno-9-18"></a><span class="hll"><span class="w">      </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span id="__span-9-19"><a id="__codelineno-9-19" name="__codelineno-9-19"></a><span class="hll"><span class="w">    </span><span class="p">&lt;/&gt;</span>
</span></span><span id="__span-9-20"><a id="__codelineno-9-20" name="__codelineno-9-20"></a><span class="w">  </span><span class="p">);</span>
</span><span id="__span-9-21"><a id="__codelineno-9-21" name="__codelineno-9-21"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<p>借助 <code>styles.css</code> 中定义的 <code>board-row</code> 样式，我们将组件分到每一行的 <code>div</code> 中。最终完成了井字棋棋盘：</p>
<p><img alt="" src="https://zh-hans.react.dev/images/tutorial/number-filled-board.png" /></p>
<p>但是现在有个问题，名为 <code>Square</code> 的组件实际上不再是方块了。让我们通过将名称更改为 <code>Board</code> 来解决这个问题：</p>
<div class="language-jsx highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="k">export</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">Board</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a><span class="w">  </span><span class="c1">//...</span>
</span><span id="__span-10-3"><a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a><span class="p">}</span>
</span></code></pre></div>
<p><img alt="alt text" src="../../images/qs-04.png" /></p>
<p>此时你的代码应如下所示:</p>
<div class="language-jsx highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">App.js</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-11-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-11-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-11-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-11-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-11-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-11-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-11-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-11-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-11-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-11-10">10</a></span>
<span class="normal"><a href="#__codelineno-11-11">11</a></span>
<span class="normal"><a href="#__codelineno-11-12">12</a></span>
<span class="normal"><a href="#__codelineno-11-13">13</a></span>
<span class="normal"><a href="#__codelineno-11-14">14</a></span>
<span class="normal"><a href="#__codelineno-11-15">15</a></span>
<span class="normal"><a href="#__codelineno-11-16">16</a></span>
<span class="normal"><a href="#__codelineno-11-17">17</a></span>
<span class="normal"><a href="#__codelineno-11-18">18</a></span>
<span class="normal"><a href="#__codelineno-11-19">19</a></span>
<span class="normal"><a href="#__codelineno-11-20">20</a></span>
<span class="normal"><a href="#__codelineno-11-21">21</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1"></a><span class="k">export</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">Board</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-11-2"><a id="__codelineno-11-2" name="__codelineno-11-2"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-11-3"><a id="__codelineno-11-3" name="__codelineno-11-3"></a><span class="w">    </span><span class="p">&lt;&gt;</span>
</span><span id="__span-11-4"><a id="__codelineno-11-4" name="__codelineno-11-4"></a><span class="w">      </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;board-row&quot;</span><span class="p">&gt;</span>
</span><span id="__span-11-5"><a id="__codelineno-11-5" name="__codelineno-11-5"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">button</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;square&quot;</span><span class="p">&gt;</span><span class="mf">1</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span><span id="__span-11-6"><a id="__codelineno-11-6" name="__codelineno-11-6"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">button</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;square&quot;</span><span class="p">&gt;</span><span class="mf">2</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span><span id="__span-11-7"><a id="__codelineno-11-7" name="__codelineno-11-7"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">button</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;square&quot;</span><span class="p">&gt;</span><span class="mf">3</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span><span id="__span-11-8"><a id="__codelineno-11-8" name="__codelineno-11-8"></a><span class="w">      </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="__span-11-9"><a id="__codelineno-11-9" name="__codelineno-11-9"></a><span class="w">      </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;board-row&quot;</span><span class="p">&gt;</span>
</span><span id="__span-11-10"><a id="__codelineno-11-10" name="__codelineno-11-10"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">button</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;square&quot;</span><span class="p">&gt;</span><span class="mf">4</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span><span id="__span-11-11"><a id="__codelineno-11-11" name="__codelineno-11-11"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">button</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;square&quot;</span><span class="p">&gt;</span><span class="mf">5</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span><span id="__span-11-12"><a id="__codelineno-11-12" name="__codelineno-11-12"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">button</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;square&quot;</span><span class="p">&gt;</span><span class="mf">6</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span><span id="__span-11-13"><a id="__codelineno-11-13" name="__codelineno-11-13"></a><span class="w">      </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="__span-11-14"><a id="__codelineno-11-14" name="__codelineno-11-14"></a><span class="w">      </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;board-row&quot;</span><span class="p">&gt;</span>
</span><span id="__span-11-15"><a id="__codelineno-11-15" name="__codelineno-11-15"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">button</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;square&quot;</span><span class="p">&gt;</span><span class="mf">7</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span><span id="__span-11-16"><a id="__codelineno-11-16" name="__codelineno-11-16"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">button</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;square&quot;</span><span class="p">&gt;</span><span class="mf">8</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span><span id="__span-11-17"><a id="__codelineno-11-17" name="__codelineno-11-17"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">button</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;square&quot;</span><span class="p">&gt;</span><span class="mf">9</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span><span id="__span-11-18"><a id="__codelineno-11-18" name="__codelineno-11-18"></a><span class="w">      </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="__span-11-19"><a id="__codelineno-11-19" name="__codelineno-11-19"></a><span class="w">    </span><span class="p">&lt;/&gt;</span>
</span><span id="__span-11-20"><a id="__codelineno-11-20" name="__codelineno-11-20"></a><span class="w">  </span><span class="p">);</span>
</span><span id="__span-11-21"><a id="__codelineno-11-21" name="__codelineno-11-21"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<h3 id="23-props">2.3 通过 props 传递数据<a class="headerlink" href="#23-props" title="Permanent link">&para;</a></h3>
<p>接下来，当用户单击方块时，我们要将方块的值从空更改为“X”。根据目前构建的棋盘，你需要复制并粘贴九次更新方块的代码（每个方块都需要一次）！但是，React 的组件架构可以创建可重用的组件，以避免混乱、重复的代码。</p>
<p>首先，要将定义第一个方块（<code>&lt;button className="square"&gt;1&lt;/button&gt;</code>）的这行代码从 <code>Board</code> 组件复制到新的 <code>Square</code> 组件中：</p>
<div class="language-jsx highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-12-1">1</a></span>
<span class="normal"><a href="#__codelineno-12-2">2</a></span>
<span class="normal"><a href="#__codelineno-12-3">3</a></span>
<span class="normal"><a href="#__codelineno-12-4">4</a></span>
<span class="normal"><a href="#__codelineno-12-5">5</a></span>
<span class="normal"><a href="#__codelineno-12-6">6</a></span>
<span class="normal"><a href="#__codelineno-12-7">7</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1"></a><span class="hll"><span class="kd">function</span><span class="w"> </span><span class="nx">Square</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span></span><span id="__span-12-2"><a id="__codelineno-12-2" name="__codelineno-12-2"></a><span class="hll"><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">&lt;</span><span class="nt">button</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;square&quot;</span><span class="p">&gt;</span><span class="mf">1</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;;</span>
</span></span><span id="__span-12-3"><a id="__codelineno-12-3" name="__codelineno-12-3"></a><span class="hll"><span class="p">}</span>
</span></span><span id="__span-12-4"><a id="__codelineno-12-4" name="__codelineno-12-4"></a>
</span><span id="__span-12-5"><a id="__codelineno-12-5" name="__codelineno-12-5"></a><span class="k">export</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">Board</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-12-6"><a id="__codelineno-12-6" name="__codelineno-12-6"></a><span class="w">  </span><span class="c1">// ...</span>
</span><span id="__span-12-7"><a id="__codelineno-12-7" name="__codelineno-12-7"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<p>然后，更新 Board 组件并使用 JSX 语法渲染 <code>Square</code> 组件：</p>
<div class="language-jsx highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-13-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-13-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-13-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-13-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-13-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-13-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-13-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-13-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-13-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-13-10">10</a></span>
<span class="normal"><a href="#__codelineno-13-11">11</a></span>
<span class="normal"><a href="#__codelineno-13-12">12</a></span>
<span class="normal"><a href="#__codelineno-13-13">13</a></span>
<span class="normal"><a href="#__codelineno-13-14">14</a></span>
<span class="normal"><a href="#__codelineno-13-15">15</a></span>
<span class="normal"><a href="#__codelineno-13-16">16</a></span>
<span class="normal"><a href="#__codelineno-13-17">17</a></span>
<span class="normal"><a href="#__codelineno-13-18">18</a></span>
<span class="normal"><a href="#__codelineno-13-19">19</a></span>
<span class="normal"><a href="#__codelineno-13-20">20</a></span>
<span class="normal"><a href="#__codelineno-13-21">21</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1"></a><span class="k">export</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">Board</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-13-2"><a id="__codelineno-13-2" name="__codelineno-13-2"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-13-3"><a id="__codelineno-13-3" name="__codelineno-13-3"></a><span class="w">    </span><span class="p">&lt;&gt;</span>
</span><span id="__span-13-4"><a id="__codelineno-13-4" name="__codelineno-13-4"></a><span class="hll"><span class="w">      </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;board-row&quot;</span><span class="p">&gt;</span>
</span></span><span id="__span-13-5"><a id="__codelineno-13-5" name="__codelineno-13-5"></a><span class="hll"><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="p">/&gt;</span>
</span></span><span id="__span-13-6"><a id="__codelineno-13-6" name="__codelineno-13-6"></a><span class="hll"><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="p">/&gt;</span>
</span></span><span id="__span-13-7"><a id="__codelineno-13-7" name="__codelineno-13-7"></a><span class="hll"><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="p">/&gt;</span>
</span></span><span id="__span-13-8"><a id="__codelineno-13-8" name="__codelineno-13-8"></a><span class="hll"><span class="w">      </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span id="__span-13-9"><a id="__codelineno-13-9" name="__codelineno-13-9"></a><span class="hll"><span class="w">      </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;board-row&quot;</span><span class="p">&gt;</span>
</span></span><span id="__span-13-10"><a id="__codelineno-13-10" name="__codelineno-13-10"></a><span class="hll"><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="p">/&gt;</span>
</span></span><span id="__span-13-11"><a id="__codelineno-13-11" name="__codelineno-13-11"></a><span class="hll"><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="p">/&gt;</span>
</span></span><span id="__span-13-12"><a id="__codelineno-13-12" name="__codelineno-13-12"></a><span class="hll"><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="p">/&gt;</span>
</span></span><span id="__span-13-13"><a id="__codelineno-13-13" name="__codelineno-13-13"></a><span class="hll"><span class="w">      </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span id="__span-13-14"><a id="__codelineno-13-14" name="__codelineno-13-14"></a><span class="hll"><span class="w">      </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;board-row&quot;</span><span class="p">&gt;</span>
</span></span><span id="__span-13-15"><a id="__codelineno-13-15" name="__codelineno-13-15"></a><span class="hll"><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="p">/&gt;</span>
</span></span><span id="__span-13-16"><a id="__codelineno-13-16" name="__codelineno-13-16"></a><span class="hll"><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="p">/&gt;</span>
</span></span><span id="__span-13-17"><a id="__codelineno-13-17" name="__codelineno-13-17"></a><span class="hll"><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="p">/&gt;</span>
</span></span><span id="__span-13-18"><a id="__codelineno-13-18" name="__codelineno-13-18"></a><span class="hll"><span class="w">      </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span id="__span-13-19"><a id="__codelineno-13-19" name="__codelineno-13-19"></a><span class="w">    </span><span class="p">&lt;/&gt;</span>
</span><span id="__span-13-20"><a id="__codelineno-13-20" name="__codelineno-13-20"></a><span class="w">  </span><span class="p">);</span>
</span><span id="__span-13-21"><a id="__codelineno-13-21" name="__codelineno-13-21"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<p>需要注意的是，这并不像 <code>div</code>，这些你自己的组件如 <code>Board</code> 和 <code>Square</code>，必须以大写字母开头。</p>
<p>让我们来看一看效果：</p>
<p><img alt="" src="https://zh-hans.react.dev/images/tutorial/board-filled-with-ones.png" /></p>
<p>哦不！你失去了你以前有正确编号的方块。现在每个方块都写着“1”。要解决此问题，需要使用 <em>props</em> 将每个方块应有的值从父组件（<code>Board</code>）传递到其子组件（<code>Square</code>）。</p>
<p>更新 <code>Square</code> 组件，读取从 <code>Board</code> 传递的 <code>value</code> props：</p>
<div class="language-jsx highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-14-1">1</a></span>
<span class="normal"><a href="#__codelineno-14-2">2</a></span>
<span class="normal"><a href="#__codelineno-14-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1"></a><span class="kd">function</span><span class="w"> </span><span class="nx">Square</span><span class="p">({</span><span class="w"> </span><span class="nx">value</span><span class="w"> </span><span class="p">})</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-14-2"><a id="__codelineno-14-2" name="__codelineno-14-2"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">&lt;</span><span class="nt">button</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;square&quot;</span><span class="p">&gt;</span><span class="mf">1</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;;</span>
</span><span id="__span-14-3"><a id="__codelineno-14-3" name="__codelineno-14-3"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<p><code>function Square({ value })</code> 表示可以向 Square 组件传递一个名为 <code>value</code> 的 props。现在你如果想要显示对应的 <code>value</code> 而不是 <code>1</code>，可以试一下像下面这样：</p>
<div class="language-jsx highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-15-1">1</a></span>
<span class="normal"><a href="#__codelineno-15-2">2</a></span>
<span class="normal"><a href="#__codelineno-15-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1"></a><span class="kd">function</span><span class="w"> </span><span class="nx">Square</span><span class="p">({</span><span class="w"> </span><span class="nx">value</span><span class="w"> </span><span class="p">})</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-15-2"><a id="__codelineno-15-2" name="__codelineno-15-2"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">&lt;</span><span class="nt">button</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;square&quot;</span><span class="p">&gt;</span><span class="nx">value</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;;</span>
</span><span id="__span-15-3"><a id="__codelineno-15-3" name="__codelineno-15-3"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<p>糟糕！这还不是你想要的：</p>
<p><img alt="" src="https://zh-hans.react.dev/images/tutorial/board-filled-with-value.png" /></p>
<p>我们需要从组件中渲染名为 <code>value</code> 的 JavaScript 变量，而不是“value”这个词。要从 JSX“转义到 JavaScript”，你需要使用大括号。在 JSX 中的 <code>value</code> 周围添加大括号，如下所示：</p>
<p>现在，你应该会看到一个空的棋盘了：</p>
<p><img alt="" src="https://zh-hans.react.dev/images/tutorial/empty-board.png" /></p>
<p>这是因为 <code>Board</code> 组件还没有将 <code>value</code> props 传递给它渲染的每个 <code>Square</code> 组件。要修复这个问题，需要向 <code>Board</code> 组件里面的每个 <code>Square</code> 组件添加 <code>value</code> props：</p>
<p>现在你应该能再次看到数字网格：</p>
<p><img alt="" src="https://zh-hans.react.dev/images/tutorial/number-filled-board.png" /></p>
<p>更新后的代码应该是这样：</p>
<div class="language-jsx highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">App.js</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-16-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-16-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-16-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-16-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-16-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-16-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-16-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-16-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-16-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-16-10">10</a></span>
<span class="normal"><a href="#__codelineno-16-11">11</a></span>
<span class="normal"><a href="#__codelineno-16-12">12</a></span>
<span class="normal"><a href="#__codelineno-16-13">13</a></span>
<span class="normal"><a href="#__codelineno-16-14">14</a></span>
<span class="normal"><a href="#__codelineno-16-15">15</a></span>
<span class="normal"><a href="#__codelineno-16-16">16</a></span>
<span class="normal"><a href="#__codelineno-16-17">17</a></span>
<span class="normal"><a href="#__codelineno-16-18">18</a></span>
<span class="normal"><a href="#__codelineno-16-19">19</a></span>
<span class="normal"><a href="#__codelineno-16-20">20</a></span>
<span class="normal"><a href="#__codelineno-16-21">21</a></span>
<span class="normal"><a href="#__codelineno-16-22">22</a></span>
<span class="normal"><a href="#__codelineno-16-23">23</a></span>
<span class="normal"><a href="#__codelineno-16-24">24</a></span>
<span class="normal"><a href="#__codelineno-16-25">25</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-16-1"><a id="__codelineno-16-1" name="__codelineno-16-1"></a><span class="kd">function</span><span class="w"> </span><span class="nx">Square</span><span class="p">({</span><span class="w"> </span><span class="nx">value</span><span class="w"> </span><span class="p">})</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-16-2"><a id="__codelineno-16-2" name="__codelineno-16-2"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">&lt;</span><span class="nt">button</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;square&quot;</span><span class="p">&gt;{</span><span class="nx">value</span><span class="p">}&lt;/</span><span class="nt">button</span><span class="p">&gt;;</span>
</span><span id="__span-16-3"><a id="__codelineno-16-3" name="__codelineno-16-3"></a><span class="p">}</span>
</span><span id="__span-16-4"><a id="__codelineno-16-4" name="__codelineno-16-4"></a>
</span><span id="__span-16-5"><a id="__codelineno-16-5" name="__codelineno-16-5"></a><span class="k">export</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">Board</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-16-6"><a id="__codelineno-16-6" name="__codelineno-16-6"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-16-7"><a id="__codelineno-16-7" name="__codelineno-16-7"></a><span class="w">    </span><span class="p">&lt;&gt;</span>
</span><span id="__span-16-8"><a id="__codelineno-16-8" name="__codelineno-16-8"></a><span class="w">      </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;board-row&quot;</span><span class="p">&gt;</span>
</span><span id="__span-16-9"><a id="__codelineno-16-9" name="__codelineno-16-9"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="s">&quot;1&quot;</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-16-10"><a id="__codelineno-16-10" name="__codelineno-16-10"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="s">&quot;2&quot;</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-16-11"><a id="__codelineno-16-11" name="__codelineno-16-11"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="s">&quot;3&quot;</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-16-12"><a id="__codelineno-16-12" name="__codelineno-16-12"></a><span class="w">      </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="__span-16-13"><a id="__codelineno-16-13" name="__codelineno-16-13"></a><span class="w">      </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;board-row&quot;</span><span class="p">&gt;</span>
</span><span id="__span-16-14"><a id="__codelineno-16-14" name="__codelineno-16-14"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="s">&quot;4&quot;</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-16-15"><a id="__codelineno-16-15" name="__codelineno-16-15"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="s">&quot;5&quot;</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-16-16"><a id="__codelineno-16-16" name="__codelineno-16-16"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="s">&quot;6&quot;</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-16-17"><a id="__codelineno-16-17" name="__codelineno-16-17"></a><span class="w">      </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="__span-16-18"><a id="__codelineno-16-18" name="__codelineno-16-18"></a><span class="w">      </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;board-row&quot;</span><span class="p">&gt;</span>
</span><span id="__span-16-19"><a id="__codelineno-16-19" name="__codelineno-16-19"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="s">&quot;7&quot;</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-16-20"><a id="__codelineno-16-20" name="__codelineno-16-20"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="s">&quot;8&quot;</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-16-21"><a id="__codelineno-16-21" name="__codelineno-16-21"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="s">&quot;9&quot;</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-16-22"><a id="__codelineno-16-22" name="__codelineno-16-22"></a><span class="w">      </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="__span-16-23"><a id="__codelineno-16-23" name="__codelineno-16-23"></a><span class="w">    </span><span class="p">&lt;/&gt;</span>
</span><span id="__span-16-24"><a id="__codelineno-16-24" name="__codelineno-16-24"></a><span class="w">  </span><span class="p">);</span>
</span><span id="__span-16-25"><a id="__codelineno-16-25" name="__codelineno-16-25"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<h3 id="24">2.4 创建一个具有交互性的组件<a class="headerlink" href="#24" title="Permanent link">&para;</a></h3>
<p>当你单击它的时候，<code>Square</code> 组件需要显示“X”。在 <code>Square</code> 内部声明一个名为 <code>handleClick</code> 的函数。然后，将 <code>onClick</code> 添加到由 <code>Square</code> 返回的 JSX 元素的 button 的 props 中：</p>
<div class="language-jsx highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-17-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-17-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-17-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-17-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-17-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-17-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-17-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-17-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-17-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-17-10">10</a></span>
<span class="normal"><a href="#__codelineno-17-11">11</a></span>
<span class="normal"><a href="#__codelineno-17-12">12</a></span>
<span class="normal"><a href="#__codelineno-17-13">13</a></span>
<span class="normal"><a href="#__codelineno-17-14">14</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-17-1"><a id="__codelineno-17-1" name="__codelineno-17-1"></a><span class="kd">function</span><span class="w"> </span><span class="nx">Square</span><span class="p">({</span><span class="w"> </span><span class="nx">value</span><span class="w"> </span><span class="p">})</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-17-2"><a id="__codelineno-17-2" name="__codelineno-17-2"></a><span class="hll"><span class="w">  </span><span class="kd">function</span><span class="w"> </span><span class="nx">handleClick</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span></span><span id="__span-17-3"><a id="__codelineno-17-3" name="__codelineno-17-3"></a><span class="hll"><span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;clicked!&#39;</span><span class="p">);</span>
</span></span><span id="__span-17-4"><a id="__codelineno-17-4" name="__codelineno-17-4"></a><span class="hll"><span class="w">  </span><span class="p">}</span>
</span></span><span id="__span-17-5"><a id="__codelineno-17-5" name="__codelineno-17-5"></a>
</span><span id="__span-17-6"><a id="__codelineno-17-6" name="__codelineno-17-6"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-17-7"><a id="__codelineno-17-7" name="__codelineno-17-7"></a><span class="w">    </span><span class="p">&lt;</span><span class="nt">button</span>
</span><span id="__span-17-8"><a id="__codelineno-17-8" name="__codelineno-17-8"></a><span class="w">      </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;square&quot;</span>
</span><span id="__span-17-9"><a id="__codelineno-17-9" name="__codelineno-17-9"></a><span class="hll"><span class="w">      </span><span class="na">onClick</span><span class="o">=</span><span class="p">{</span><span class="nx">handleClick</span><span class="p">}</span>
</span></span><span id="__span-17-10"><a id="__codelineno-17-10" name="__codelineno-17-10"></a><span class="w">    </span><span class="p">&gt;</span>
</span><span id="__span-17-11"><a id="__codelineno-17-11" name="__codelineno-17-11"></a><span class="w">      </span><span class="p">{</span><span class="nx">value</span><span class="p">}</span>
</span><span id="__span-17-12"><a id="__codelineno-17-12" name="__codelineno-17-12"></a><span class="w">    </span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span><span id="__span-17-13"><a id="__codelineno-17-13" name="__codelineno-17-13"></a><span class="w">  </span><span class="p">);</span>
</span><span id="__span-17-14"><a id="__codelineno-17-14" name="__codelineno-17-14"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<p>如果现在单击一个方块，你应该会看到一条日志，上面写着 <code>"clicked!"</code>。在 CodeSandbox 中 <em>Browser</em> 部分底部的 <em>Console</em> 选项卡中。多次单击方块将再次记录 <code>"clicked!"</code>。具有相同消息的重复控制台日志不会在控制台中重复创建。而你会在第一次 <code>"clicked!"</code> 旁边看到一个递增的计数器。</p>
<div class="admonition warning">
<p class="admonition-title">备注</p>
<p>如果使用本地开发环境学习本教程，则需要打开浏览器的控制台。例如，如果使用 Chrome 浏览器，则可以使用键盘快捷键 Shift + Ctrl + J（在 Windows/Linux 上）或 Option + ⌘ + J（在 macOS 上）查看控制台。</p>
</div>
<p>下一步，我们希望 Square 组件能够“记住”它被单击过，并用“X”填充它。为了“记住”一些东西，组件使用 <em>state</em>。</p>
<p>React 提供了一个名为 <code>useState</code> 的特殊函数，可以从组件中调用它来让它“记住”一些东西。让我们将 <code>Square</code> 的当前值存储在 state 中，并在单击 <code>Square</code> 时更改它。</p>
<p>在文件的顶部导入 <code>useState</code>。从 <code>Square</code> 组件中移除 <code>value</code> props。在调用 <code>useState</code> 的 <code>Square</code> 的开头添加一个新行。让它返回一个名为 value 的 state 变量：</p>
<div class="language-jsx highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-18-1">1</a></span>
<span class="normal"><a href="#__codelineno-18-2">2</a></span>
<span class="normal"><a href="#__codelineno-18-3">3</a></span>
<span class="normal"><a href="#__codelineno-18-4">4</a></span>
<span class="normal"><a href="#__codelineno-18-5">5</a></span>
<span class="normal"><a href="#__codelineno-18-6">6</a></span>
<span class="normal"><a href="#__codelineno-18-7">7</a></span>
<span class="normal"><a href="#__codelineno-18-8">8</a></span>
<span class="normal"><a href="#__codelineno-18-9">9</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-18-1"><a id="__codelineno-18-1" name="__codelineno-18-1"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">useState</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;react&#39;</span><span class="p">;</span>
</span><span id="__span-18-2"><a id="__codelineno-18-2" name="__codelineno-18-2"></a>
</span><span id="__span-18-3"><a id="__codelineno-18-3" name="__codelineno-18-3"></a><span class="kd">function</span><span class="w"> </span><span class="nx">Square</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-18-4"><a id="__codelineno-18-4" name="__codelineno-18-4"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">value</span><span class="p">,</span><span class="w"> </span><span class="nx">setValue</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useState</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
</span><span id="__span-18-5"><a id="__codelineno-18-5" name="__codelineno-18-5"></a>
</span><span id="__span-18-6"><a id="__codelineno-18-6" name="__codelineno-18-6"></a><span class="w">  </span><span class="kd">function</span><span class="w"> </span><span class="nx">handleClick</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-18-7"><a id="__codelineno-18-7" name="__codelineno-18-7"></a><span class="w">    </span><span class="c1">//...</span>
</span><span id="__span-18-8"><a id="__codelineno-18-8" name="__codelineno-18-8"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-18-9"><a id="__codelineno-18-9" name="__codelineno-18-9"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<p><code>value</code> 存储值，而 <code>setValue</code> 是可用于更改值的函数。传递给 <code>useState</code> 的 <code>null</code> 用作这个 state 变量的初始值，因此此处 <code>value</code> 的值开始时等于 <code>null</code>。</p>
<p>由于 <code>Square</code> 组件不再接受 props，我们从 Board 组件创建的所有九个 Square 组件中删除 <code>value</code> props：</p>
<div class="language-jsx highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-19-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-19-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-19-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-19-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-19-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-19-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-19-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-19-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-19-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-19-10">10</a></span>
<span class="normal"><a href="#__codelineno-19-11">11</a></span>
<span class="normal"><a href="#__codelineno-19-12">12</a></span>
<span class="normal"><a href="#__codelineno-19-13">13</a></span>
<span class="normal"><a href="#__codelineno-19-14">14</a></span>
<span class="normal"><a href="#__codelineno-19-15">15</a></span>
<span class="normal"><a href="#__codelineno-19-16">16</a></span>
<span class="normal"><a href="#__codelineno-19-17">17</a></span>
<span class="normal"><a href="#__codelineno-19-18">18</a></span>
<span class="normal"><a href="#__codelineno-19-19">19</a></span>
<span class="normal"><a href="#__codelineno-19-20">20</a></span>
<span class="normal"><a href="#__codelineno-19-21">21</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-19-1"><a id="__codelineno-19-1" name="__codelineno-19-1"></a><span class="k">export</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">Board</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-19-2"><a id="__codelineno-19-2" name="__codelineno-19-2"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-19-3"><a id="__codelineno-19-3" name="__codelineno-19-3"></a><span class="w">    </span><span class="p">&lt;&gt;</span>
</span><span id="__span-19-4"><a id="__codelineno-19-4" name="__codelineno-19-4"></a><span class="w">      </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;board-row&quot;</span><span class="p">&gt;</span>
</span><span id="__span-19-5"><a id="__codelineno-19-5" name="__codelineno-19-5"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-19-6"><a id="__codelineno-19-6" name="__codelineno-19-6"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-19-7"><a id="__codelineno-19-7" name="__codelineno-19-7"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-19-8"><a id="__codelineno-19-8" name="__codelineno-19-8"></a><span class="w">      </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="__span-19-9"><a id="__codelineno-19-9" name="__codelineno-19-9"></a><span class="w">      </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;board-row&quot;</span><span class="p">&gt;</span>
</span><span id="__span-19-10"><a id="__codelineno-19-10" name="__codelineno-19-10"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-19-11"><a id="__codelineno-19-11" name="__codelineno-19-11"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-19-12"><a id="__codelineno-19-12" name="__codelineno-19-12"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-19-13"><a id="__codelineno-19-13" name="__codelineno-19-13"></a><span class="w">      </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="__span-19-14"><a id="__codelineno-19-14" name="__codelineno-19-14"></a><span class="w">      </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;board-row&quot;</span><span class="p">&gt;</span>
</span><span id="__span-19-15"><a id="__codelineno-19-15" name="__codelineno-19-15"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-19-16"><a id="__codelineno-19-16" name="__codelineno-19-16"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-19-17"><a id="__codelineno-19-17" name="__codelineno-19-17"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-19-18"><a id="__codelineno-19-18" name="__codelineno-19-18"></a><span class="w">      </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="__span-19-19"><a id="__codelineno-19-19" name="__codelineno-19-19"></a><span class="w">    </span><span class="p">&lt;/&gt;</span>
</span><span id="__span-19-20"><a id="__codelineno-19-20" name="__codelineno-19-20"></a><span class="w">  </span><span class="p">);</span>
</span><span id="__span-19-21"><a id="__codelineno-19-21" name="__codelineno-19-21"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<p>现在将更改 <code>Square</code> 以在单击时显示“X”。不再使用 <code>console.log("clicked!");</code> 而使用 <code>setValue('X');</code> 的事件处理程序。现在你的 <code>Square</code> 组件看起来像这样：</p>
<div class="language-jsx highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-20-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-20-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-20-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-20-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-20-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-20-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-20-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-20-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-20-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-20-10">10</a></span>
<span class="normal"><a href="#__codelineno-20-11">11</a></span>
<span class="normal"><a href="#__codelineno-20-12">12</a></span>
<span class="normal"><a href="#__codelineno-20-13">13</a></span>
<span class="normal"><a href="#__codelineno-20-14">14</a></span>
<span class="normal"><a href="#__codelineno-20-15">15</a></span>
<span class="normal"><a href="#__codelineno-20-16">16</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-20-1"><a id="__codelineno-20-1" name="__codelineno-20-1"></a><span class="kd">function</span><span class="w"> </span><span class="nx">Square</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-20-2"><a id="__codelineno-20-2" name="__codelineno-20-2"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">value</span><span class="p">,</span><span class="w"> </span><span class="nx">setValue</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useState</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
</span><span id="__span-20-3"><a id="__codelineno-20-3" name="__codelineno-20-3"></a>
</span><span id="__span-20-4"><a id="__codelineno-20-4" name="__codelineno-20-4"></a><span class="w">  </span><span class="kd">function</span><span class="w"> </span><span class="nx">handleClick</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-20-5"><a id="__codelineno-20-5" name="__codelineno-20-5"></a><span class="w">    </span><span class="nx">setValue</span><span class="p">(</span><span class="s1">&#39;X&#39;</span><span class="p">);</span>
</span><span id="__span-20-6"><a id="__codelineno-20-6" name="__codelineno-20-6"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-20-7"><a id="__codelineno-20-7" name="__codelineno-20-7"></a>
</span><span id="__span-20-8"><a id="__codelineno-20-8" name="__codelineno-20-8"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-20-9"><a id="__codelineno-20-9" name="__codelineno-20-9"></a><span class="w">    </span><span class="p">&lt;</span><span class="nt">button</span>
</span><span id="__span-20-10"><a id="__codelineno-20-10" name="__codelineno-20-10"></a><span class="w">      </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;square&quot;</span>
</span><span id="__span-20-11"><a id="__codelineno-20-11" name="__codelineno-20-11"></a><span class="w">      </span><span class="na">onClick</span><span class="o">=</span><span class="p">{</span><span class="nx">handleClick</span><span class="p">}</span>
</span><span id="__span-20-12"><a id="__codelineno-20-12" name="__codelineno-20-12"></a><span class="w">    </span><span class="p">&gt;</span>
</span><span id="__span-20-13"><a id="__codelineno-20-13" name="__codelineno-20-13"></a><span class="w">      </span><span class="p">{</span><span class="nx">value</span><span class="p">}</span>
</span><span id="__span-20-14"><a id="__codelineno-20-14" name="__codelineno-20-14"></a><span class="w">    </span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span><span id="__span-20-15"><a id="__codelineno-20-15" name="__codelineno-20-15"></a><span class="w">  </span><span class="p">);</span>
</span><span id="__span-20-16"><a id="__codelineno-20-16" name="__codelineno-20-16"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<p>通过从 <code>onClick</code> 处理程序调用此 <code>set</code> 函数，你告诉 <code>React</code> 在单击其 <code>&lt;button&gt;</code> 时要重新渲染该 <code>Square</code>。更新后，方块的值将为“X”，因此会在棋盘上看到“X”。点击任意方块，“X”应该出现：</p>
<p><img alt="" src="https://zh-hans.react.dev/images/tutorial/tictac-adding-x-s.gif" /></p>
<p>每个 Square 都有自己的 state：存储在每个 Square 中的 <code>value</code> 完全独立于其他的 Square。当你在组件中调用 set 函数时，React 也会自动更新内部的子组件。</p>
<p>完成上述更改后，代码将如下所示：</p>
<div class="language-jsx highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">App.js</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-21-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-21-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-21-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-21-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-21-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-21-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-21-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-21-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-21-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-21-10">10</a></span>
<span class="normal"><a href="#__codelineno-21-11">11</a></span>
<span class="normal"><a href="#__codelineno-21-12">12</a></span>
<span class="normal"><a href="#__codelineno-21-13">13</a></span>
<span class="normal"><a href="#__codelineno-21-14">14</a></span>
<span class="normal"><a href="#__codelineno-21-15">15</a></span>
<span class="normal"><a href="#__codelineno-21-16">16</a></span>
<span class="normal"><a href="#__codelineno-21-17">17</a></span>
<span class="normal"><a href="#__codelineno-21-18">18</a></span>
<span class="normal"><a href="#__codelineno-21-19">19</a></span>
<span class="normal"><a href="#__codelineno-21-20">20</a></span>
<span class="normal"><a href="#__codelineno-21-21">21</a></span>
<span class="normal"><a href="#__codelineno-21-22">22</a></span>
<span class="normal"><a href="#__codelineno-21-23">23</a></span>
<span class="normal"><a href="#__codelineno-21-24">24</a></span>
<span class="normal"><a href="#__codelineno-21-25">25</a></span>
<span class="normal"><a href="#__codelineno-21-26">26</a></span>
<span class="normal"><a href="#__codelineno-21-27">27</a></span>
<span class="normal"><a href="#__codelineno-21-28">28</a></span>
<span class="normal"><a href="#__codelineno-21-29">29</a></span>
<span class="normal"><a href="#__codelineno-21-30">30</a></span>
<span class="normal"><a href="#__codelineno-21-31">31</a></span>
<span class="normal"><a href="#__codelineno-21-32">32</a></span>
<span class="normal"><a href="#__codelineno-21-33">33</a></span>
<span class="normal"><a href="#__codelineno-21-34">34</a></span>
<span class="normal"><a href="#__codelineno-21-35">35</a></span>
<span class="normal"><a href="#__codelineno-21-36">36</a></span>
<span class="normal"><a href="#__codelineno-21-37">37</a></span>
<span class="normal"><a href="#__codelineno-21-38">38</a></span>
<span class="normal"><a href="#__codelineno-21-39">39</a></span>
<span class="normal"><a href="#__codelineno-21-40">40</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-21-1"><a id="__codelineno-21-1" name="__codelineno-21-1"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">useState</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;react&#39;</span><span class="p">;</span>
</span><span id="__span-21-2"><a id="__codelineno-21-2" name="__codelineno-21-2"></a>
</span><span id="__span-21-3"><a id="__codelineno-21-3" name="__codelineno-21-3"></a><span class="kd">function</span><span class="w"> </span><span class="nx">Square</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-21-4"><a id="__codelineno-21-4" name="__codelineno-21-4"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">value</span><span class="p">,</span><span class="w"> </span><span class="nx">setValue</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useState</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
</span><span id="__span-21-5"><a id="__codelineno-21-5" name="__codelineno-21-5"></a>
</span><span id="__span-21-6"><a id="__codelineno-21-6" name="__codelineno-21-6"></a><span class="w">  </span><span class="kd">function</span><span class="w"> </span><span class="nx">handleClick</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-21-7"><a id="__codelineno-21-7" name="__codelineno-21-7"></a><span class="w">    </span><span class="nx">setValue</span><span class="p">(</span><span class="s1">&#39;X&#39;</span><span class="p">);</span>
</span><span id="__span-21-8"><a id="__codelineno-21-8" name="__codelineno-21-8"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-21-9"><a id="__codelineno-21-9" name="__codelineno-21-9"></a>
</span><span id="__span-21-10"><a id="__codelineno-21-10" name="__codelineno-21-10"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-21-11"><a id="__codelineno-21-11" name="__codelineno-21-11"></a><span class="w">    </span><span class="p">&lt;</span><span class="nt">button</span>
</span><span id="__span-21-12"><a id="__codelineno-21-12" name="__codelineno-21-12"></a><span class="w">      </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;square&quot;</span>
</span><span id="__span-21-13"><a id="__codelineno-21-13" name="__codelineno-21-13"></a><span class="w">      </span><span class="na">onClick</span><span class="o">=</span><span class="p">{</span><span class="nx">handleClick</span><span class="p">}</span>
</span><span id="__span-21-14"><a id="__codelineno-21-14" name="__codelineno-21-14"></a><span class="w">    </span><span class="p">&gt;</span>
</span><span id="__span-21-15"><a id="__codelineno-21-15" name="__codelineno-21-15"></a><span class="w">      </span><span class="p">{</span><span class="nx">value</span><span class="p">}</span>
</span><span id="__span-21-16"><a id="__codelineno-21-16" name="__codelineno-21-16"></a><span class="w">    </span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span><span id="__span-21-17"><a id="__codelineno-21-17" name="__codelineno-21-17"></a><span class="w">  </span><span class="p">);</span>
</span><span id="__span-21-18"><a id="__codelineno-21-18" name="__codelineno-21-18"></a><span class="p">}</span>
</span><span id="__span-21-19"><a id="__codelineno-21-19" name="__codelineno-21-19"></a>
</span><span id="__span-21-20"><a id="__codelineno-21-20" name="__codelineno-21-20"></a><span class="k">export</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">Board</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-21-21"><a id="__codelineno-21-21" name="__codelineno-21-21"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-21-22"><a id="__codelineno-21-22" name="__codelineno-21-22"></a><span class="w">    </span><span class="p">&lt;&gt;</span>
</span><span id="__span-21-23"><a id="__codelineno-21-23" name="__codelineno-21-23"></a><span class="w">      </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;board-row&quot;</span><span class="p">&gt;</span>
</span><span id="__span-21-24"><a id="__codelineno-21-24" name="__codelineno-21-24"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-21-25"><a id="__codelineno-21-25" name="__codelineno-21-25"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-21-26"><a id="__codelineno-21-26" name="__codelineno-21-26"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-21-27"><a id="__codelineno-21-27" name="__codelineno-21-27"></a><span class="w">      </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="__span-21-28"><a id="__codelineno-21-28" name="__codelineno-21-28"></a><span class="w">      </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;board-row&quot;</span><span class="p">&gt;</span>
</span><span id="__span-21-29"><a id="__codelineno-21-29" name="__codelineno-21-29"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-21-30"><a id="__codelineno-21-30" name="__codelineno-21-30"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-21-31"><a id="__codelineno-21-31" name="__codelineno-21-31"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-21-32"><a id="__codelineno-21-32" name="__codelineno-21-32"></a><span class="w">      </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="__span-21-33"><a id="__codelineno-21-33" name="__codelineno-21-33"></a><span class="w">      </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;board-row&quot;</span><span class="p">&gt;</span>
</span><span id="__span-21-34"><a id="__codelineno-21-34" name="__codelineno-21-34"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-21-35"><a id="__codelineno-21-35" name="__codelineno-21-35"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-21-36"><a id="__codelineno-21-36" name="__codelineno-21-36"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-21-37"><a id="__codelineno-21-37" name="__codelineno-21-37"></a><span class="w">      </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="__span-21-38"><a id="__codelineno-21-38" name="__codelineno-21-38"></a><span class="w">    </span><span class="p">&lt;/&gt;</span>
</span><span id="__span-21-39"><a id="__codelineno-21-39" name="__codelineno-21-39"></a><span class="w">  </span><span class="p">);</span>
</span><span id="__span-21-40"><a id="__codelineno-21-40" name="__codelineno-21-40"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<h3 id="25-react">2.5 React 开发者工具<a class="headerlink" href="#25-react" title="Permanent link">&para;</a></h3>
<p>React 开发者工具可以检查 React 组件的 props 和 state。可以在 CodeSandbox 的 <em>Browser</em> 部分底部找到 React DevTools 选项卡</p>
<p><img alt="" src="https://zh-hans.react.dev/images/tutorial/codesandbox-devtools.png" /></p>
<p>要检查屏幕上的特定组件，请使用 React 开发者工具左上角的按钮：</p>
<p><img alt="" src="https://zh-hans.react.dev/images/tutorial/devtools-select.gif" /></p>
<p>!!! "注意"</p>
<div class="language-text highlight"><pre><span></span><code>对于本地开发，React 开发工具可作为 Chrome、Firefox 和 Edge 的浏览器扩展来使用。安装它，Component 选项卡将出现在你的浏览器开发者工具中，将被用于使用 React 的站点。
</code></pre></div>
<h2 id="3">3. 完成这个游戏<a class="headerlink" href="#3" title="Permanent link">&para;</a></h2>
<p>至此，你已经拥有井字棋游戏的所有基本构建块。要玩完整的游戏，你现在需要在棋盘上交替放置“X”和“O”，并且你需要一种确定获胜者的方法。</p>
<h3 id="31">3.1 状态提升<a class="headerlink" href="#31" title="Permanent link">&para;</a></h3>
<p>目前，每个 <code>Square</code> 组件都维护着游戏 state 的一部分。要检查井字棋游戏中的赢家，<code>Board</code> 需要以某种方式知道 9 个 <code>Square</code> 组件中每个组件的 state。</p>
<p>你会如何处理？起初，你可能会猜测 <code>Board</code> 需要向每个 <code>Square</code>“询问”<code>Square</code> 的 state。尽管这种方法在 React 中在技术上是可行的，但我们不鼓励这样做，因为代码变得难以理解、容易出现错误并且难以重构。相反，最好的方法是将游戏的 state 存储在 <code>Board</code> 父组件中，而不是每个 <code>Square</code> 中。<code>Board</code> 组件可以通过传递一个 props 来告诉每个 <code>Square</code> 显示什么，就像你将数字传递给每个 Square 时所做的那样。</p>
<p><strong>要从多个子组件收集数据，或让两个子组件相互通信，请改为在其父组件中声明共享 state。父组件可以通过 props 将该 state 传回给子组件。这使子组件彼此同步并与其父组件保持同步。</strong></p>
<p>重构 React 组件时，将状态提升到父组件中很常见。</p>
<p>让我们借此机会尝试一下。编辑 <code>Board</code> 组件，使其声明一个名为 <code>squares</code> 的 state 变量，该变量默认为对应于 9 个方块的 9 个空值数组：</p>
<div class="language-jsx highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-22-1">1</a></span>
<span class="normal"><a href="#__codelineno-22-2">2</a></span>
<span class="normal"><a href="#__codelineno-22-3">3</a></span>
<span class="normal"><a href="#__codelineno-22-4">4</a></span>
<span class="normal"><a href="#__codelineno-22-5">5</a></span>
<span class="normal"><a href="#__codelineno-22-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-22-1"><a id="__codelineno-22-1" name="__codelineno-22-1"></a><span class="k">export</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">Board</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-22-2"><a id="__codelineno-22-2" name="__codelineno-22-2"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">squares</span><span class="p">,</span><span class="w"> </span><span class="nx">setSquares</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useState</span><span class="p">(</span><span class="nb">Array</span><span class="p">(</span><span class="mf">9</span><span class="p">).</span><span class="nx">fill</span><span class="p">(</span><span class="kc">null</span><span class="p">));</span>
</span><span id="__span-22-3"><a id="__codelineno-22-3" name="__codelineno-22-3"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-22-4"><a id="__codelineno-22-4" name="__codelineno-22-4"></a><span class="w">    </span><span class="c1">// ...</span>
</span><span id="__span-22-5"><a id="__codelineno-22-5" name="__codelineno-22-5"></a><span class="w">  </span><span class="p">);</span>
</span><span id="__span-22-6"><a id="__codelineno-22-6" name="__codelineno-22-6"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<p><code>Array(9).fill(null)</code> 创建了一个包含九个元素的数组，并将它们中的每一个都设置为 <code>null</code>。包裹它的 <code>useState()</code> 声明了一个初始设置为该数组的 <code>squares</code> state 变量。数组中的每个元素对应于一个 square 的值。当你稍后填写棋盘时，<code>squares</code> 数组将如下所示：</p>
<div class="language-jsx highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-23-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-23-1"><a id="__codelineno-23-1" name="__codelineno-23-1"></a><span class="p">[</span><span class="s1">&#39;O&#39;</span><span class="p">,</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;X&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;X&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;X&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;O&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;O&#39;</span><span class="p">,</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="kc">null</span><span class="p">]</span>
</span></code></pre></div></td></tr></table></div>
<p>现在你的 <code>Board</code> 组件需要将 <code>value</code> props 向下传递给它渲染的每个 <code>Square</code>：</p>
<div class="language-jsx highlight"><pre><span></span><code><span id="__span-24-1"><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a><span class="k">export</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">Board</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-24-2"><a id="__codelineno-24-2" name="__codelineno-24-2" href="#__codelineno-24-2"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">squares</span><span class="p">,</span><span class="w"> </span><span class="nx">setSquares</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useState</span><span class="p">(</span><span class="nb">Array</span><span class="p">(</span><span class="mf">9</span><span class="p">).</span><span class="nx">fill</span><span class="p">(</span><span class="kc">null</span><span class="p">));</span>
</span><span id="__span-24-3"><a id="__codelineno-24-3" name="__codelineno-24-3" href="#__codelineno-24-3"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-24-4"><a id="__codelineno-24-4" name="__codelineno-24-4" href="#__codelineno-24-4"></a><span class="w">    </span><span class="p">&lt;&gt;</span>
</span><span id="__span-24-5"><a id="__codelineno-24-5" name="__codelineno-24-5" href="#__codelineno-24-5"></a><span class="w">      </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;board-row&quot;</span><span class="p">&gt;</span>
</span><span id="__span-24-6"><a id="__codelineno-24-6" name="__codelineno-24-6" href="#__codelineno-24-6"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">squares</span><span class="p">[</span><span class="mf">0</span><span class="p">]}</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-24-7"><a id="__codelineno-24-7" name="__codelineno-24-7" href="#__codelineno-24-7"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">squares</span><span class="p">[</span><span class="mf">1</span><span class="p">]}</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-24-8"><a id="__codelineno-24-8" name="__codelineno-24-8" href="#__codelineno-24-8"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">squares</span><span class="p">[</span><span class="mf">2</span><span class="p">]}</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-24-9"><a id="__codelineno-24-9" name="__codelineno-24-9" href="#__codelineno-24-9"></a><span class="w">      </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="__span-24-10"><a id="__codelineno-24-10" name="__codelineno-24-10" href="#__codelineno-24-10"></a><span class="w">      </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;board-row&quot;</span><span class="p">&gt;</span>
</span><span id="__span-24-11"><a id="__codelineno-24-11" name="__codelineno-24-11" href="#__codelineno-24-11"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">squares</span><span class="p">[</span><span class="mf">3</span><span class="p">]}</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-24-12"><a id="__codelineno-24-12" name="__codelineno-24-12" href="#__codelineno-24-12"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">squares</span><span class="p">[</span><span class="mf">4</span><span class="p">]}</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-24-13"><a id="__codelineno-24-13" name="__codelineno-24-13" href="#__codelineno-24-13"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">squares</span><span class="p">[</span><span class="mf">5</span><span class="p">]}</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-24-14"><a id="__codelineno-24-14" name="__codelineno-24-14" href="#__codelineno-24-14"></a><span class="w">      </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="__span-24-15"><a id="__codelineno-24-15" name="__codelineno-24-15" href="#__codelineno-24-15"></a><span class="w">      </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;board-row&quot;</span><span class="p">&gt;</span>
</span><span id="__span-24-16"><a id="__codelineno-24-16" name="__codelineno-24-16" href="#__codelineno-24-16"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">squares</span><span class="p">[</span><span class="mf">6</span><span class="p">]}</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-24-17"><a id="__codelineno-24-17" name="__codelineno-24-17" href="#__codelineno-24-17"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">squares</span><span class="p">[</span><span class="mf">7</span><span class="p">]}</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-24-18"><a id="__codelineno-24-18" name="__codelineno-24-18" href="#__codelineno-24-18"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">squares</span><span class="p">[</span><span class="mf">8</span><span class="p">]}</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-24-19"><a id="__codelineno-24-19" name="__codelineno-24-19" href="#__codelineno-24-19"></a><span class="w">      </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="__span-24-20"><a id="__codelineno-24-20" name="__codelineno-24-20" href="#__codelineno-24-20"></a><span class="w">    </span><span class="p">&lt;/&gt;</span>
</span><span id="__span-24-21"><a id="__codelineno-24-21" name="__codelineno-24-21" href="#__codelineno-24-21"></a><span class="w">  </span><span class="p">);</span>
</span><span id="__span-24-22"><a id="__codelineno-24-22" name="__codelineno-24-22" href="#__codelineno-24-22"></a><span class="p">}</span>
</span></code></pre></div>
<p>接下来，你将编辑 <code>Square</code> 组件，以从 Board 组件接收 <code>value</code> props。这将需要删除 Square 组件自己的 <code>value</code> state 和按钮的 <code>onClick</code> props：</p>
<div class="language-jsx highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-25-1">1</a></span>
<span class="normal"><a href="#__codelineno-25-2">2</a></span>
<span class="normal"><a href="#__codelineno-25-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-25-1"><a id="__codelineno-25-1" name="__codelineno-25-1"></a><span class="kd">function</span><span class="w"> </span><span class="nx">Square</span><span class="p">({</span><span class="nx">value</span><span class="p">})</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-25-2"><a id="__codelineno-25-2" name="__codelineno-25-2"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">&lt;</span><span class="nt">button</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;square&quot;</span><span class="p">&gt;{</span><span class="nx">value</span><span class="p">}&lt;/</span><span class="nt">button</span><span class="p">&gt;;</span>
</span><span id="__span-25-3"><a id="__codelineno-25-3" name="__codelineno-25-3"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<p>此时你应该看到一个空的井字棋棋盘：</p>
<p><img alt="" src="https://zh-hans.react.dev/images/tutorial/empty-board.png" /></p>
<p>你的代码应该是这样的：</p>
<div class="language-jsx highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-26-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-26-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-26-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-26-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-26-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-26-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-26-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-26-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-26-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-26-10">10</a></span>
<span class="normal"><a href="#__codelineno-26-11">11</a></span>
<span class="normal"><a href="#__codelineno-26-12">12</a></span>
<span class="normal"><a href="#__codelineno-26-13">13</a></span>
<span class="normal"><a href="#__codelineno-26-14">14</a></span>
<span class="normal"><a href="#__codelineno-26-15">15</a></span>
<span class="normal"><a href="#__codelineno-26-16">16</a></span>
<span class="normal"><a href="#__codelineno-26-17">17</a></span>
<span class="normal"><a href="#__codelineno-26-18">18</a></span>
<span class="normal"><a href="#__codelineno-26-19">19</a></span>
<span class="normal"><a href="#__codelineno-26-20">20</a></span>
<span class="normal"><a href="#__codelineno-26-21">21</a></span>
<span class="normal"><a href="#__codelineno-26-22">22</a></span>
<span class="normal"><a href="#__codelineno-26-23">23</a></span>
<span class="normal"><a href="#__codelineno-26-24">24</a></span>
<span class="normal"><a href="#__codelineno-26-25">25</a></span>
<span class="normal"><a href="#__codelineno-26-26">26</a></span>
<span class="normal"><a href="#__codelineno-26-27">27</a></span>
<span class="normal"><a href="#__codelineno-26-28">28</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-26-1"><a id="__codelineno-26-1" name="__codelineno-26-1"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">useState</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;react&#39;</span><span class="p">;</span>
</span><span id="__span-26-2"><a id="__codelineno-26-2" name="__codelineno-26-2"></a>
</span><span id="__span-26-3"><a id="__codelineno-26-3" name="__codelineno-26-3"></a><span class="kd">function</span><span class="w"> </span><span class="nx">Square</span><span class="p">({</span><span class="w"> </span><span class="nx">value</span><span class="w"> </span><span class="p">})</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-4"><a id="__codelineno-26-4" name="__codelineno-26-4"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">&lt;</span><span class="nt">button</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;square&quot;</span><span class="p">&gt;{</span><span class="nx">value</span><span class="p">}&lt;/</span><span class="nt">button</span><span class="p">&gt;;</span>
</span><span id="__span-26-5"><a id="__codelineno-26-5" name="__codelineno-26-5"></a><span class="p">}</span>
</span><span id="__span-26-6"><a id="__codelineno-26-6" name="__codelineno-26-6"></a>
</span><span id="__span-26-7"><a id="__codelineno-26-7" name="__codelineno-26-7"></a><span class="k">export</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">Board</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-8"><a id="__codelineno-26-8" name="__codelineno-26-8"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">squares</span><span class="p">,</span><span class="w"> </span><span class="nx">setSquares</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useState</span><span class="p">(</span><span class="nb">Array</span><span class="p">(</span><span class="mf">9</span><span class="p">).</span><span class="nx">fill</span><span class="p">(</span><span class="kc">null</span><span class="p">));</span>
</span><span id="__span-26-9"><a id="__codelineno-26-9" name="__codelineno-26-9"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-26-10"><a id="__codelineno-26-10" name="__codelineno-26-10"></a><span class="w">    </span><span class="p">&lt;&gt;</span>
</span><span id="__span-26-11"><a id="__codelineno-26-11" name="__codelineno-26-11"></a><span class="w">      </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;board-row&quot;</span><span class="p">&gt;</span>
</span><span id="__span-26-12"><a id="__codelineno-26-12" name="__codelineno-26-12"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">squares</span><span class="p">[</span><span class="mf">0</span><span class="p">]}</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-26-13"><a id="__codelineno-26-13" name="__codelineno-26-13"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">squares</span><span class="p">[</span><span class="mf">1</span><span class="p">]}</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-26-14"><a id="__codelineno-26-14" name="__codelineno-26-14"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">squares</span><span class="p">[</span><span class="mf">2</span><span class="p">]}</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-26-15"><a id="__codelineno-26-15" name="__codelineno-26-15"></a><span class="w">      </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="__span-26-16"><a id="__codelineno-26-16" name="__codelineno-26-16"></a><span class="w">      </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;board-row&quot;</span><span class="p">&gt;</span>
</span><span id="__span-26-17"><a id="__codelineno-26-17" name="__codelineno-26-17"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">squares</span><span class="p">[</span><span class="mf">3</span><span class="p">]}</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-26-18"><a id="__codelineno-26-18" name="__codelineno-26-18"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">squares</span><span class="p">[</span><span class="mf">4</span><span class="p">]}</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-26-19"><a id="__codelineno-26-19" name="__codelineno-26-19"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">squares</span><span class="p">[</span><span class="mf">5</span><span class="p">]}</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-26-20"><a id="__codelineno-26-20" name="__codelineno-26-20"></a><span class="w">      </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="__span-26-21"><a id="__codelineno-26-21" name="__codelineno-26-21"></a><span class="w">      </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;board-row&quot;</span><span class="p">&gt;</span>
</span><span id="__span-26-22"><a id="__codelineno-26-22" name="__codelineno-26-22"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">squares</span><span class="p">[</span><span class="mf">6</span><span class="p">]}</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-26-23"><a id="__codelineno-26-23" name="__codelineno-26-23"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">squares</span><span class="p">[</span><span class="mf">7</span><span class="p">]}</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-26-24"><a id="__codelineno-26-24" name="__codelineno-26-24"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">squares</span><span class="p">[</span><span class="mf">8</span><span class="p">]}</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-26-25"><a id="__codelineno-26-25" name="__codelineno-26-25"></a><span class="w">      </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="__span-26-26"><a id="__codelineno-26-26" name="__codelineno-26-26"></a><span class="w">    </span><span class="p">&lt;/&gt;</span>
</span><span id="__span-26-27"><a id="__codelineno-26-27" name="__codelineno-26-27"></a><span class="w">  </span><span class="p">);</span>
</span><span id="__span-26-28"><a id="__codelineno-26-28" name="__codelineno-26-28"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<p>现在，每个 Square 都会收到一个 <code>value</code> props，对于空方块，该 props 将是 <code>'X'</code>、<code>'O'</code> 或 <code>null</code>。</p>
<p>接下来，你需要更改单击 <code>Square</code> 时发生的情况。<code>Board</code> 组件现在维护已经填充过的方块。你需要为 <code>Square</code> 创建一种更新 <code>Board</code> state 的方法。由于 state 对于定义它的组件是私有的，因此你不能直接从 <code>Square</code> 更新 <code>Board</code> 的 state。</p>
<p>你将从 <code>Board</code> 组件向下传递一个函数到 <code>Square</code> 组件，然后让 <code>Square</code> 在单击方块时调用该函数。我们将从单击 <code>Square</code> 组件时将调用的函数开始。调用该函数 <code>onSquareClick</code>：</p>
<div class="language-jsx highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-27-1">1</a></span>
<span class="normal"><a href="#__codelineno-27-2">2</a></span>
<span class="normal"><a href="#__codelineno-27-3">3</a></span>
<span class="normal"><a href="#__codelineno-27-4">4</a></span>
<span class="normal"><a href="#__codelineno-27-5">5</a></span>
<span class="normal"><a href="#__codelineno-27-6">6</a></span>
<span class="normal"><a href="#__codelineno-27-7">7</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-27-1"><a id="__codelineno-27-1" name="__codelineno-27-1"></a><span class="kd">function</span><span class="w"> </span><span class="nx">Square</span><span class="p">({</span><span class="w"> </span><span class="nx">value</span><span class="w"> </span><span class="p">})</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-27-2"><a id="__codelineno-27-2" name="__codelineno-27-2"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-27-3"><a id="__codelineno-27-3" name="__codelineno-27-3"></a><span class="w">    </span><span class="p">&lt;</span><span class="nt">button</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;square&quot;</span><span class="w"> </span><span class="na">onClick</span><span class="o">=</span><span class="p">{</span><span class="nx">onSquareClick</span><span class="p">}&gt;</span>
</span><span id="__span-27-4"><a id="__codelineno-27-4" name="__codelineno-27-4"></a><span class="w">      </span><span class="p">{</span><span class="nx">value</span><span class="p">}</span>
</span><span id="__span-27-5"><a id="__codelineno-27-5" name="__codelineno-27-5"></a><span class="w">    </span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span><span id="__span-27-6"><a id="__codelineno-27-6" name="__codelineno-27-6"></a><span class="w">  </span><span class="p">);</span>
</span><span id="__span-27-7"><a id="__codelineno-27-7" name="__codelineno-27-7"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<p>接下来，将 <code>onSquareClick</code> 函数添加到 <code>Square</code> 组件的 props 中：</p>
<div class="language-jsx highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-28-1">1</a></span>
<span class="normal"><a href="#__codelineno-28-2">2</a></span>
<span class="normal"><a href="#__codelineno-28-3">3</a></span>
<span class="normal"><a href="#__codelineno-28-4">4</a></span>
<span class="normal"><a href="#__codelineno-28-5">5</a></span>
<span class="normal"><a href="#__codelineno-28-6">6</a></span>
<span class="normal"><a href="#__codelineno-28-7">7</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-28-1"><a id="__codelineno-28-1" name="__codelineno-28-1"></a><span class="kd">function</span><span class="w"> </span><span class="nx">Square</span><span class="p">({</span><span class="w"> </span><span class="nx">value</span><span class="p">,</span><span class="w"> </span><span class="nx">onSquareClick</span><span class="w"> </span><span class="p">})</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-28-2"><a id="__codelineno-28-2" name="__codelineno-28-2"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-28-3"><a id="__codelineno-28-3" name="__codelineno-28-3"></a><span class="w">    </span><span class="p">&lt;</span><span class="nt">button</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;square&quot;</span><span class="w"> </span><span class="na">onClick</span><span class="o">=</span><span class="p">{</span><span class="nx">onSquareClick</span><span class="p">}&gt;</span>
</span><span id="__span-28-4"><a id="__codelineno-28-4" name="__codelineno-28-4"></a><span class="w">      </span><span class="p">{</span><span class="nx">value</span><span class="p">}</span>
</span><span id="__span-28-5"><a id="__codelineno-28-5" name="__codelineno-28-5"></a><span class="w">    </span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span><span id="__span-28-6"><a id="__codelineno-28-6" name="__codelineno-28-6"></a><span class="w">  </span><span class="p">);</span>
</span><span id="__span-28-7"><a id="__codelineno-28-7" name="__codelineno-28-7"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<p>现在，你将把 <code>onSquareClick</code> props 连接到 <code>Board</code> 组件中的一个函数，命名为 <code>handleClick</code>。要将 <code>onSquareClick</code> 连接到 <code>handleClick</code>，需要将一个函数传递给第一个 <code>Square</code> 组件的 <code>onSquareClick</code> props：</p>
<div class="language-jsx highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-29-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-29-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-29-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-29-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-29-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-29-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-29-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-29-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-29-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-29-10">10</a></span>
<span class="normal"><a href="#__codelineno-29-11">11</a></span>
<span class="normal"><a href="#__codelineno-29-12">12</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-29-1"><a id="__codelineno-29-1" name="__codelineno-29-1"></a><span class="k">export</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">Board</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-29-2"><a id="__codelineno-29-2" name="__codelineno-29-2"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">squares</span><span class="p">,</span><span class="w"> </span><span class="nx">setSquares</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useState</span><span class="p">(</span><span class="nb">Array</span><span class="p">(</span><span class="mf">9</span><span class="p">).</span><span class="nx">fill</span><span class="p">(</span><span class="kc">null</span><span class="p">));</span>
</span><span id="__span-29-3"><a id="__codelineno-29-3" name="__codelineno-29-3"></a>
</span><span id="__span-29-4"><a id="__codelineno-29-4" name="__codelineno-29-4"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-29-5"><a id="__codelineno-29-5" name="__codelineno-29-5"></a><span class="w">    </span><span class="p">&lt;&gt;</span>
</span><span id="__span-29-6"><a id="__codelineno-29-6" name="__codelineno-29-6"></a><span class="w">      </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;board-row&quot;</span><span class="p">&gt;</span>
</span><span id="__span-29-7"><a id="__codelineno-29-7" name="__codelineno-29-7"></a><span class="hll"><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">squares</span><span class="p">[</span><span class="mf">0</span><span class="p">]}</span><span class="w"> </span><span class="na">onSquareClick</span><span class="o">=</span><span class="p">{</span><span class="nx">handleClick</span><span class="p">}</span><span class="w"> </span><span class="p">/&gt;</span>
</span></span><span id="__span-29-8"><a id="__codelineno-29-8" name="__codelineno-29-8"></a><span class="w">        </span><span class="c1">//...</span>
</span><span id="__span-29-9"><a id="__codelineno-29-9" name="__codelineno-29-9"></a><span class="w">      </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="__span-29-10"><a id="__codelineno-29-10" name="__codelineno-29-10"></a><span class="w">    </span><span class="p">&lt;/&gt;</span>
</span><span id="__span-29-11"><a id="__codelineno-29-11" name="__codelineno-29-11"></a><span class="w">  </span><span class="p">);</span>
</span><span id="__span-29-12"><a id="__codelineno-29-12" name="__codelineno-29-12"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<p>最后，你将在 Board 组件内定义 <code>handleClick</code> 函数来更新并保存棋盘 state 的 <code>squares</code> 数组：</p>
<div class="language-jsx highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-30-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-30-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-30-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-30-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-30-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-30-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-30-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-30-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-30-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-30-10">10</a></span>
<span class="normal"><a href="#__codelineno-30-11">11</a></span>
<span class="normal"><a href="#__codelineno-30-12">12</a></span>
<span class="normal"><a href="#__codelineno-30-13">13</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-30-1"><a id="__codelineno-30-1" name="__codelineno-30-1"></a><span class="k">export</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">Board</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-30-2"><a id="__codelineno-30-2" name="__codelineno-30-2"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">squares</span><span class="p">,</span><span class="w"> </span><span class="nx">setSquares</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useState</span><span class="p">(</span><span class="nb">Array</span><span class="p">(</span><span class="mf">9</span><span class="p">).</span><span class="nx">fill</span><span class="p">(</span><span class="kc">null</span><span class="p">));</span>
</span><span id="__span-30-3"><a id="__codelineno-30-3" name="__codelineno-30-3"></a>
</span><span id="__span-30-4"><a id="__codelineno-30-4" name="__codelineno-30-4"></a><span class="w">  </span><span class="kd">function</span><span class="w"> </span><span class="nx">handleClick</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-30-5"><a id="__codelineno-30-5" name="__codelineno-30-5"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">nextSquares</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">squares</span><span class="p">.</span><span class="nx">slice</span><span class="p">();</span>
</span><span id="__span-30-6"><a id="__codelineno-30-6" name="__codelineno-30-6"></a><span class="w">    </span><span class="nx">nextSquares</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;X&quot;</span><span class="p">;</span>
</span><span id="__span-30-7"><a id="__codelineno-30-7" name="__codelineno-30-7"></a><span class="w">    </span><span class="nx">setSquares</span><span class="p">(</span><span class="nx">nextSquares</span><span class="p">);</span>
</span><span id="__span-30-8"><a id="__codelineno-30-8" name="__codelineno-30-8"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-30-9"><a id="__codelineno-30-9" name="__codelineno-30-9"></a>
</span><span id="__span-30-10"><a id="__codelineno-30-10" name="__codelineno-30-10"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-30-11"><a id="__codelineno-30-11" name="__codelineno-30-11"></a><span class="w">    </span><span class="c1">// ...</span>
</span><span id="__span-30-12"><a id="__codelineno-30-12" name="__codelineno-30-12"></a><span class="w">  </span><span class="p">)</span>
</span><span id="__span-30-13"><a id="__codelineno-30-13" name="__codelineno-30-13"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<p><code>handleClick</code> 函数使用 JavaScript 数组的 <code>slice()</code> 方法创建 <code>squares</code> 数组（<code>nextSquares</code>）的副本。然后，<code>handleClick</code> 更新 <code>nextSquares</code> 数组，将 <code>X</code> 添加到第一个（<code>[0]</code> 索引）方块。</p>
<p>调用 <code>setSquares</code> 函数让 React 知道组件的 state 已经改变。这将触发使用 <code>squares</code> state 的组件（<code>Board</code>）及其子组件（构成棋盘的 <code>Square</code> 组件）的重新渲染。</p>
<div class="admonition warning">
<p class="admonition-title">注意</p>
<p>JavaScript 支持闭包，这意味着内部函数（例如 <code>handleClick</code>）可以访问外部函数（例如 <code>Board</code>）中定义的变量和函数。<code>handleClick</code> 函数可以读取 <code>squares</code> state 并调用 <code>setSquares</code> 方法，因为它们都是在 <code>Board</code> 函数内部定义的。</p>
</div>
<p>现在你可以将 X 添加到棋盘上……但只能添加到左上角的方块。你的 <code>handleClick</code> 函数被硬编码为更新左上角方块（ <code>0</code>）的索引。让我们更新 <code>handleClick</code> 以便能够更新任何方块。将参数 <code>i</code> 添加到 <code>handleClick</code> 函数，该函数采用要更新的 square 索引：</p>
<div class="language-jsx highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-31-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-31-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-31-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-31-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-31-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-31-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-31-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-31-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-31-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-31-10">10</a></span>
<span class="normal"><a href="#__codelineno-31-11">11</a></span>
<span class="normal"><a href="#__codelineno-31-12">12</a></span>
<span class="normal"><a href="#__codelineno-31-13">13</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-31-1"><a id="__codelineno-31-1" name="__codelineno-31-1"></a><span class="k">export</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">Board</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-31-2"><a id="__codelineno-31-2" name="__codelineno-31-2"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">squares</span><span class="p">,</span><span class="w"> </span><span class="nx">setSquares</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useState</span><span class="p">(</span><span class="nb">Array</span><span class="p">(</span><span class="mf">9</span><span class="p">).</span><span class="nx">fill</span><span class="p">(</span><span class="kc">null</span><span class="p">));</span>
</span><span id="__span-31-3"><a id="__codelineno-31-3" name="__codelineno-31-3"></a>
</span><span id="__span-31-4"><a id="__codelineno-31-4" name="__codelineno-31-4"></a><span class="hll"><span class="w">  </span><span class="kd">function</span><span class="w"> </span><span class="nx">handleClick</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span></span><span id="__span-31-5"><a id="__codelineno-31-5" name="__codelineno-31-5"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">nextSquares</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">squares</span><span class="p">.</span><span class="nx">slice</span><span class="p">();</span>
</span><span id="__span-31-6"><a id="__codelineno-31-6" name="__codelineno-31-6"></a><span class="hll"><span class="w">    </span><span class="nx">nextSquares</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;X&quot;</span><span class="p">;</span>
</span></span><span id="__span-31-7"><a id="__codelineno-31-7" name="__codelineno-31-7"></a><span class="w">    </span><span class="nx">setSquares</span><span class="p">(</span><span class="nx">nextSquares</span><span class="p">);</span>
</span><span id="__span-31-8"><a id="__codelineno-31-8" name="__codelineno-31-8"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-31-9"><a id="__codelineno-31-9" name="__codelineno-31-9"></a>
</span><span id="__span-31-10"><a id="__codelineno-31-10" name="__codelineno-31-10"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-31-11"><a id="__codelineno-31-11" name="__codelineno-31-11"></a><span class="w">    </span><span class="c1">// ...</span>
</span><span id="__span-31-12"><a id="__codelineno-31-12" name="__codelineno-31-12"></a><span class="w">  </span><span class="p">)</span>
</span><span id="__span-31-13"><a id="__codelineno-31-13" name="__codelineno-31-13"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<p>接下来，你需要将 <code>i</code> 传递给 <code>handleClick</code>。你可以尝试像这样在 JSX 中直接将 square 的 <code>onSquareClick</code> props 设置为 <code>handleClick(0)</code>，但这是行不通的：</p>
<div class="language-jsx highlight"><pre><span></span><code><span id="__span-32-1"><a id="__codelineno-32-1" name="__codelineno-32-1" href="#__codelineno-32-1"></a><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">squares</span><span class="p">[</span><span class="mf">0</span><span class="p">]}</span><span class="w"> </span><span class="na">onSquareClick</span><span class="o">=</span><span class="p">{</span><span class="nx">handleClick</span><span class="p">(</span><span class="mf">0</span><span class="p">)}</span><span class="w"> </span><span class="p">/&gt;</span>
</span></code></pre></div>
<p>为什么会是这样呢？<code>handleClick(0)</code> 调用将成为渲染 Board 组件的一部分。因为 <code>handleClick(0)</code> 通过调用 <code>setSquares</code> 改变了棋盘组件的 state，所以你的整个棋盘组件将再次重新渲染。但这再次运行了 <code>handleClick(0)</code>，导致无限循环：</p>
<div class="language-bash highlight"><span class="filename">控制台</span><pre><span></span><code><span id="__span-33-1"><a id="__codelineno-33-1" name="__codelineno-33-1" href="#__codelineno-33-1"></a>Too<span class="w"> </span>many<span class="w"> </span>re-renders.<span class="w"> </span>React<span class="w"> </span>limits<span class="w"> </span>the<span class="w"> </span>number<span class="w"> </span>of<span class="w"> </span>renders<span class="w"> </span>to<span class="w"> </span>prevent<span class="w"> </span>an<span class="w"> </span>infinite<span class="w"> </span>loop.
</span></code></pre></div>
<p>为什么这个问题没有早点发生？</p>
<p>当你传递 <code>onSquareClick={handleClick}</code> 时，你将 <code>handleClick</code> 函数作为 props 向下传递。你不是在调用它！但是现在你立即调用了该函数——注意 <code>handleClick(0)</code> 中的括号——这就是它运行得太早的原因。你不想在用户点击之前调用 <code>handleClick</code>！</p>
<p>你可以通过创建调用 <code>handleClick(0)</code> 的函数（如 <code>handleFirstSquareClick</code>）、调用 <code>handleClick(1)</code> 的函数（如 <code>handleSecondSquareClick</code>）等来修复。你可以将这些函数作为 <code>onSquareClick={handleFirstSquareClick}</code> 之类的 props 传递（而不是调用）。这将解决无限循环的问题。</p>
<p>但是，定义九个不同的函数并为每个函数命名过于冗余。让我们这样做：</p>
<div class="language-jsx highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-34-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-34-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-34-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-34-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-34-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-34-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-34-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-34-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-34-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-34-10">10</a></span>
<span class="normal"><a href="#__codelineno-34-11">11</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-34-1"><a id="__codelineno-34-1" name="__codelineno-34-1"></a><span class="k">export</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">Board</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-34-2"><a id="__codelineno-34-2" name="__codelineno-34-2"></a><span class="w">  </span><span class="c1">// ...</span>
</span><span id="__span-34-3"><a id="__codelineno-34-3" name="__codelineno-34-3"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-34-4"><a id="__codelineno-34-4" name="__codelineno-34-4"></a><span class="w">    </span><span class="p">&lt;&gt;</span>
</span><span id="__span-34-5"><a id="__codelineno-34-5" name="__codelineno-34-5"></a><span class="w">      </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;board-row&quot;</span><span class="p">&gt;</span>
</span><span id="__span-34-6"><a id="__codelineno-34-6" name="__codelineno-34-6"></a><span class="hll"><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">squares</span><span class="p">[</span><span class="mf">0</span><span class="p">]}</span><span class="w"> </span><span class="na">onSquareClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">handleClick</span><span class="p">(</span><span class="mf">0</span><span class="p">)}</span><span class="w"> </span><span class="p">/&gt;</span>
</span></span><span id="__span-34-7"><a id="__codelineno-34-7" name="__codelineno-34-7"></a><span class="w">        </span><span class="c1">// ...</span>
</span><span id="__span-34-8"><a id="__codelineno-34-8" name="__codelineno-34-8"></a><span class="w">      </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="__span-34-9"><a id="__codelineno-34-9" name="__codelineno-34-9"></a><span class="w">    </span><span class="p">&lt;/&gt;</span>
</span><span id="__span-34-10"><a id="__codelineno-34-10" name="__codelineno-34-10"></a><span class="w">  </span><span class="p">);</span>
</span><span id="__span-34-11"><a id="__codelineno-34-11" name="__codelineno-34-11"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<p>注意新的 <code>() =&gt;</code> 语法。这里，<code>() =&gt; handleClick(0)</code> 是一个箭头函数，它是定义函数的一种较短的方式。单击方块时，<code>=&gt;</code>“箭头”之后的代码将运行，调用 <code>handleClick(0)</code>。</p>
<p>现在你需要更新其他八个方块以从你传递的箭头函数中调用 <code>handleClick</code>。确保 <code>handleClick</code> 的每次调用的参数对应于正确的 square 索引：</p>
<div class="language-jsx highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-35-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-35-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-35-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-35-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-35-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-35-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-35-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-35-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-35-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-35-10">10</a></span>
<span class="normal"><a href="#__codelineno-35-11">11</a></span>
<span class="normal"><a href="#__codelineno-35-12">12</a></span>
<span class="normal"><a href="#__codelineno-35-13">13</a></span>
<span class="normal"><a href="#__codelineno-35-14">14</a></span>
<span class="normal"><a href="#__codelineno-35-15">15</a></span>
<span class="normal"><a href="#__codelineno-35-16">16</a></span>
<span class="normal"><a href="#__codelineno-35-17">17</a></span>
<span class="normal"><a href="#__codelineno-35-18">18</a></span>
<span class="normal"><a href="#__codelineno-35-19">19</a></span>
<span class="normal"><a href="#__codelineno-35-20">20</a></span>
<span class="normal"><a href="#__codelineno-35-21">21</a></span>
<span class="normal"><a href="#__codelineno-35-22">22</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-35-1"><a id="__codelineno-35-1" name="__codelineno-35-1"></a><span class="k">export</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">Board</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-35-2"><a id="__codelineno-35-2" name="__codelineno-35-2"></a><span class="w">  </span><span class="c1">// ...</span>
</span><span id="__span-35-3"><a id="__codelineno-35-3" name="__codelineno-35-3"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-35-4"><a id="__codelineno-35-4" name="__codelineno-35-4"></a><span class="w">    </span><span class="p">&lt;&gt;</span>
</span><span id="__span-35-5"><a id="__codelineno-35-5" name="__codelineno-35-5"></a><span class="w">      </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;board-row&quot;</span><span class="p">&gt;</span>
</span><span id="__span-35-6"><a id="__codelineno-35-6" name="__codelineno-35-6"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">squares</span><span class="p">[</span><span class="mf">0</span><span class="p">]}</span><span class="w"> </span><span class="na">onSquareClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">handleClick</span><span class="p">(</span><span class="mf">0</span><span class="p">)}</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-35-7"><a id="__codelineno-35-7" name="__codelineno-35-7"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">squares</span><span class="p">[</span><span class="mf">1</span><span class="p">]}</span><span class="w"> </span><span class="na">onSquareClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">handleClick</span><span class="p">(</span><span class="mf">1</span><span class="p">)}</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-35-8"><a id="__codelineno-35-8" name="__codelineno-35-8"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">squares</span><span class="p">[</span><span class="mf">2</span><span class="p">]}</span><span class="w"> </span><span class="na">onSquareClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">handleClick</span><span class="p">(</span><span class="mf">2</span><span class="p">)}</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-35-9"><a id="__codelineno-35-9" name="__codelineno-35-9"></a><span class="w">      </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="__span-35-10"><a id="__codelineno-35-10" name="__codelineno-35-10"></a><span class="w">      </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;board-row&quot;</span><span class="p">&gt;</span>
</span><span id="__span-35-11"><a id="__codelineno-35-11" name="__codelineno-35-11"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">squares</span><span class="p">[</span><span class="mf">3</span><span class="p">]}</span><span class="w"> </span><span class="na">onSquareClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">handleClick</span><span class="p">(</span><span class="mf">3</span><span class="p">)}</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-35-12"><a id="__codelineno-35-12" name="__codelineno-35-12"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">squares</span><span class="p">[</span><span class="mf">4</span><span class="p">]}</span><span class="w"> </span><span class="na">onSquareClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">handleClick</span><span class="p">(</span><span class="mf">4</span><span class="p">)}</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-35-13"><a id="__codelineno-35-13" name="__codelineno-35-13"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">squares</span><span class="p">[</span><span class="mf">5</span><span class="p">]}</span><span class="w"> </span><span class="na">onSquareClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">handleClick</span><span class="p">(</span><span class="mf">5</span><span class="p">)}</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-35-14"><a id="__codelineno-35-14" name="__codelineno-35-14"></a><span class="w">      </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="__span-35-15"><a id="__codelineno-35-15" name="__codelineno-35-15"></a><span class="w">      </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;board-row&quot;</span><span class="p">&gt;</span>
</span><span id="__span-35-16"><a id="__codelineno-35-16" name="__codelineno-35-16"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">squares</span><span class="p">[</span><span class="mf">6</span><span class="p">]}</span><span class="w"> </span><span class="na">onSquareClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">handleClick</span><span class="p">(</span><span class="mf">6</span><span class="p">)}</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-35-17"><a id="__codelineno-35-17" name="__codelineno-35-17"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">squares</span><span class="p">[</span><span class="mf">7</span><span class="p">]}</span><span class="w"> </span><span class="na">onSquareClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">handleClick</span><span class="p">(</span><span class="mf">7</span><span class="p">)}</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-35-18"><a id="__codelineno-35-18" name="__codelineno-35-18"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">squares</span><span class="p">[</span><span class="mf">8</span><span class="p">]}</span><span class="w"> </span><span class="na">onSquareClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">handleClick</span><span class="p">(</span><span class="mf">8</span><span class="p">)}</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-35-19"><a id="__codelineno-35-19" name="__codelineno-35-19"></a><span class="w">      </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="__span-35-20"><a id="__codelineno-35-20" name="__codelineno-35-20"></a><span class="w">    </span><span class="p">&lt;/&gt;</span>
</span><span id="__span-35-21"><a id="__codelineno-35-21" name="__codelineno-35-21"></a><span class="w">  </span><span class="p">);</span>
</span><span id="__span-35-22"><a id="__codelineno-35-22" name="__codelineno-35-22"></a><span class="p">};</span>
</span></code></pre></div></td></tr></table></div>
<p>现在你可以再次通过单击将 X 添加到棋盘的方块上：</p>
<p><img alt="" src="https://zh-hans.react.dev/images/tutorial/tictac-adding-x-s.gif" /></p>
<p>但是这次所有的 state 管理都由 <code>Board</code> 组件处理！</p>
<div class="language-jsx highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">App.js</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-36-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-36-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-36-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-36-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-36-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-36-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-36-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-36-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-36-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-36-10">10</a></span>
<span class="normal"><a href="#__codelineno-36-11">11</a></span>
<span class="normal"><a href="#__codelineno-36-12">12</a></span>
<span class="normal"><a href="#__codelineno-36-13">13</a></span>
<span class="normal"><a href="#__codelineno-36-14">14</a></span>
<span class="normal"><a href="#__codelineno-36-15">15</a></span>
<span class="normal"><a href="#__codelineno-36-16">16</a></span>
<span class="normal"><a href="#__codelineno-36-17">17</a></span>
<span class="normal"><a href="#__codelineno-36-18">18</a></span>
<span class="normal"><a href="#__codelineno-36-19">19</a></span>
<span class="normal"><a href="#__codelineno-36-20">20</a></span>
<span class="normal"><a href="#__codelineno-36-21">21</a></span>
<span class="normal"><a href="#__codelineno-36-22">22</a></span>
<span class="normal"><a href="#__codelineno-36-23">23</a></span>
<span class="normal"><a href="#__codelineno-36-24">24</a></span>
<span class="normal"><a href="#__codelineno-36-25">25</a></span>
<span class="normal"><a href="#__codelineno-36-26">26</a></span>
<span class="normal"><a href="#__codelineno-36-27">27</a></span>
<span class="normal"><a href="#__codelineno-36-28">28</a></span>
<span class="normal"><a href="#__codelineno-36-29">29</a></span>
<span class="normal"><a href="#__codelineno-36-30">30</a></span>
<span class="normal"><a href="#__codelineno-36-31">31</a></span>
<span class="normal"><a href="#__codelineno-36-32">32</a></span>
<span class="normal"><a href="#__codelineno-36-33">33</a></span>
<span class="normal"><a href="#__codelineno-36-34">34</a></span>
<span class="normal"><a href="#__codelineno-36-35">35</a></span>
<span class="normal"><a href="#__codelineno-36-36">36</a></span>
<span class="normal"><a href="#__codelineno-36-37">37</a></span>
<span class="normal"><a href="#__codelineno-36-38">38</a></span>
<span class="normal"><a href="#__codelineno-36-39">39</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-36-1"><a id="__codelineno-36-1" name="__codelineno-36-1"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">useState</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;react&#39;</span><span class="p">;</span>
</span><span id="__span-36-2"><a id="__codelineno-36-2" name="__codelineno-36-2"></a>
</span><span id="__span-36-3"><a id="__codelineno-36-3" name="__codelineno-36-3"></a><span class="kd">function</span><span class="w"> </span><span class="nx">Square</span><span class="p">({</span><span class="w"> </span><span class="nx">value</span><span class="p">,</span><span class="w"> </span><span class="nx">onSquareClick</span><span class="w"> </span><span class="p">})</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-36-4"><a id="__codelineno-36-4" name="__codelineno-36-4"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-36-5"><a id="__codelineno-36-5" name="__codelineno-36-5"></a><span class="w">    </span><span class="p">&lt;</span><span class="nt">button</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;square&quot;</span><span class="w"> </span><span class="na">onClick</span><span class="o">=</span><span class="p">{</span><span class="nx">onSquareClick</span><span class="p">}&gt;</span>
</span><span id="__span-36-6"><a id="__codelineno-36-6" name="__codelineno-36-6"></a><span class="w">      </span><span class="p">{</span><span class="nx">value</span><span class="p">}</span>
</span><span id="__span-36-7"><a id="__codelineno-36-7" name="__codelineno-36-7"></a><span class="w">    </span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span><span id="__span-36-8"><a id="__codelineno-36-8" name="__codelineno-36-8"></a><span class="w">  </span><span class="p">);</span>
</span><span id="__span-36-9"><a id="__codelineno-36-9" name="__codelineno-36-9"></a><span class="p">}</span>
</span><span id="__span-36-10"><a id="__codelineno-36-10" name="__codelineno-36-10"></a>
</span><span id="__span-36-11"><a id="__codelineno-36-11" name="__codelineno-36-11"></a><span class="k">export</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">Board</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-36-12"><a id="__codelineno-36-12" name="__codelineno-36-12"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">squares</span><span class="p">,</span><span class="w"> </span><span class="nx">setSquares</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useState</span><span class="p">(</span><span class="nb">Array</span><span class="p">(</span><span class="mf">9</span><span class="p">).</span><span class="nx">fill</span><span class="p">(</span><span class="kc">null</span><span class="p">));</span>
</span><span id="__span-36-13"><a id="__codelineno-36-13" name="__codelineno-36-13"></a>
</span><span id="__span-36-14"><a id="__codelineno-36-14" name="__codelineno-36-14"></a><span class="w">  </span><span class="kd">function</span><span class="w"> </span><span class="nx">handleClick</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-36-15"><a id="__codelineno-36-15" name="__codelineno-36-15"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">nextSquares</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">squares</span><span class="p">.</span><span class="nx">slice</span><span class="p">();</span>
</span><span id="__span-36-16"><a id="__codelineno-36-16" name="__codelineno-36-16"></a><span class="w">    </span><span class="nx">nextSquares</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;X&#39;</span><span class="p">;</span>
</span><span id="__span-36-17"><a id="__codelineno-36-17" name="__codelineno-36-17"></a><span class="w">    </span><span class="nx">setSquares</span><span class="p">(</span><span class="nx">nextSquares</span><span class="p">);</span>
</span><span id="__span-36-18"><a id="__codelineno-36-18" name="__codelineno-36-18"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-36-19"><a id="__codelineno-36-19" name="__codelineno-36-19"></a>
</span><span id="__span-36-20"><a id="__codelineno-36-20" name="__codelineno-36-20"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-36-21"><a id="__codelineno-36-21" name="__codelineno-36-21"></a><span class="w">    </span><span class="p">&lt;&gt;</span>
</span><span id="__span-36-22"><a id="__codelineno-36-22" name="__codelineno-36-22"></a><span class="w">      </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;board-row&quot;</span><span class="p">&gt;</span>
</span><span id="__span-36-23"><a id="__codelineno-36-23" name="__codelineno-36-23"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">squares</span><span class="p">[</span><span class="mf">0</span><span class="p">]}</span><span class="w"> </span><span class="na">onSquareClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">handleClick</span><span class="p">(</span><span class="mf">0</span><span class="p">)}</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-36-24"><a id="__codelineno-36-24" name="__codelineno-36-24"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">squares</span><span class="p">[</span><span class="mf">1</span><span class="p">]}</span><span class="w"> </span><span class="na">onSquareClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">handleClick</span><span class="p">(</span><span class="mf">1</span><span class="p">)}</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-36-25"><a id="__codelineno-36-25" name="__codelineno-36-25"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">squares</span><span class="p">[</span><span class="mf">2</span><span class="p">]}</span><span class="w"> </span><span class="na">onSquareClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">handleClick</span><span class="p">(</span><span class="mf">2</span><span class="p">)}</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-36-26"><a id="__codelineno-36-26" name="__codelineno-36-26"></a><span class="w">      </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="__span-36-27"><a id="__codelineno-36-27" name="__codelineno-36-27"></a><span class="w">      </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;board-row&quot;</span><span class="p">&gt;</span>
</span><span id="__span-36-28"><a id="__codelineno-36-28" name="__codelineno-36-28"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">squares</span><span class="p">[</span><span class="mf">3</span><span class="p">]}</span><span class="w"> </span><span class="na">onSquareClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">handleClick</span><span class="p">(</span><span class="mf">3</span><span class="p">)}</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-36-29"><a id="__codelineno-36-29" name="__codelineno-36-29"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">squares</span><span class="p">[</span><span class="mf">4</span><span class="p">]}</span><span class="w"> </span><span class="na">onSquareClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">handleClick</span><span class="p">(</span><span class="mf">4</span><span class="p">)}</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-36-30"><a id="__codelineno-36-30" name="__codelineno-36-30"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">squares</span><span class="p">[</span><span class="mf">5</span><span class="p">]}</span><span class="w"> </span><span class="na">onSquareClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">handleClick</span><span class="p">(</span><span class="mf">5</span><span class="p">)}</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-36-31"><a id="__codelineno-36-31" name="__codelineno-36-31"></a><span class="w">      </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="__span-36-32"><a id="__codelineno-36-32" name="__codelineno-36-32"></a><span class="w">      </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;board-row&quot;</span><span class="p">&gt;</span>
</span><span id="__span-36-33"><a id="__codelineno-36-33" name="__codelineno-36-33"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">squares</span><span class="p">[</span><span class="mf">6</span><span class="p">]}</span><span class="w"> </span><span class="na">onSquareClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">handleClick</span><span class="p">(</span><span class="mf">6</span><span class="p">)}</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-36-34"><a id="__codelineno-36-34" name="__codelineno-36-34"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">squares</span><span class="p">[</span><span class="mf">7</span><span class="p">]}</span><span class="w"> </span><span class="na">onSquareClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">handleClick</span><span class="p">(</span><span class="mf">7</span><span class="p">)}</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-36-35"><a id="__codelineno-36-35" name="__codelineno-36-35"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">squares</span><span class="p">[</span><span class="mf">8</span><span class="p">]}</span><span class="w"> </span><span class="na">onSquareClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">handleClick</span><span class="p">(</span><span class="mf">8</span><span class="p">)}</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-36-36"><a id="__codelineno-36-36" name="__codelineno-36-36"></a><span class="w">      </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="__span-36-37"><a id="__codelineno-36-37" name="__codelineno-36-37"></a><span class="w">    </span><span class="p">&lt;/&gt;</span>
</span><span id="__span-36-38"><a id="__codelineno-36-38" name="__codelineno-36-38"></a><span class="w">  </span><span class="p">);</span>
</span><span id="__span-36-39"><a id="__codelineno-36-39" name="__codelineno-36-39"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<p>现在，我们在 <code>Board</code> 组件中处理 state， <code>Board</code> 父组件将 props 传递给 <code>Square</code> 子组件，以便它们可以正确显示。单击 <code>Square</code> 时， <code>Square</code> 子组件现在要求 <code>Board</code> 父组件更新棋盘的 state。当 <code>Board</code> 的 state 改变时，<code>Board</code> 组件和每个子 <code>Square</code> 都会自动重新渲染。保存 <code>Board</code> 组件中所有方块的 state 将使得它可以确定未来的赢家。</p>
<p>让我们回顾一下当用户单击你的棋盘左上角的方块以向其添加 <code>X</code> 时会发生什么：</p>
<ol>
<li>单击左上角的方块运行 <code>button</code> 从 <code>Square</code> 接收到的 <code>onClick</code> props 的函数。<code>Square</code> 组件从 <code>Board</code> 通过 <code>onSquareClick</code> props 接收到该函数。<code>Board</code> 组件直接在 JSX 中定义了该函数。它使用参数 <code>0</code> 调用 <code>handleClick</code>。</li>
<li><code>handleClick</code> 使用参数（<code>0</code>）将 <code>squares</code> 数组的第一个元素从 <code>null</code> 更新为 <code>X</code>。</li>
<li><code>Board</code> 组件的 <code>squares</code> state 已更新，因此 <code>Board</code> 及其所有子组件都将重新渲染。这会导致索引为 <code>0</code> 的 <code>Square</code> 组件的 <code>value</code> props 从 <code>null</code> 更改为 <code>X</code>。</li>
</ol>
<p>最后，用户看到左上角的方块在单击后从空变为 <code>X</code>。</p>
<div class="admonition warning">
<p class="admonition-title">注意</p>
<p>DOM <code>&lt;button&gt;</code> 元素的 <code>onClick</code> props 对 React 有特殊意义，因为它是一个内置组件。对于像 Square 这样的自定义组件，命名由你决定。你可以给 <code>Square</code> 的 <code>onSquareClick</code> props 或 <code>Board</code> 的 <code>handleClick</code> 函数起任何名字，代码还是可以运行的。在 React 中，通常使用 <code>onSomething</code> 命名代表事件的 props，使用 <code>handleSomething</code> 命名处理这些事件的函数。</p>
</div>
<h3 id="32">3.2 为什么不变性很重要<a class="headerlink" href="#32" title="Permanent link">&para;</a></h3>
<p>请注意在 <code>handleClick</code> 中，你调用了 <code>.slice()</code> 来创建 <code>squares</code> 数组的副本而不是修改现有数组。为了解释原因，我们需要讨论不变性以及为什么学习不变性很重要。</p>
<p>通常有两种更改数据的方法。第一种方法是通过直接更改数据的值来改变数据。第二种方法是使用具有所需变化的新副本替换数据。如果你改变 <code>squares</code> 数组，它会是这样的：</p>
<div class="language-jsx highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-37-1">1</a></span>
<span class="normal"><a href="#__codelineno-37-2">2</a></span>
<span class="normal"><a href="#__codelineno-37-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-37-1"><a id="__codelineno-37-1" name="__codelineno-37-1"></a><span class="kd">const</span><span class="w"> </span><span class="nx">squares</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="kc">null</span><span class="p">];</span>
</span><span id="__span-37-2"><a id="__codelineno-37-2" name="__codelineno-37-2"></a><span class="nx">squares</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;X&#39;</span><span class="p">;</span>
</span><span id="__span-37-3"><a id="__codelineno-37-3" name="__codelineno-37-3"></a><span class="c1">// Now `squares` is [&quot;X&quot;, null, null, null, null, null, null, null, null];</span>
</span></code></pre></div></td></tr></table></div>
<p>如果你在不改变 <code>squares</code> 数组的情况下更改数据，它会是这样的：</p>
<div class="language-jsx highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-38-1">1</a></span>
<span class="normal"><a href="#__codelineno-38-2">2</a></span>
<span class="normal"><a href="#__codelineno-38-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-38-1"><a id="__codelineno-38-1" name="__codelineno-38-1"></a><span class="kd">const</span><span class="w"> </span><span class="nx">squares</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="kc">null</span><span class="p">];</span>
</span><span id="__span-38-2"><a id="__codelineno-38-2" name="__codelineno-38-2"></a><span class="kd">const</span><span class="w"> </span><span class="nx">nextSquares</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;X&#39;</span><span class="p">,</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="kc">null</span><span class="p">];</span>
</span><span id="__span-38-3"><a id="__codelineno-38-3" name="__codelineno-38-3"></a><span class="c1">// Now `squares` is unchanged, but `nextSquares` first element is &#39;X&#39; rather than `null`</span>
</span></code></pre></div></td></tr></table></div>
<p>结果是一样的，但通过不直接改变（改变底层数据），你可以获得几个好处。</p>
<p>不变性使复杂的功能更容易实现。在本教程的后面，你将实现一个“时间旅行”功能，让你回顾游戏的历史并“跳回”到过去的动作。此功能并非特定于游戏——撤消和重做某些操作的能力是应用程序的常见要求。避免数据直接突变可以让你保持以前版本的数据完好无损，并在以后重用它们。</p>
<p>不变性还有另一个好处。默认情况下，当父组件的 state 发生变化时，所有子组件都会自动重新渲染。这甚至包括未受变化影响的子组件。尽管重新渲染本身不会引起用户注意（你不应该主动尝试避免它！），但出于性能原因，你可能希望跳过重新渲染显然不受其影响的树的一部分。不变性使得组件比较其数据是否已更改的成本非常低。你可以在 <a href="https://zh-hans.react.dev/reference/react/memo"><code>memo</code> API 参考</a> 中了解更多关于 React 如何选择何时重新渲染组件的信息。</p>
<h3 id="33">3.3 交替落子<a class="headerlink" href="#33" title="Permanent link">&para;</a></h3>
<p>现在是时候修复这个井字棋游戏的一个主要缺陷了：棋盘上无法标记“O”。</p>
<p>默认情况下，你会将第一步设置为“X”。让我们通过向 Board 组件添加另一个 state 来跟踪这一点：</p>
<div class="language-jsx highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-39-1">1</a></span>
<span class="normal"><a href="#__codelineno-39-2">2</a></span>
<span class="normal"><a href="#__codelineno-39-3">3</a></span>
<span class="normal"><a href="#__codelineno-39-4">4</a></span>
<span class="normal"><a href="#__codelineno-39-5">5</a></span>
<span class="normal"><a href="#__codelineno-39-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-39-1"><a id="__codelineno-39-1" name="__codelineno-39-1"></a><span class="kd">function</span><span class="w"> </span><span class="nx">Board</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-39-2"><a id="__codelineno-39-2" name="__codelineno-39-2"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">xIsNext</span><span class="p">,</span><span class="w"> </span><span class="nx">setXIsNext</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useState</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
</span><span id="__span-39-3"><a id="__codelineno-39-3" name="__codelineno-39-3"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">squares</span><span class="p">,</span><span class="w"> </span><span class="nx">setSquares</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useState</span><span class="p">(</span><span class="nb">Array</span><span class="p">(</span><span class="mf">9</span><span class="p">).</span><span class="nx">fill</span><span class="p">(</span><span class="kc">null</span><span class="p">));</span>
</span><span id="__span-39-4"><a id="__codelineno-39-4" name="__codelineno-39-4"></a>
</span><span id="__span-39-5"><a id="__codelineno-39-5" name="__codelineno-39-5"></a><span class="w">  </span><span class="c1">// ...</span>
</span><span id="__span-39-6"><a id="__codelineno-39-6" name="__codelineno-39-6"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<p>每次玩家落子时，<code>xIsNext</code>（一个布尔值）将被翻转以确定下一个玩家，游戏 state 将被保存。你将更新 <code>Board</code> 的 <code>handleClick</code> 函数以翻转 <code>xIsNext</code> 的值：</p>
<div class="language-jsx highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-40-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-40-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-40-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-40-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-40-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-40-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-40-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-40-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-40-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-40-10">10</a></span>
<span class="normal"><a href="#__codelineno-40-11">11</a></span>
<span class="normal"><a href="#__codelineno-40-12">12</a></span>
<span class="normal"><a href="#__codelineno-40-13">13</a></span>
<span class="normal"><a href="#__codelineno-40-14">14</a></span>
<span class="normal"><a href="#__codelineno-40-15">15</a></span>
<span class="normal"><a href="#__codelineno-40-16">16</a></span>
<span class="normal"><a href="#__codelineno-40-17">17</a></span>
<span class="normal"><a href="#__codelineno-40-18">18</a></span>
<span class="normal"><a href="#__codelineno-40-19">19</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-40-1"><a id="__codelineno-40-1" name="__codelineno-40-1"></a><span class="k">export</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">Board</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-40-2"><a id="__codelineno-40-2" name="__codelineno-40-2"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">xIsNext</span><span class="p">,</span><span class="w"> </span><span class="nx">setXIsNext</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useState</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
</span><span id="__span-40-3"><a id="__codelineno-40-3" name="__codelineno-40-3"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">squares</span><span class="p">,</span><span class="w"> </span><span class="nx">setSquares</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useState</span><span class="p">(</span><span class="nb">Array</span><span class="p">(</span><span class="mf">9</span><span class="p">).</span><span class="nx">fill</span><span class="p">(</span><span class="kc">null</span><span class="p">));</span>
</span><span id="__span-40-4"><a id="__codelineno-40-4" name="__codelineno-40-4"></a>
</span><span id="__span-40-5"><a id="__codelineno-40-5" name="__codelineno-40-5"></a><span class="w">  </span><span class="kd">function</span><span class="w"> </span><span class="nx">handleClick</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-40-6"><a id="__codelineno-40-6" name="__codelineno-40-6"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">nextSquares</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">squares</span><span class="p">.</span><span class="nx">slice</span><span class="p">();</span>
</span><span id="__span-40-7"><a id="__codelineno-40-7" name="__codelineno-40-7"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">xIsNext</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-40-8"><a id="__codelineno-40-8" name="__codelineno-40-8"></a><span class="w">      </span><span class="nx">nextSquares</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;X&quot;</span><span class="p">;</span>
</span><span id="__span-40-9"><a id="__codelineno-40-9" name="__codelineno-40-9"></a><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-40-10"><a id="__codelineno-40-10" name="__codelineno-40-10"></a><span class="w">      </span><span class="nx">nextSquares</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;O&quot;</span><span class="p">;</span>
</span><span id="__span-40-11"><a id="__codelineno-40-11" name="__codelineno-40-11"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-40-12"><a id="__codelineno-40-12" name="__codelineno-40-12"></a><span class="w">    </span><span class="nx">setSquares</span><span class="p">(</span><span class="nx">nextSquares</span><span class="p">);</span>
</span><span id="__span-40-13"><a id="__codelineno-40-13" name="__codelineno-40-13"></a><span class="w">    </span><span class="nx">setXIsNext</span><span class="p">(</span><span class="o">!</span><span class="nx">xIsNext</span><span class="p">);</span>
</span><span id="__span-40-14"><a id="__codelineno-40-14" name="__codelineno-40-14"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-40-15"><a id="__codelineno-40-15" name="__codelineno-40-15"></a>
</span><span id="__span-40-16"><a id="__codelineno-40-16" name="__codelineno-40-16"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-40-17"><a id="__codelineno-40-17" name="__codelineno-40-17"></a><span class="w">    </span><span class="c1">//...</span>
</span><span id="__span-40-18"><a id="__codelineno-40-18" name="__codelineno-40-18"></a><span class="w">  </span><span class="p">);</span>
</span><span id="__span-40-19"><a id="__codelineno-40-19" name="__codelineno-40-19"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<p>现在，当你点击不同的方块时，它们会在 <code>X</code> 和 <code>O</code> 之间交替，这是它们应该做的！</p>
<p>但是等等，有一个问题。尝试多次点击同一个方块：</p>
<p><img alt="" src="https://zh-hans.react.dev/images/tutorial/o-replaces-x.gif" /></p>
<p><code>X</code> 被 <code>O</code> 覆盖！虽然这会给游戏带来非常有趣的变化，但我们现在将坚持原来的规则。</p>
<p>当你用 <code>X</code> 或 <code>O</code> 标记方块时，你没有检查该方块是否已经具有 <code>X</code> 或 <code>O</code> 值。你可以通过提早返回来解决此问题。我们将检查方块是否已经有 <code>X</code> 或 <code>O</code>。如果方块已经填满，你将尽早在 <code>handleClick</code> 函数中 <code>return</code>——在它尝试更新棋盘 state 之前。</p>
<div class="language-jsx highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">App.js</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-41-1">1</a></span>
<span class="normal"><a href="#__codelineno-41-2">2</a></span>
<span class="normal"><a href="#__codelineno-41-3">3</a></span>
<span class="normal"><a href="#__codelineno-41-4">4</a></span>
<span class="normal"><a href="#__codelineno-41-5">5</a></span>
<span class="normal"><a href="#__codelineno-41-6">6</a></span>
<span class="normal"><a href="#__codelineno-41-7">7</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-41-1"><a id="__codelineno-41-1" name="__codelineno-41-1"></a><span class="kd">function</span><span class="w"> </span><span class="nx">handleClick</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-41-2"><a id="__codelineno-41-2" name="__codelineno-41-2"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">squares</span><span class="p">[</span><span class="nx">i</span><span class="p">])</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-41-3"><a id="__codelineno-41-3" name="__codelineno-41-3"></a><span class="w">    </span><span class="k">return</span><span class="p">;</span>
</span><span id="__span-41-4"><a id="__codelineno-41-4" name="__codelineno-41-4"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-41-5"><a id="__codelineno-41-5" name="__codelineno-41-5"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">nextSquares</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">squares</span><span class="p">.</span><span class="nx">slice</span><span class="p">();</span>
</span><span id="__span-41-6"><a id="__codelineno-41-6" name="__codelineno-41-6"></a><span class="w">  </span><span class="c1">//...</span>
</span><span id="__span-41-7"><a id="__codelineno-41-7" name="__codelineno-41-7"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<p>现在你只能将 X 或 O 添加到空方块中！此时你的代码应该如下所示：</p>
<div class="language-jsx highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-42-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-42-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-42-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-42-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-42-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-42-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-42-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-42-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-42-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-42-10">10</a></span>
<span class="normal"><a href="#__codelineno-42-11">11</a></span>
<span class="normal"><a href="#__codelineno-42-12">12</a></span>
<span class="normal"><a href="#__codelineno-42-13">13</a></span>
<span class="normal"><a href="#__codelineno-42-14">14</a></span>
<span class="normal"><a href="#__codelineno-42-15">15</a></span>
<span class="normal"><a href="#__codelineno-42-16">16</a></span>
<span class="normal"><a href="#__codelineno-42-17">17</a></span>
<span class="normal"><a href="#__codelineno-42-18">18</a></span>
<span class="normal"><a href="#__codelineno-42-19">19</a></span>
<span class="normal"><a href="#__codelineno-42-20">20</a></span>
<span class="normal"><a href="#__codelineno-42-21">21</a></span>
<span class="normal"><a href="#__codelineno-42-22">22</a></span>
<span class="normal"><a href="#__codelineno-42-23">23</a></span>
<span class="normal"><a href="#__codelineno-42-24">24</a></span>
<span class="normal"><a href="#__codelineno-42-25">25</a></span>
<span class="normal"><a href="#__codelineno-42-26">26</a></span>
<span class="normal"><a href="#__codelineno-42-27">27</a></span>
<span class="normal"><a href="#__codelineno-42-28">28</a></span>
<span class="normal"><a href="#__codelineno-42-29">29</a></span>
<span class="normal"><a href="#__codelineno-42-30">30</a></span>
<span class="normal"><a href="#__codelineno-42-31">31</a></span>
<span class="normal"><a href="#__codelineno-42-32">32</a></span>
<span class="normal"><a href="#__codelineno-42-33">33</a></span>
<span class="normal"><a href="#__codelineno-42-34">34</a></span>
<span class="normal"><a href="#__codelineno-42-35">35</a></span>
<span class="normal"><a href="#__codelineno-42-36">36</a></span>
<span class="normal"><a href="#__codelineno-42-37">37</a></span>
<span class="normal"><a href="#__codelineno-42-38">38</a></span>
<span class="normal"><a href="#__codelineno-42-39">39</a></span>
<span class="normal"><a href="#__codelineno-42-40">40</a></span>
<span class="normal"><a href="#__codelineno-42-41">41</a></span>
<span class="normal"><a href="#__codelineno-42-42">42</a></span>
<span class="normal"><a href="#__codelineno-42-43">43</a></span>
<span class="normal"><a href="#__codelineno-42-44">44</a></span>
<span class="normal"><a href="#__codelineno-42-45">45</a></span>
<span class="normal"><a href="#__codelineno-42-46">46</a></span>
<span class="normal"><a href="#__codelineno-42-47">47</a></span>
<span class="normal"><a href="#__codelineno-42-48">48</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-42-1"><a id="__codelineno-42-1" name="__codelineno-42-1"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">useState</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;react&#39;</span><span class="p">;</span>
</span><span id="__span-42-2"><a id="__codelineno-42-2" name="__codelineno-42-2"></a>
</span><span id="__span-42-3"><a id="__codelineno-42-3" name="__codelineno-42-3"></a><span class="kd">function</span><span class="w"> </span><span class="nx">Square</span><span class="p">({</span><span class="nx">value</span><span class="p">,</span><span class="w"> </span><span class="nx">onSquareClick</span><span class="p">})</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-42-4"><a id="__codelineno-42-4" name="__codelineno-42-4"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-42-5"><a id="__codelineno-42-5" name="__codelineno-42-5"></a><span class="w">    </span><span class="p">&lt;</span><span class="nt">button</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;square&quot;</span><span class="w"> </span><span class="na">onClick</span><span class="o">=</span><span class="p">{</span><span class="nx">onSquareClick</span><span class="p">}&gt;</span>
</span><span id="__span-42-6"><a id="__codelineno-42-6" name="__codelineno-42-6"></a><span class="w">      </span><span class="p">{</span><span class="nx">value</span><span class="p">}</span>
</span><span id="__span-42-7"><a id="__codelineno-42-7" name="__codelineno-42-7"></a><span class="w">    </span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span><span id="__span-42-8"><a id="__codelineno-42-8" name="__codelineno-42-8"></a><span class="w">  </span><span class="p">);</span>
</span><span id="__span-42-9"><a id="__codelineno-42-9" name="__codelineno-42-9"></a><span class="p">}</span>
</span><span id="__span-42-10"><a id="__codelineno-42-10" name="__codelineno-42-10"></a>
</span><span id="__span-42-11"><a id="__codelineno-42-11" name="__codelineno-42-11"></a><span class="k">export</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">Board</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-42-12"><a id="__codelineno-42-12" name="__codelineno-42-12"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">xIsNext</span><span class="p">,</span><span class="w"> </span><span class="nx">setXIsNext</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useState</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
</span><span id="__span-42-13"><a id="__codelineno-42-13" name="__codelineno-42-13"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">squares</span><span class="p">,</span><span class="w"> </span><span class="nx">setSquares</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useState</span><span class="p">(</span><span class="nb">Array</span><span class="p">(</span><span class="mf">9</span><span class="p">).</span><span class="nx">fill</span><span class="p">(</span><span class="kc">null</span><span class="p">));</span>
</span><span id="__span-42-14"><a id="__codelineno-42-14" name="__codelineno-42-14"></a>
</span><span id="__span-42-15"><a id="__codelineno-42-15" name="__codelineno-42-15"></a><span class="w">  </span><span class="kd">function</span><span class="w"> </span><span class="nx">handleClick</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-42-16"><a id="__codelineno-42-16" name="__codelineno-42-16"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">squares</span><span class="p">[</span><span class="nx">i</span><span class="p">])</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-42-17"><a id="__codelineno-42-17" name="__codelineno-42-17"></a><span class="w">      </span><span class="k">return</span><span class="p">;</span>
</span><span id="__span-42-18"><a id="__codelineno-42-18" name="__codelineno-42-18"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-42-19"><a id="__codelineno-42-19" name="__codelineno-42-19"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">nextSquares</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">squares</span><span class="p">.</span><span class="nx">slice</span><span class="p">();</span>
</span><span id="__span-42-20"><a id="__codelineno-42-20" name="__codelineno-42-20"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">xIsNext</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-42-21"><a id="__codelineno-42-21" name="__codelineno-42-21"></a><span class="w">      </span><span class="nx">nextSquares</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;X&#39;</span><span class="p">;</span>
</span><span id="__span-42-22"><a id="__codelineno-42-22" name="__codelineno-42-22"></a><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-42-23"><a id="__codelineno-42-23" name="__codelineno-42-23"></a><span class="w">      </span><span class="nx">nextSquares</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;O&#39;</span><span class="p">;</span>
</span><span id="__span-42-24"><a id="__codelineno-42-24" name="__codelineno-42-24"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-42-25"><a id="__codelineno-42-25" name="__codelineno-42-25"></a><span class="w">    </span><span class="nx">setSquares</span><span class="p">(</span><span class="nx">nextSquares</span><span class="p">);</span>
</span><span id="__span-42-26"><a id="__codelineno-42-26" name="__codelineno-42-26"></a><span class="w">    </span><span class="nx">setXIsNext</span><span class="p">(</span><span class="o">!</span><span class="nx">xIsNext</span><span class="p">);</span>
</span><span id="__span-42-27"><a id="__codelineno-42-27" name="__codelineno-42-27"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-42-28"><a id="__codelineno-42-28" name="__codelineno-42-28"></a>
</span><span id="__span-42-29"><a id="__codelineno-42-29" name="__codelineno-42-29"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-42-30"><a id="__codelineno-42-30" name="__codelineno-42-30"></a><span class="w">    </span><span class="p">&lt;&gt;</span>
</span><span id="__span-42-31"><a id="__codelineno-42-31" name="__codelineno-42-31"></a><span class="w">      </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;board-row&quot;</span><span class="p">&gt;</span>
</span><span id="__span-42-32"><a id="__codelineno-42-32" name="__codelineno-42-32"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">squares</span><span class="p">[</span><span class="mf">0</span><span class="p">]}</span><span class="w"> </span><span class="na">onSquareClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">handleClick</span><span class="p">(</span><span class="mf">0</span><span class="p">)}</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-42-33"><a id="__codelineno-42-33" name="__codelineno-42-33"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">squares</span><span class="p">[</span><span class="mf">1</span><span class="p">]}</span><span class="w"> </span><span class="na">onSquareClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">handleClick</span><span class="p">(</span><span class="mf">1</span><span class="p">)}</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-42-34"><a id="__codelineno-42-34" name="__codelineno-42-34"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">squares</span><span class="p">[</span><span class="mf">2</span><span class="p">]}</span><span class="w"> </span><span class="na">onSquareClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">handleClick</span><span class="p">(</span><span class="mf">2</span><span class="p">)}</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-42-35"><a id="__codelineno-42-35" name="__codelineno-42-35"></a><span class="w">      </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="__span-42-36"><a id="__codelineno-42-36" name="__codelineno-42-36"></a><span class="w">      </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;board-row&quot;</span><span class="p">&gt;</span>
</span><span id="__span-42-37"><a id="__codelineno-42-37" name="__codelineno-42-37"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">squares</span><span class="p">[</span><span class="mf">3</span><span class="p">]}</span><span class="w"> </span><span class="na">onSquareClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">handleClick</span><span class="p">(</span><span class="mf">3</span><span class="p">)}</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-42-38"><a id="__codelineno-42-38" name="__codelineno-42-38"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">squares</span><span class="p">[</span><span class="mf">4</span><span class="p">]}</span><span class="w"> </span><span class="na">onSquareClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">handleClick</span><span class="p">(</span><span class="mf">4</span><span class="p">)}</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-42-39"><a id="__codelineno-42-39" name="__codelineno-42-39"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">squares</span><span class="p">[</span><span class="mf">5</span><span class="p">]}</span><span class="w"> </span><span class="na">onSquareClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">handleClick</span><span class="p">(</span><span class="mf">5</span><span class="p">)}</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-42-40"><a id="__codelineno-42-40" name="__codelineno-42-40"></a><span class="w">      </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="__span-42-41"><a id="__codelineno-42-41" name="__codelineno-42-41"></a><span class="w">      </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;board-row&quot;</span><span class="p">&gt;</span>
</span><span id="__span-42-42"><a id="__codelineno-42-42" name="__codelineno-42-42"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">squares</span><span class="p">[</span><span class="mf">6</span><span class="p">]}</span><span class="w"> </span><span class="na">onSquareClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">handleClick</span><span class="p">(</span><span class="mf">6</span><span class="p">)}</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-42-43"><a id="__codelineno-42-43" name="__codelineno-42-43"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">squares</span><span class="p">[</span><span class="mf">7</span><span class="p">]}</span><span class="w"> </span><span class="na">onSquareClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">handleClick</span><span class="p">(</span><span class="mf">7</span><span class="p">)}</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-42-44"><a id="__codelineno-42-44" name="__codelineno-42-44"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">squares</span><span class="p">[</span><span class="mf">8</span><span class="p">]}</span><span class="w"> </span><span class="na">onSquareClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">handleClick</span><span class="p">(</span><span class="mf">8</span><span class="p">)}</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-42-45"><a id="__codelineno-42-45" name="__codelineno-42-45"></a><span class="w">      </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="__span-42-46"><a id="__codelineno-42-46" name="__codelineno-42-46"></a><span class="w">    </span><span class="p">&lt;/&gt;</span>
</span><span id="__span-42-47"><a id="__codelineno-42-47" name="__codelineno-42-47"></a><span class="w">  </span><span class="p">);</span>
</span><span id="__span-42-48"><a id="__codelineno-42-48" name="__codelineno-42-48"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<h3 id="34">3.4 宣布获胜者<a class="headerlink" href="#34" title="Permanent link">&para;</a></h3>
<p>现在你可以轮流对战了，接下来我们应该显示游戏何时获胜。为此，你将添加一个名为 <code>calculateWinner</code> 的辅助函数，它接受 9 个方块的数组，检查获胜者并根据需要返回 <code>'X'</code>、<code>'O'</code> 或 <code>null</code>。不要太担心 <code>calculateWinner</code> 函数；它不是 React 才会有的：</p>
<div class="language-jsx highlight"><pre><span></span><code><span id="__span-43-1"><a id="__codelineno-43-1" name="__codelineno-43-1" href="#__codelineno-43-1"></a><span class="k">export</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">Board</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-43-2"><a id="__codelineno-43-2" name="__codelineno-43-2" href="#__codelineno-43-2"></a><span class="w">  </span><span class="c1">//...</span>
</span><span id="__span-43-3"><a id="__codelineno-43-3" name="__codelineno-43-3" href="#__codelineno-43-3"></a><span class="p">}</span>
</span><span id="__span-43-4"><a id="__codelineno-43-4" name="__codelineno-43-4" href="#__codelineno-43-4"></a>
</span><span id="__span-43-5"><a id="__codelineno-43-5" name="__codelineno-43-5" href="#__codelineno-43-5"></a><span class="kd">function</span><span class="w"> </span><span class="nx">calculateWinner</span><span class="p">(</span><span class="nx">squares</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-43-6"><a id="__codelineno-43-6" name="__codelineno-43-6" href="#__codelineno-43-6"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">lines</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
</span><span id="__span-43-7"><a id="__codelineno-43-7" name="__codelineno-43-7" href="#__codelineno-43-7"></a><span class="w">    </span><span class="p">[</span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">2</span><span class="p">],</span>
</span><span id="__span-43-8"><a id="__codelineno-43-8" name="__codelineno-43-8" href="#__codelineno-43-8"></a><span class="w">    </span><span class="p">[</span><span class="mf">3</span><span class="p">,</span><span class="w"> </span><span class="mf">4</span><span class="p">,</span><span class="w"> </span><span class="mf">5</span><span class="p">],</span>
</span><span id="__span-43-9"><a id="__codelineno-43-9" name="__codelineno-43-9" href="#__codelineno-43-9"></a><span class="w">    </span><span class="p">[</span><span class="mf">6</span><span class="p">,</span><span class="w"> </span><span class="mf">7</span><span class="p">,</span><span class="w"> </span><span class="mf">8</span><span class="p">],</span>
</span><span id="__span-43-10"><a id="__codelineno-43-10" name="__codelineno-43-10" href="#__codelineno-43-10"></a><span class="w">    </span><span class="p">[</span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">3</span><span class="p">,</span><span class="w"> </span><span class="mf">6</span><span class="p">],</span>
</span><span id="__span-43-11"><a id="__codelineno-43-11" name="__codelineno-43-11" href="#__codelineno-43-11"></a><span class="w">    </span><span class="p">[</span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">4</span><span class="p">,</span><span class="w"> </span><span class="mf">7</span><span class="p">],</span>
</span><span id="__span-43-12"><a id="__codelineno-43-12" name="__codelineno-43-12" href="#__codelineno-43-12"></a><span class="w">    </span><span class="p">[</span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="mf">5</span><span class="p">,</span><span class="w"> </span><span class="mf">8</span><span class="p">],</span>
</span><span id="__span-43-13"><a id="__codelineno-43-13" name="__codelineno-43-13" href="#__codelineno-43-13"></a><span class="w">    </span><span class="p">[</span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">4</span><span class="p">,</span><span class="w"> </span><span class="mf">8</span><span class="p">],</span>
</span><span id="__span-43-14"><a id="__codelineno-43-14" name="__codelineno-43-14" href="#__codelineno-43-14"></a><span class="w">    </span><span class="p">[</span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="mf">4</span><span class="p">,</span><span class="w"> </span><span class="mf">6</span><span class="p">]</span>
</span><span id="__span-43-15"><a id="__codelineno-43-15" name="__codelineno-43-15" href="#__codelineno-43-15"></a><span class="w">  </span><span class="p">];</span>
</span><span id="__span-43-16"><a id="__codelineno-43-16" name="__codelineno-43-16" href="#__codelineno-43-16"></a><span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">let</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="nx">lines</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-43-17"><a id="__codelineno-43-17" name="__codelineno-43-17" href="#__codelineno-43-17"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">a</span><span class="p">,</span><span class="w"> </span><span class="nx">b</span><span class="p">,</span><span class="w"> </span><span class="nx">c</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">lines</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
</span><span id="__span-43-18"><a id="__codelineno-43-18" name="__codelineno-43-18" href="#__codelineno-43-18"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">squares</span><span class="p">[</span><span class="nx">a</span><span class="p">]</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nx">squares</span><span class="p">[</span><span class="nx">a</span><span class="p">]</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="nx">squares</span><span class="p">[</span><span class="nx">b</span><span class="p">]</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nx">squares</span><span class="p">[</span><span class="nx">a</span><span class="p">]</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="nx">squares</span><span class="p">[</span><span class="nx">c</span><span class="p">])</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-43-19"><a id="__codelineno-43-19" name="__codelineno-43-19" href="#__codelineno-43-19"></a><span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="nx">squares</span><span class="p">[</span><span class="nx">a</span><span class="p">];</span>
</span><span id="__span-43-20"><a id="__codelineno-43-20" name="__codelineno-43-20" href="#__codelineno-43-20"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-43-21"><a id="__codelineno-43-21" name="__codelineno-43-21" href="#__codelineno-43-21"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-43-22"><a id="__codelineno-43-22" name="__codelineno-43-22" href="#__codelineno-43-22"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="kc">null</span><span class="p">;</span>
</span><span id="__span-43-23"><a id="__codelineno-43-23" name="__codelineno-43-23" href="#__codelineno-43-23"></a><span class="p">}</span>
</span></code></pre></div>
<div class="admonition warning">
<p class="admonition-title">注意</p>
<p>在 <code>Board</code> 之前还是之后定义 <code>calculateWinner</code> 并不重要。让我们把它放在最后，这样你就不必在每次编辑组件时都滚动过去。</p>
</div>
<p>你将在 <code>Board</code> 组件的 <code>handleClick</code> 函数中调用 <code>calculateWinner(squares)</code> 来检查玩家是否获胜。你可以在检查用户是否单击了已经具有 <code>X</code> 或 <code>O</code> 的方块的同时执行此检查。在这两种情况下，我们都希望尽早返回：</p>
<div class="language-jsx highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-44-1">1</a></span>
<span class="normal"><a href="#__codelineno-44-2">2</a></span>
<span class="normal"><a href="#__codelineno-44-3">3</a></span>
<span class="normal"><a href="#__codelineno-44-4">4</a></span>
<span class="normal"><a href="#__codelineno-44-5">5</a></span>
<span class="normal"><a href="#__codelineno-44-6">6</a></span>
<span class="normal"><a href="#__codelineno-44-7">7</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-44-1"><a id="__codelineno-44-1" name="__codelineno-44-1"></a><span class="kd">function</span><span class="w"> </span><span class="nx">handleClick</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-44-2"><a id="__codelineno-44-2" name="__codelineno-44-2"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">squares</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nx">calculateWinner</span><span class="p">(</span><span class="nx">squares</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-44-3"><a id="__codelineno-44-3" name="__codelineno-44-3"></a><span class="w">    </span><span class="k">return</span><span class="p">;</span>
</span><span id="__span-44-4"><a id="__codelineno-44-4" name="__codelineno-44-4"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-44-5"><a id="__codelineno-44-5" name="__codelineno-44-5"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">nextSquares</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">squares</span><span class="p">.</span><span class="nx">slice</span><span class="p">();</span>
</span><span id="__span-44-6"><a id="__codelineno-44-6" name="__codelineno-44-6"></a><span class="w">  </span><span class="c1">//...</span>
</span><span id="__span-44-7"><a id="__codelineno-44-7" name="__codelineno-44-7"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<p>为了让玩家知道游戏何时结束，你可以显示“获胜者：X”或“获胜者：O”等文字。为此，你需要将 <code>status</code> 部分添加到 <code>Board</code> 组件。如果游戏结束，将显示获胜者，如果游戏正在进行，你将显示下一轮将会是哪个玩家：</p>
<div class="language-jsx highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-45-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-45-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-45-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-45-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-45-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-45-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-45-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-45-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-45-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-45-10">10</a></span>
<span class="normal"><a href="#__codelineno-45-11">11</a></span>
<span class="normal"><a href="#__codelineno-45-12">12</a></span>
<span class="normal"><a href="#__codelineno-45-13">13</a></span>
<span class="normal"><a href="#__codelineno-45-14">14</a></span>
<span class="normal"><a href="#__codelineno-45-15">15</a></span>
<span class="normal"><a href="#__codelineno-45-16">16</a></span>
<span class="normal"><a href="#__codelineno-45-17">17</a></span>
<span class="normal"><a href="#__codelineno-45-18">18</a></span>
<span class="normal"><a href="#__codelineno-45-19">19</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-45-1"><a id="__codelineno-45-1" name="__codelineno-45-1"></a><span class="k">export</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">Board</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-45-2"><a id="__codelineno-45-2" name="__codelineno-45-2"></a><span class="w">  </span><span class="c1">// ...</span>
</span><span id="__span-45-3"><a id="__codelineno-45-3" name="__codelineno-45-3"></a><span class="hll"><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">winner</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">calculateWinner</span><span class="p">(</span><span class="nx">squares</span><span class="p">);</span>
</span></span><span id="__span-45-4"><a id="__codelineno-45-4" name="__codelineno-45-4"></a><span class="hll"><span class="w">  </span><span class="kd">let</span><span class="w"> </span><span class="nx">status</span><span class="p">;</span>
</span></span><span id="__span-45-5"><a id="__codelineno-45-5" name="__codelineno-45-5"></a><span class="hll"><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">winner</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span></span><span id="__span-45-6"><a id="__codelineno-45-6" name="__codelineno-45-6"></a><span class="hll"><span class="w">    </span><span class="nx">status</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;Winner: &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">winner</span><span class="p">;</span>
</span></span><span id="__span-45-7"><a id="__codelineno-45-7" name="__codelineno-45-7"></a><span class="hll"><span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
</span></span><span id="__span-45-8"><a id="__codelineno-45-8" name="__codelineno-45-8"></a><span class="hll"><span class="w">    </span><span class="nx">status</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;Next player: &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="p">(</span><span class="nx">xIsNext</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="s2">&quot;X&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;O&quot;</span><span class="p">);</span>
</span></span><span id="__span-45-9"><a id="__codelineno-45-9" name="__codelineno-45-9"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-45-10"><a id="__codelineno-45-10" name="__codelineno-45-10"></a>
</span><span id="__span-45-11"><a id="__codelineno-45-11" name="__codelineno-45-11"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-45-12"><a id="__codelineno-45-12" name="__codelineno-45-12"></a><span class="w">    </span><span class="p">&lt;&gt;</span>
</span><span id="__span-45-13"><a id="__codelineno-45-13" name="__codelineno-45-13"></a><span class="w">      </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;status&quot;</span><span class="p">&gt;{</span><span class="nx">status</span><span class="p">}&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="__span-45-14"><a id="__codelineno-45-14" name="__codelineno-45-14"></a><span class="w">      </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;board-row&quot;</span><span class="p">&gt;</span>
</span><span id="__span-45-15"><a id="__codelineno-45-15" name="__codelineno-45-15"></a><span class="w">        </span><span class="c1">// ...</span>
</span><span id="__span-45-16"><a id="__codelineno-45-16" name="__codelineno-45-16"></a><span class="w">      </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="__span-45-17"><a id="__codelineno-45-17" name="__codelineno-45-17"></a><span class="w">    </span><span class="p">&lt;/&gt;</span>
</span><span id="__span-45-18"><a id="__codelineno-45-18" name="__codelineno-45-18"></a><span class="w">  </span><span class="p">)</span>
</span><span id="__span-45-19"><a id="__codelineno-45-19" name="__codelineno-45-19"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<p>恭喜！你现在有一个可以运行的井字棋游戏。你也学习了 React 的基础知识。所以你是这里真正的赢家。代码应该如下所示：</p>
<div class="language-jsx highlight"><span class="filename">App.js</span><pre><span></span><code><span id="__span-46-1"><a id="__codelineno-46-1" name="__codelineno-46-1" href="#__codelineno-46-1"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">useState</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;react&#39;</span><span class="p">;</span>
</span><span id="__span-46-2"><a id="__codelineno-46-2" name="__codelineno-46-2" href="#__codelineno-46-2"></a>
</span><span id="__span-46-3"><a id="__codelineno-46-3" name="__codelineno-46-3" href="#__codelineno-46-3"></a><span class="kd">function</span><span class="w"> </span><span class="nx">Square</span><span class="p">({</span><span class="nx">value</span><span class="p">,</span><span class="w"> </span><span class="nx">onSquareClick</span><span class="p">})</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-46-4"><a id="__codelineno-46-4" name="__codelineno-46-4" href="#__codelineno-46-4"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-46-5"><a id="__codelineno-46-5" name="__codelineno-46-5" href="#__codelineno-46-5"></a><span class="w">    </span><span class="p">&lt;</span><span class="nt">button</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;square&quot;</span><span class="w"> </span><span class="na">onClick</span><span class="o">=</span><span class="p">{</span><span class="nx">onSquareClick</span><span class="p">}&gt;</span>
</span><span id="__span-46-6"><a id="__codelineno-46-6" name="__codelineno-46-6" href="#__codelineno-46-6"></a><span class="w">      </span><span class="p">{</span><span class="nx">value</span><span class="p">}</span>
</span><span id="__span-46-7"><a id="__codelineno-46-7" name="__codelineno-46-7" href="#__codelineno-46-7"></a><span class="w">    </span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span><span id="__span-46-8"><a id="__codelineno-46-8" name="__codelineno-46-8" href="#__codelineno-46-8"></a><span class="w">  </span><span class="p">);</span>
</span><span id="__span-46-9"><a id="__codelineno-46-9" name="__codelineno-46-9" href="#__codelineno-46-9"></a><span class="p">}</span>
</span><span id="__span-46-10"><a id="__codelineno-46-10" name="__codelineno-46-10" href="#__codelineno-46-10"></a>
</span><span id="__span-46-11"><a id="__codelineno-46-11" name="__codelineno-46-11" href="#__codelineno-46-11"></a><span class="k">export</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">Board</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-46-12"><a id="__codelineno-46-12" name="__codelineno-46-12" href="#__codelineno-46-12"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">xIsNext</span><span class="p">,</span><span class="w"> </span><span class="nx">setXIsNext</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useState</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
</span><span id="__span-46-13"><a id="__codelineno-46-13" name="__codelineno-46-13" href="#__codelineno-46-13"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">squares</span><span class="p">,</span><span class="w"> </span><span class="nx">setSquares</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useState</span><span class="p">(</span><span class="nb">Array</span><span class="p">(</span><span class="mf">9</span><span class="p">).</span><span class="nx">fill</span><span class="p">(</span><span class="kc">null</span><span class="p">));</span>
</span><span id="__span-46-14"><a id="__codelineno-46-14" name="__codelineno-46-14" href="#__codelineno-46-14"></a>
</span><span id="__span-46-15"><a id="__codelineno-46-15" name="__codelineno-46-15" href="#__codelineno-46-15"></a><span class="w">  </span><span class="kd">function</span><span class="w"> </span><span class="nx">handleClick</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-46-16"><a id="__codelineno-46-16" name="__codelineno-46-16" href="#__codelineno-46-16"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">calculateWinner</span><span class="p">(</span><span class="nx">squares</span><span class="p">)</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nx">squares</span><span class="p">[</span><span class="nx">i</span><span class="p">])</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-46-17"><a id="__codelineno-46-17" name="__codelineno-46-17" href="#__codelineno-46-17"></a><span class="w">      </span><span class="k">return</span><span class="p">;</span>
</span><span id="__span-46-18"><a id="__codelineno-46-18" name="__codelineno-46-18" href="#__codelineno-46-18"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-46-19"><a id="__codelineno-46-19" name="__codelineno-46-19" href="#__codelineno-46-19"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">nextSquares</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">squares</span><span class="p">.</span><span class="nx">slice</span><span class="p">();</span>
</span><span id="__span-46-20"><a id="__codelineno-46-20" name="__codelineno-46-20" href="#__codelineno-46-20"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">xIsNext</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-46-21"><a id="__codelineno-46-21" name="__codelineno-46-21" href="#__codelineno-46-21"></a><span class="w">      </span><span class="nx">nextSquares</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;X&#39;</span><span class="p">;</span>
</span><span id="__span-46-22"><a id="__codelineno-46-22" name="__codelineno-46-22" href="#__codelineno-46-22"></a><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-46-23"><a id="__codelineno-46-23" name="__codelineno-46-23" href="#__codelineno-46-23"></a><span class="w">      </span><span class="nx">nextSquares</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;O&#39;</span><span class="p">;</span>
</span><span id="__span-46-24"><a id="__codelineno-46-24" name="__codelineno-46-24" href="#__codelineno-46-24"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-46-25"><a id="__codelineno-46-25" name="__codelineno-46-25" href="#__codelineno-46-25"></a><span class="w">    </span><span class="nx">setSquares</span><span class="p">(</span><span class="nx">nextSquares</span><span class="p">);</span>
</span><span id="__span-46-26"><a id="__codelineno-46-26" name="__codelineno-46-26" href="#__codelineno-46-26"></a><span class="w">    </span><span class="nx">setXIsNext</span><span class="p">(</span><span class="o">!</span><span class="nx">xIsNext</span><span class="p">);</span>
</span><span id="__span-46-27"><a id="__codelineno-46-27" name="__codelineno-46-27" href="#__codelineno-46-27"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-46-28"><a id="__codelineno-46-28" name="__codelineno-46-28" href="#__codelineno-46-28"></a>
</span><span id="__span-46-29"><a id="__codelineno-46-29" name="__codelineno-46-29" href="#__codelineno-46-29"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">winner</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">calculateWinner</span><span class="p">(</span><span class="nx">squares</span><span class="p">);</span>
</span><span id="__span-46-30"><a id="__codelineno-46-30" name="__codelineno-46-30" href="#__codelineno-46-30"></a><span class="w">  </span><span class="kd">let</span><span class="w"> </span><span class="nx">status</span><span class="p">;</span>
</span><span id="__span-46-31"><a id="__codelineno-46-31" name="__codelineno-46-31" href="#__codelineno-46-31"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">winner</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-46-32"><a id="__codelineno-46-32" name="__codelineno-46-32" href="#__codelineno-46-32"></a><span class="w">    </span><span class="nx">status</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;Winner: &#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">winner</span><span class="p">;</span>
</span><span id="__span-46-33"><a id="__codelineno-46-33" name="__codelineno-46-33" href="#__codelineno-46-33"></a><span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-46-34"><a id="__codelineno-46-34" name="__codelineno-46-34" href="#__codelineno-46-34"></a><span class="w">    </span><span class="nx">status</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;Next player: &#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="p">(</span><span class="nx">xIsNext</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="s1">&#39;X&#39;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;O&#39;</span><span class="p">);</span>
</span><span id="__span-46-35"><a id="__codelineno-46-35" name="__codelineno-46-35" href="#__codelineno-46-35"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-46-36"><a id="__codelineno-46-36" name="__codelineno-46-36" href="#__codelineno-46-36"></a>
</span><span id="__span-46-37"><a id="__codelineno-46-37" name="__codelineno-46-37" href="#__codelineno-46-37"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-46-38"><a id="__codelineno-46-38" name="__codelineno-46-38" href="#__codelineno-46-38"></a><span class="w">    </span><span class="p">&lt;&gt;</span>
</span><span id="__span-46-39"><a id="__codelineno-46-39" name="__codelineno-46-39" href="#__codelineno-46-39"></a><span class="w">      </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;status&quot;</span><span class="p">&gt;{</span><span class="nx">status</span><span class="p">}&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="__span-46-40"><a id="__codelineno-46-40" name="__codelineno-46-40" href="#__codelineno-46-40"></a><span class="w">      </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;board-row&quot;</span><span class="p">&gt;</span>
</span><span id="__span-46-41"><a id="__codelineno-46-41" name="__codelineno-46-41" href="#__codelineno-46-41"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">squares</span><span class="p">[</span><span class="mf">0</span><span class="p">]}</span><span class="w"> </span><span class="na">onSquareClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">handleClick</span><span class="p">(</span><span class="mf">0</span><span class="p">)}</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-46-42"><a id="__codelineno-46-42" name="__codelineno-46-42" href="#__codelineno-46-42"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">squares</span><span class="p">[</span><span class="mf">1</span><span class="p">]}</span><span class="w"> </span><span class="na">onSquareClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">handleClick</span><span class="p">(</span><span class="mf">1</span><span class="p">)}</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-46-43"><a id="__codelineno-46-43" name="__codelineno-46-43" href="#__codelineno-46-43"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">squares</span><span class="p">[</span><span class="mf">2</span><span class="p">]}</span><span class="w"> </span><span class="na">onSquareClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">handleClick</span><span class="p">(</span><span class="mf">2</span><span class="p">)}</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-46-44"><a id="__codelineno-46-44" name="__codelineno-46-44" href="#__codelineno-46-44"></a><span class="w">      </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="__span-46-45"><a id="__codelineno-46-45" name="__codelineno-46-45" href="#__codelineno-46-45"></a><span class="w">      </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;board-row&quot;</span><span class="p">&gt;</span>
</span><span id="__span-46-46"><a id="__codelineno-46-46" name="__codelineno-46-46" href="#__codelineno-46-46"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">squares</span><span class="p">[</span><span class="mf">3</span><span class="p">]}</span><span class="w"> </span><span class="na">onSquareClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">handleClick</span><span class="p">(</span><span class="mf">3</span><span class="p">)}</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-46-47"><a id="__codelineno-46-47" name="__codelineno-46-47" href="#__codelineno-46-47"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">squares</span><span class="p">[</span><span class="mf">4</span><span class="p">]}</span><span class="w"> </span><span class="na">onSquareClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">handleClick</span><span class="p">(</span><span class="mf">4</span><span class="p">)}</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-46-48"><a id="__codelineno-46-48" name="__codelineno-46-48" href="#__codelineno-46-48"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">squares</span><span class="p">[</span><span class="mf">5</span><span class="p">]}</span><span class="w"> </span><span class="na">onSquareClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">handleClick</span><span class="p">(</span><span class="mf">5</span><span class="p">)}</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-46-49"><a id="__codelineno-46-49" name="__codelineno-46-49" href="#__codelineno-46-49"></a><span class="w">      </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="__span-46-50"><a id="__codelineno-46-50" name="__codelineno-46-50" href="#__codelineno-46-50"></a><span class="w">      </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;board-row&quot;</span><span class="p">&gt;</span>
</span><span id="__span-46-51"><a id="__codelineno-46-51" name="__codelineno-46-51" href="#__codelineno-46-51"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">squares</span><span class="p">[</span><span class="mf">6</span><span class="p">]}</span><span class="w"> </span><span class="na">onSquareClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">handleClick</span><span class="p">(</span><span class="mf">6</span><span class="p">)}</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-46-52"><a id="__codelineno-46-52" name="__codelineno-46-52" href="#__codelineno-46-52"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">squares</span><span class="p">[</span><span class="mf">7</span><span class="p">]}</span><span class="w"> </span><span class="na">onSquareClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">handleClick</span><span class="p">(</span><span class="mf">7</span><span class="p">)}</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-46-53"><a id="__codelineno-46-53" name="__codelineno-46-53" href="#__codelineno-46-53"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">squares</span><span class="p">[</span><span class="mf">8</span><span class="p">]}</span><span class="w"> </span><span class="na">onSquareClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">handleClick</span><span class="p">(</span><span class="mf">8</span><span class="p">)}</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-46-54"><a id="__codelineno-46-54" name="__codelineno-46-54" href="#__codelineno-46-54"></a><span class="w">      </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="__span-46-55"><a id="__codelineno-46-55" name="__codelineno-46-55" href="#__codelineno-46-55"></a><span class="w">    </span><span class="p">&lt;/&gt;</span>
</span><span id="__span-46-56"><a id="__codelineno-46-56" name="__codelineno-46-56" href="#__codelineno-46-56"></a><span class="w">  </span><span class="p">);</span>
</span><span id="__span-46-57"><a id="__codelineno-46-57" name="__codelineno-46-57" href="#__codelineno-46-57"></a><span class="p">}</span>
</span><span id="__span-46-58"><a id="__codelineno-46-58" name="__codelineno-46-58" href="#__codelineno-46-58"></a>
</span><span id="__span-46-59"><a id="__codelineno-46-59" name="__codelineno-46-59" href="#__codelineno-46-59"></a><span class="kd">function</span><span class="w"> </span><span class="nx">calculateWinner</span><span class="p">(</span><span class="nx">squares</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-46-60"><a id="__codelineno-46-60" name="__codelineno-46-60" href="#__codelineno-46-60"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">lines</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
</span><span id="__span-46-61"><a id="__codelineno-46-61" name="__codelineno-46-61" href="#__codelineno-46-61"></a><span class="w">    </span><span class="p">[</span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">2</span><span class="p">],</span>
</span><span id="__span-46-62"><a id="__codelineno-46-62" name="__codelineno-46-62" href="#__codelineno-46-62"></a><span class="w">    </span><span class="p">[</span><span class="mf">3</span><span class="p">,</span><span class="w"> </span><span class="mf">4</span><span class="p">,</span><span class="w"> </span><span class="mf">5</span><span class="p">],</span>
</span><span id="__span-46-63"><a id="__codelineno-46-63" name="__codelineno-46-63" href="#__codelineno-46-63"></a><span class="w">    </span><span class="p">[</span><span class="mf">6</span><span class="p">,</span><span class="w"> </span><span class="mf">7</span><span class="p">,</span><span class="w"> </span><span class="mf">8</span><span class="p">],</span>
</span><span id="__span-46-64"><a id="__codelineno-46-64" name="__codelineno-46-64" href="#__codelineno-46-64"></a><span class="w">    </span><span class="p">[</span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">3</span><span class="p">,</span><span class="w"> </span><span class="mf">6</span><span class="p">],</span>
</span><span id="__span-46-65"><a id="__codelineno-46-65" name="__codelineno-46-65" href="#__codelineno-46-65"></a><span class="w">    </span><span class="p">[</span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">4</span><span class="p">,</span><span class="w"> </span><span class="mf">7</span><span class="p">],</span>
</span><span id="__span-46-66"><a id="__codelineno-46-66" name="__codelineno-46-66" href="#__codelineno-46-66"></a><span class="w">    </span><span class="p">[</span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="mf">5</span><span class="p">,</span><span class="w"> </span><span class="mf">8</span><span class="p">],</span>
</span><span id="__span-46-67"><a id="__codelineno-46-67" name="__codelineno-46-67" href="#__codelineno-46-67"></a><span class="w">    </span><span class="p">[</span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">4</span><span class="p">,</span><span class="w"> </span><span class="mf">8</span><span class="p">],</span>
</span><span id="__span-46-68"><a id="__codelineno-46-68" name="__codelineno-46-68" href="#__codelineno-46-68"></a><span class="w">    </span><span class="p">[</span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="mf">4</span><span class="p">,</span><span class="w"> </span><span class="mf">6</span><span class="p">],</span>
</span><span id="__span-46-69"><a id="__codelineno-46-69" name="__codelineno-46-69" href="#__codelineno-46-69"></a><span class="w">  </span><span class="p">];</span>
</span><span id="__span-46-70"><a id="__codelineno-46-70" name="__codelineno-46-70" href="#__codelineno-46-70"></a><span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">let</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="nx">lines</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-46-71"><a id="__codelineno-46-71" name="__codelineno-46-71" href="#__codelineno-46-71"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">a</span><span class="p">,</span><span class="w"> </span><span class="nx">b</span><span class="p">,</span><span class="w"> </span><span class="nx">c</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">lines</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
</span><span id="__span-46-72"><a id="__codelineno-46-72" name="__codelineno-46-72" href="#__codelineno-46-72"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">squares</span><span class="p">[</span><span class="nx">a</span><span class="p">]</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nx">squares</span><span class="p">[</span><span class="nx">a</span><span class="p">]</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="nx">squares</span><span class="p">[</span><span class="nx">b</span><span class="p">]</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nx">squares</span><span class="p">[</span><span class="nx">a</span><span class="p">]</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="nx">squares</span><span class="p">[</span><span class="nx">c</span><span class="p">])</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-46-73"><a id="__codelineno-46-73" name="__codelineno-46-73" href="#__codelineno-46-73"></a><span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="nx">squares</span><span class="p">[</span><span class="nx">a</span><span class="p">];</span>
</span><span id="__span-46-74"><a id="__codelineno-46-74" name="__codelineno-46-74" href="#__codelineno-46-74"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-46-75"><a id="__codelineno-46-75" name="__codelineno-46-75" href="#__codelineno-46-75"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-46-76"><a id="__codelineno-46-76" name="__codelineno-46-76" href="#__codelineno-46-76"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="kc">null</span><span class="p">;</span>
</span><span id="__span-46-77"><a id="__codelineno-46-77" name="__codelineno-46-77" href="#__codelineno-46-77"></a><span class="p">}</span>
</span></code></pre></div>
<h2 id="4">4. 添加时间旅行<a class="headerlink" href="#4" title="Permanent link">&para;</a></h2>
<p>作为最后的练习，让我们能够“回到”到游戏中之前的动作。</p>
<h3 id="41">4.1 存储落子历史<a class="headerlink" href="#41" title="Permanent link">&para;</a></h3>
<p>如果你改变了 <code>squares</code> 数组，实现时间旅行将非常困难。</p>
<p>但是，你在每次落子后都使用 <code>slice()</code> 创建 <code>squares</code> 数组的新副本，并将其视为不可变的。这将允许你存储 <code>squares</code> 数组的每个过去的版本，并在已经发生的轮次之间“来回”。</p>
<p>把过去的 <code>squares</code> 数组存储在另一个名为 <code>history</code> 的数组中，把它存储为一个新的 state 变量。<code>history</code> 数组表示所有棋盘的 state，从第一步到最后一步，其形状如下：</p>
<div class="language-jsx highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-47-1">1</a></span>
<span class="normal"><a href="#__codelineno-47-2">2</a></span>
<span class="normal"><a href="#__codelineno-47-3">3</a></span>
<span class="normal"><a href="#__codelineno-47-4">4</a></span>
<span class="normal"><a href="#__codelineno-47-5">5</a></span>
<span class="normal"><a href="#__codelineno-47-6">6</a></span>
<span class="normal"><a href="#__codelineno-47-7">7</a></span>
<span class="normal"><a href="#__codelineno-47-8">8</a></span>
<span class="normal"><a href="#__codelineno-47-9">9</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-47-1"><a id="__codelineno-47-1" name="__codelineno-47-1"></a><span class="p">[</span>
</span><span id="__span-47-2"><a id="__codelineno-47-2" name="__codelineno-47-2"></a><span class="w">  </span><span class="c1">// Before first move</span>
</span><span id="__span-47-3"><a id="__codelineno-47-3" name="__codelineno-47-3"></a><span class="w">  </span><span class="p">[</span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="kc">null</span><span class="p">],</span>
</span><span id="__span-47-4"><a id="__codelineno-47-4" name="__codelineno-47-4"></a><span class="w">  </span><span class="c1">// After first move</span>
</span><span id="__span-47-5"><a id="__codelineno-47-5" name="__codelineno-47-5"></a><span class="w">  </span><span class="p">[</span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;X&#39;</span><span class="p">,</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="kc">null</span><span class="p">],</span>
</span><span id="__span-47-6"><a id="__codelineno-47-6" name="__codelineno-47-6"></a><span class="w">  </span><span class="c1">// After second move</span>
</span><span id="__span-47-7"><a id="__codelineno-47-7" name="__codelineno-47-7"></a><span class="w">  </span><span class="p">[</span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;X&#39;</span><span class="p">,</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;O&#39;</span><span class="p">],</span>
</span><span id="__span-47-8"><a id="__codelineno-47-8" name="__codelineno-47-8"></a><span class="w">  </span><span class="c1">// ...</span>
</span><span id="__span-47-9"><a id="__codelineno-47-9" name="__codelineno-47-9"></a><span class="p">]</span>
</span></code></pre></div></td></tr></table></div>
<h3 id="42">4.2 再一次“状态提升”<a class="headerlink" href="#42" title="Permanent link">&para;</a></h3>
<p>你现在将编写一个名为 <code>Game</code> 的新顶级组件来显示过去的着法列表。这就是放置包含整个游戏历史的 <code>history</code> state 的地方。</p>
<p>将 <code>history</code> state 放入 <code>Game</code> 组件将使你可以从其 <code>Board</code> 子组件中删除 <code>squares</code> state。就像你将 state 从 <code>Square</code> 组件“提升”到 <code>Board</code> 组件一样，你现在将把它从 <code>Board</code> 提升到顶层 <code>Game</code> 组件。这使 <code>Game</code> 组件可以完全控制 <code>Board</code> 的数据，并使它让 <code>Board</code> 渲染来自 <code>history</code> 的之前的回合。</p>
<p>首先，添加一个带有 <code>export default</code> 的 <code>Game</code> 组件。让它渲染 <code>Board</code> 组件和一些标签：</p>
<div class="language-jsx highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-48-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-48-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-48-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-48-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-48-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-48-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-48-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-48-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-48-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-48-10">10</a></span>
<span class="normal"><a href="#__codelineno-48-11">11</a></span>
<span class="normal"><a href="#__codelineno-48-12">12</a></span>
<span class="normal"><a href="#__codelineno-48-13">13</a></span>
<span class="normal"><a href="#__codelineno-48-14">14</a></span>
<span class="normal"><a href="#__codelineno-48-15">15</a></span>
<span class="normal"><a href="#__codelineno-48-16">16</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-48-1"><a id="__codelineno-48-1" name="__codelineno-48-1"></a><span class="kd">function</span><span class="w"> </span><span class="nx">Board</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-48-2"><a id="__codelineno-48-2" name="__codelineno-48-2"></a><span class="w">  </span><span class="c1">// ...</span>
</span><span id="__span-48-3"><a id="__codelineno-48-3" name="__codelineno-48-3"></a><span class="p">}</span>
</span><span id="__span-48-4"><a id="__codelineno-48-4" name="__codelineno-48-4"></a>
</span><span id="__span-48-5"><a id="__codelineno-48-5" name="__codelineno-48-5"></a><span class="k">export</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">Game</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-48-6"><a id="__codelineno-48-6" name="__codelineno-48-6"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-48-7"><a id="__codelineno-48-7" name="__codelineno-48-7"></a><span class="w">    </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;game&quot;</span><span class="p">&gt;</span>
</span><span id="__span-48-8"><a id="__codelineno-48-8" name="__codelineno-48-8"></a><span class="w">      </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;game-board&quot;</span><span class="p">&gt;</span>
</span><span id="__span-48-9"><a id="__codelineno-48-9" name="__codelineno-48-9"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Board</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-48-10"><a id="__codelineno-48-10" name="__codelineno-48-10"></a><span class="w">      </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="__span-48-11"><a id="__codelineno-48-11" name="__codelineno-48-11"></a><span class="w">      </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;game-info&quot;</span><span class="p">&gt;</span>
</span><span id="__span-48-12"><a id="__codelineno-48-12" name="__codelineno-48-12"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">ol</span><span class="p">&gt;{</span><span class="cm">/*TODO*/</span><span class="p">}&lt;/</span><span class="nt">ol</span><span class="p">&gt;</span>
</span><span id="__span-48-13"><a id="__codelineno-48-13" name="__codelineno-48-13"></a><span class="w">      </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="__span-48-14"><a id="__codelineno-48-14" name="__codelineno-48-14"></a><span class="w">    </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="__span-48-15"><a id="__codelineno-48-15" name="__codelineno-48-15"></a><span class="w">  </span><span class="p">);</span>
</span><span id="__span-48-16"><a id="__codelineno-48-16" name="__codelineno-48-16"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<p>请注意，你要删除 <code>function Board() {</code> 声明之前的 <code>export default</code> 关键字，并将它们添加到 <code>function Game() {</code> 声明之前。这会告诉你的 <code>index.js</code> 文件使用 <code>Game</code> 组件而不是你的 <code>Board</code> 组件作为顶层组件。<code>Game</code> 组件返回的额外 <code>div</code> 正在为你稍后添加到棋盘的游戏信息腾出空间。</p>
<p>向 <code>Game</code> 组件添加一些 state 以跟踪下一个玩家和落子历史：</p>
<div class="language-jsx highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-49-1">1</a></span>
<span class="normal"><a href="#__codelineno-49-2">2</a></span>
<span class="normal"><a href="#__codelineno-49-3">3</a></span>
<span class="normal"><a href="#__codelineno-49-4">4</a></span>
<span class="normal"><a href="#__codelineno-49-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-49-1"><a id="__codelineno-49-1" name="__codelineno-49-1"></a><span class="k">export</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">Game</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-49-2"><a id="__codelineno-49-2" name="__codelineno-49-2"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">xIsNext</span><span class="p">,</span><span class="w"> </span><span class="nx">setXIsNext</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useState</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
</span><span id="__span-49-3"><a id="__codelineno-49-3" name="__codelineno-49-3"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">history</span><span class="p">,</span><span class="w"> </span><span class="nx">setHistory</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useState</span><span class="p">([</span><span class="nb">Array</span><span class="p">(</span><span class="mf">9</span><span class="p">).</span><span class="nx">fill</span><span class="p">(</span><span class="kc">null</span><span class="p">)]);</span>
</span><span id="__span-49-4"><a id="__codelineno-49-4" name="__codelineno-49-4"></a><span class="w">  </span><span class="c1">// ...</span>
</span><span id="__span-49-5"><a id="__codelineno-49-5" name="__codelineno-49-5"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<p>请注意，<code>[Array(9).fill(null)]</code> 是一个包含单个元素的数组，它本身是一个包含 9 个 <code>null</code> 的数组。</p>
<p>要渲染当前落子的方块，你需要从 <code>history</code> 中读取最后一个 squares 数组。你不需要 <code>useState</code>——你已经有足够的信息可以在渲染过程中计算它：</p>
<div class="language-jsx highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-50-1">1</a></span>
<span class="normal"><a href="#__codelineno-50-2">2</a></span>
<span class="normal"><a href="#__codelineno-50-3">3</a></span>
<span class="normal"><a href="#__codelineno-50-4">4</a></span>
<span class="normal"><a href="#__codelineno-50-5">5</a></span>
<span class="normal"><a href="#__codelineno-50-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-50-1"><a id="__codelineno-50-1" name="__codelineno-50-1"></a><span class="k">export</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">Game</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-50-2"><a id="__codelineno-50-2" name="__codelineno-50-2"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">xIsNext</span><span class="p">,</span><span class="w"> </span><span class="nx">setXIsNext</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useState</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
</span><span id="__span-50-3"><a id="__codelineno-50-3" name="__codelineno-50-3"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">history</span><span class="p">,</span><span class="w"> </span><span class="nx">setHistory</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useState</span><span class="p">([</span><span class="nb">Array</span><span class="p">(</span><span class="mf">9</span><span class="p">).</span><span class="nx">fill</span><span class="p">(</span><span class="kc">null</span><span class="p">)]);</span>
</span><span id="__span-50-4"><a id="__codelineno-50-4" name="__codelineno-50-4"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">currentSquares</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">history</span><span class="p">[</span><span class="nx">history</span><span class="p">.</span><span class="nx">length</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">1</span><span class="p">];</span>
</span><span id="__span-50-5"><a id="__codelineno-50-5" name="__codelineno-50-5"></a><span class="w">  </span><span class="c1">// ...</span>
</span><span id="__span-50-6"><a id="__codelineno-50-6" name="__codelineno-50-6"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<p>接下来，在 <code>Game</code> 组件中创建一个 <code>handlePlay</code> 函数，<code>Board</code> 组件将调用该函数来更新游戏。将 <code>xIsNext</code>、<code>currentSquares</code> 和 <code>handlePlay</code> 作为 props 传递给 <code>Board</code> 组件：</p>
<div class="language-jsx highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-51-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-51-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-51-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-51-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-51-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-51-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-51-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-51-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-51-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-51-10">10</a></span>
<span class="normal"><a href="#__codelineno-51-11">11</a></span>
<span class="normal"><a href="#__codelineno-51-12">12</a></span>
<span class="normal"><a href="#__codelineno-51-13">13</a></span>
<span class="normal"><a href="#__codelineno-51-14">14</a></span>
<span class="normal"><a href="#__codelineno-51-15">15</a></span>
<span class="normal"><a href="#__codelineno-51-16">16</a></span>
<span class="normal"><a href="#__codelineno-51-17">17</a></span>
<span class="normal"><a href="#__codelineno-51-18">18</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-51-1"><a id="__codelineno-51-1" name="__codelineno-51-1"></a><span class="k">export</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">Game</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-51-2"><a id="__codelineno-51-2" name="__codelineno-51-2"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">xIsNext</span><span class="p">,</span><span class="w"> </span><span class="nx">setXIsNext</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useState</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
</span><span id="__span-51-3"><a id="__codelineno-51-3" name="__codelineno-51-3"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">history</span><span class="p">,</span><span class="w"> </span><span class="nx">setHistory</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useState</span><span class="p">([</span><span class="nb">Array</span><span class="p">(</span><span class="mf">9</span><span class="p">).</span><span class="nx">fill</span><span class="p">(</span><span class="kc">null</span><span class="p">)]);</span>
</span><span id="__span-51-4"><a id="__codelineno-51-4" name="__codelineno-51-4"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">currentSquares</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">history</span><span class="p">[</span><span class="nx">history</span><span class="p">.</span><span class="nx">length</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">1</span><span class="p">];</span>
</span><span id="__span-51-5"><a id="__codelineno-51-5" name="__codelineno-51-5"></a>
</span><span id="__span-51-6"><a id="__codelineno-51-6" name="__codelineno-51-6"></a><span class="w">  </span><span class="kd">function</span><span class="w"> </span><span class="nx">handlePlay</span><span class="p">(</span><span class="nx">nextSquares</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-51-7"><a id="__codelineno-51-7" name="__codelineno-51-7"></a><span class="w">    </span><span class="c1">// TODO</span>
</span><span id="__span-51-8"><a id="__codelineno-51-8" name="__codelineno-51-8"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-51-9"><a id="__codelineno-51-9" name="__codelineno-51-9"></a>
</span><span id="__span-51-10"><a id="__codelineno-51-10" name="__codelineno-51-10"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-51-11"><a id="__codelineno-51-11" name="__codelineno-51-11"></a><span class="w">    </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;game&quot;</span><span class="p">&gt;</span>
</span><span id="__span-51-12"><a id="__codelineno-51-12" name="__codelineno-51-12"></a><span class="w">      </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;game-board&quot;</span><span class="p">&gt;</span>
</span><span id="__span-51-13"><a id="__codelineno-51-13" name="__codelineno-51-13"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Board</span><span class="w"> </span><span class="na">xIsNext</span><span class="o">=</span><span class="p">{</span><span class="nx">xIsNext</span><span class="p">}</span><span class="w"> </span><span class="na">squares</span><span class="o">=</span><span class="p">{</span><span class="nx">currentSquares</span><span class="p">}</span><span class="w"> </span><span class="na">onPlay</span><span class="o">=</span><span class="p">{</span><span class="nx">handlePlay</span><span class="p">}</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-51-14"><a id="__codelineno-51-14" name="__codelineno-51-14"></a><span class="w">        </span><span class="c1">//...</span>
</span><span id="__span-51-15"><a id="__codelineno-51-15" name="__codelineno-51-15"></a><span class="w">        </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="__span-51-16"><a id="__codelineno-51-16" name="__codelineno-51-16"></a><span class="w">    </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="__span-51-17"><a id="__codelineno-51-17" name="__codelineno-51-17"></a><span class="w">  </span><span class="p">)</span>
</span><span id="__span-51-18"><a id="__codelineno-51-18" name="__codelineno-51-18"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<p>让 <code>Board</code> 组件完全由它接收到的 props 控制。更改 <code>Board</code> 组件以采用三个 props：<code>xIsNext</code>、<code>squares</code>和一个新的 <code>onPlay</code> 函数，当玩家落子时，<code>Board</code> 可以使用更新的 square 数组调用该函数。接下来，删除调用 <code>useState</code> 的 <code>Board</code> 函数的前两行：</p>
<div class="language-jsx highlight"><pre><span></span><code><span id="__span-52-1"><a id="__codelineno-52-1" name="__codelineno-52-1" href="#__codelineno-52-1"></a><span class="kd">function</span><span class="w"> </span><span class="nx">Board</span><span class="p">({</span><span class="w"> </span><span class="nx">xIsNext</span><span class="p">,</span><span class="w"> </span><span class="nx">squares</span><span class="p">,</span><span class="w"> </span><span class="nx">onPlay</span><span class="w"> </span><span class="p">})</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-52-2"><a id="__codelineno-52-2" name="__codelineno-52-2" href="#__codelineno-52-2"></a><span class="w">  </span><span class="kd">function</span><span class="w"> </span><span class="nx">handleClick</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-52-3"><a id="__codelineno-52-3" name="__codelineno-52-3" href="#__codelineno-52-3"></a><span class="w">    </span><span class="c1">//...</span>
</span><span id="__span-52-4"><a id="__codelineno-52-4" name="__codelineno-52-4" href="#__codelineno-52-4"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-52-5"><a id="__codelineno-52-5" name="__codelineno-52-5" href="#__codelineno-52-5"></a><span class="w">  </span><span class="c1">// ...</span>
</span><span id="__span-52-6"><a id="__codelineno-52-6" name="__codelineno-52-6" href="#__codelineno-52-6"></a><span class="p">}</span>
</span></code></pre></div>
<p>现在，将 <code>Board</code> 组件里面的 <code>handleClick</code> 中的 <code>setSquares</code> 和 <code>setXIsNext</code> 调用替换为对新 <code>onPlay</code> 函数的一次调用，这样 <code>Game</code> 组件就可以在用户单击方块时更新 <code>Board</code>：</p>
<div class="language-jsx highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-53-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-53-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-53-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-53-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-53-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-53-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-53-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-53-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-53-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-53-10">10</a></span>
<span class="normal"><a href="#__codelineno-53-11">11</a></span>
<span class="normal"><a href="#__codelineno-53-12">12</a></span>
<span class="normal"><a href="#__codelineno-53-13">13</a></span>
<span class="normal"><a href="#__codelineno-53-14">14</a></span>
<span class="normal"><a href="#__codelineno-53-15">15</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-53-1"><a id="__codelineno-53-1" name="__codelineno-53-1"></a><span class="kd">function</span><span class="w"> </span><span class="nx">Board</span><span class="p">({</span><span class="w"> </span><span class="nx">xIsNext</span><span class="p">,</span><span class="w"> </span><span class="nx">squares</span><span class="p">,</span><span class="w"> </span><span class="nx">onPlay</span><span class="w"> </span><span class="p">})</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-53-2"><a id="__codelineno-53-2" name="__codelineno-53-2"></a><span class="w">  </span><span class="kd">function</span><span class="w"> </span><span class="nx">handleClick</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-53-3"><a id="__codelineno-53-3" name="__codelineno-53-3"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">calculateWinner</span><span class="p">(</span><span class="nx">squares</span><span class="p">)</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nx">squares</span><span class="p">[</span><span class="nx">i</span><span class="p">])</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-53-4"><a id="__codelineno-53-4" name="__codelineno-53-4"></a><span class="w">      </span><span class="k">return</span><span class="p">;</span>
</span><span id="__span-53-5"><a id="__codelineno-53-5" name="__codelineno-53-5"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-53-6"><a id="__codelineno-53-6" name="__codelineno-53-6"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">nextSquares</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">squares</span><span class="p">.</span><span class="nx">slice</span><span class="p">();</span>
</span><span id="__span-53-7"><a id="__codelineno-53-7" name="__codelineno-53-7"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">xIsNext</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-53-8"><a id="__codelineno-53-8" name="__codelineno-53-8"></a><span class="w">      </span><span class="nx">nextSquares</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;X&quot;</span><span class="p">;</span>
</span><span id="__span-53-9"><a id="__codelineno-53-9" name="__codelineno-53-9"></a><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-53-10"><a id="__codelineno-53-10" name="__codelineno-53-10"></a><span class="w">      </span><span class="nx">nextSquares</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;O&quot;</span><span class="p">;</span>
</span><span id="__span-53-11"><a id="__codelineno-53-11" name="__codelineno-53-11"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-53-12"><a id="__codelineno-53-12" name="__codelineno-53-12"></a><span class="w">    </span><span class="nx">onPlay</span><span class="p">(</span><span class="nx">nextSquares</span><span class="p">);</span>
</span><span id="__span-53-13"><a id="__codelineno-53-13" name="__codelineno-53-13"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-53-14"><a id="__codelineno-53-14" name="__codelineno-53-14"></a><span class="w">  </span><span class="c1">//...</span>
</span><span id="__span-53-15"><a id="__codelineno-53-15" name="__codelineno-53-15"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<p><code>Board</code> 组件完全由 <code>Game</code> 组件传递给它的 props 控制。你需要在 <code>Game</code> 组件中实现 <code>handlePlay</code> 函数才能使游戏重新运行。</p>
<p><code>handlePlay</code> 被调用应该做什么？请记住，Board 以前使用更新后的数组调用 <code>setSquares</code>；现在它将更新后的 <code>squares</code> 数组传递给 <code>onPlay</code>。</p>
<p><code>handlePlay</code> 函数需要更新 <code>Game</code> 的 state 以触发重新渲染，但是你没有可以再调用的 <code>setSquares</code> 函数——你现在正在使用 <code>history</code> state 变量来存储这些信息。你需要追加更新后的 <code>squares</code> 数组来更新 <code>history</code> 作为新的历史入口。你还需要切换 <code>xIsNext</code>，就像 Board 过去所做的那样：</p>
<div class="language-jsx highlight"><pre><span></span><code><span id="__span-54-1"><a id="__codelineno-54-1" name="__codelineno-54-1" href="#__codelineno-54-1"></a><span class="k">export</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">Game</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-54-2"><a id="__codelineno-54-2" name="__codelineno-54-2" href="#__codelineno-54-2"></a><span class="w">  </span><span class="c1">//...</span>
</span><span id="__span-54-3"><a id="__codelineno-54-3" name="__codelineno-54-3" href="#__codelineno-54-3"></a><span class="w">  </span><span class="kd">function</span><span class="w"> </span><span class="nx">handlePlay</span><span class="p">(</span><span class="nx">nextSquares</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-54-4"><a id="__codelineno-54-4" name="__codelineno-54-4" href="#__codelineno-54-4"></a><span class="w">    </span><span class="nx">setHistory</span><span class="p">([...</span><span class="nx">history</span><span class="p">,</span><span class="w"> </span><span class="nx">nextSquares</span><span class="p">]);</span>
</span><span id="__span-54-5"><a id="__codelineno-54-5" name="__codelineno-54-5" href="#__codelineno-54-5"></a><span class="w">    </span><span class="nx">setXIsNext</span><span class="p">(</span><span class="o">!</span><span class="nx">xIsNext</span><span class="p">);</span>
</span><span id="__span-54-6"><a id="__codelineno-54-6" name="__codelineno-54-6" href="#__codelineno-54-6"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-54-7"><a id="__codelineno-54-7" name="__codelineno-54-7" href="#__codelineno-54-7"></a><span class="w">  </span><span class="c1">//...</span>
</span><span id="__span-54-8"><a id="__codelineno-54-8" name="__codelineno-54-8" href="#__codelineno-54-8"></a><span class="p">}</span>
</span></code></pre></div>
<p>在这里，<code>[...history, nextSquares]</code> 创建了一个新数组，其中包含 <code>history</code> 中的所有元素，后跟 <code>nextSquares</code>。（你可以将 <code>...history</code> 展开语法理解为“枚举 <code>history</code> 中的所有元素”。）</p>
<p>例如，如果 <code>history</code> 是 <code>[[null,null,null], ["X",null,null]]</code>，<code>nextSquares</code> 是 <code>["X",null,"O"]</code>，那么新的 <code>[...history, nextSquares]</code> 数组就是 <code>[[null,null,null], ["X",null,null], ["X",null,"O"]]</code>。</p>
<p>此时，你已将 state 移至 <code>Game</code> 组件中，并且 UI 应该完全正常工作，就像重构之前一样。这是此时代码的样子：</p>
<div class="language-jsx highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-55-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-55-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-55-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-55-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-55-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-55-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-55-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-55-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-55-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-55-10">10</a></span>
<span class="normal"><a href="#__codelineno-55-11">11</a></span>
<span class="normal"><a href="#__codelineno-55-12">12</a></span>
<span class="normal"><a href="#__codelineno-55-13">13</a></span>
<span class="normal"><a href="#__codelineno-55-14">14</a></span>
<span class="normal"><a href="#__codelineno-55-15">15</a></span>
<span class="normal"><a href="#__codelineno-55-16">16</a></span>
<span class="normal"><a href="#__codelineno-55-17">17</a></span>
<span class="normal"><a href="#__codelineno-55-18">18</a></span>
<span class="normal"><a href="#__codelineno-55-19">19</a></span>
<span class="normal"><a href="#__codelineno-55-20">20</a></span>
<span class="normal"><a href="#__codelineno-55-21">21</a></span>
<span class="normal"><a href="#__codelineno-55-22">22</a></span>
<span class="normal"><a href="#__codelineno-55-23">23</a></span>
<span class="normal"><a href="#__codelineno-55-24">24</a></span>
<span class="normal"><a href="#__codelineno-55-25">25</a></span>
<span class="normal"><a href="#__codelineno-55-26">26</a></span>
<span class="normal"><a href="#__codelineno-55-27">27</a></span>
<span class="normal"><a href="#__codelineno-55-28">28</a></span>
<span class="normal"><a href="#__codelineno-55-29">29</a></span>
<span class="normal"><a href="#__codelineno-55-30">30</a></span>
<span class="normal"><a href="#__codelineno-55-31">31</a></span>
<span class="normal"><a href="#__codelineno-55-32">32</a></span>
<span class="normal"><a href="#__codelineno-55-33">33</a></span>
<span class="normal"><a href="#__codelineno-55-34">34</a></span>
<span class="normal"><a href="#__codelineno-55-35">35</a></span>
<span class="normal"><a href="#__codelineno-55-36">36</a></span>
<span class="normal"><a href="#__codelineno-55-37">37</a></span>
<span class="normal"><a href="#__codelineno-55-38">38</a></span>
<span class="normal"><a href="#__codelineno-55-39">39</a></span>
<span class="normal"><a href="#__codelineno-55-40">40</a></span>
<span class="normal"><a href="#__codelineno-55-41">41</a></span>
<span class="normal"><a href="#__codelineno-55-42">42</a></span>
<span class="normal"><a href="#__codelineno-55-43">43</a></span>
<span class="normal"><a href="#__codelineno-55-44">44</a></span>
<span class="normal"><a href="#__codelineno-55-45">45</a></span>
<span class="normal"><a href="#__codelineno-55-46">46</a></span>
<span class="normal"><a href="#__codelineno-55-47">47</a></span>
<span class="normal"><a href="#__codelineno-55-48">48</a></span>
<span class="normal"><a href="#__codelineno-55-49">49</a></span>
<span class="normal"><a href="#__codelineno-55-50">50</a></span>
<span class="normal"><a href="#__codelineno-55-51">51</a></span>
<span class="normal"><a href="#__codelineno-55-52">52</a></span>
<span class="normal"><a href="#__codelineno-55-53">53</a></span>
<span class="normal"><a href="#__codelineno-55-54">54</a></span>
<span class="normal"><a href="#__codelineno-55-55">55</a></span>
<span class="normal"><a href="#__codelineno-55-56">56</a></span>
<span class="normal"><a href="#__codelineno-55-57">57</a></span>
<span class="normal"><a href="#__codelineno-55-58">58</a></span>
<span class="normal"><a href="#__codelineno-55-59">59</a></span>
<span class="normal"><a href="#__codelineno-55-60">60</a></span>
<span class="normal"><a href="#__codelineno-55-61">61</a></span>
<span class="normal"><a href="#__codelineno-55-62">62</a></span>
<span class="normal"><a href="#__codelineno-55-63">63</a></span>
<span class="normal"><a href="#__codelineno-55-64">64</a></span>
<span class="normal"><a href="#__codelineno-55-65">65</a></span>
<span class="normal"><a href="#__codelineno-55-66">66</a></span>
<span class="normal"><a href="#__codelineno-55-67">67</a></span>
<span class="normal"><a href="#__codelineno-55-68">68</a></span>
<span class="normal"><a href="#__codelineno-55-69">69</a></span>
<span class="normal"><a href="#__codelineno-55-70">70</a></span>
<span class="normal"><a href="#__codelineno-55-71">71</a></span>
<span class="normal"><a href="#__codelineno-55-72">72</a></span>
<span class="normal"><a href="#__codelineno-55-73">73</a></span>
<span class="normal"><a href="#__codelineno-55-74">74</a></span>
<span class="normal"><a href="#__codelineno-55-75">75</a></span>
<span class="normal"><a href="#__codelineno-55-76">76</a></span>
<span class="normal"><a href="#__codelineno-55-77">77</a></span>
<span class="normal"><a href="#__codelineno-55-78">78</a></span>
<span class="normal"><a href="#__codelineno-55-79">79</a></span>
<span class="normal"><a href="#__codelineno-55-80">80</a></span>
<span class="normal"><a href="#__codelineno-55-81">81</a></span>
<span class="normal"><a href="#__codelineno-55-82">82</a></span>
<span class="normal"><a href="#__codelineno-55-83">83</a></span>
<span class="normal"><a href="#__codelineno-55-84">84</a></span>
<span class="normal"><a href="#__codelineno-55-85">85</a></span>
<span class="normal"><a href="#__codelineno-55-86">86</a></span>
<span class="normal"><a href="#__codelineno-55-87">87</a></span>
<span class="normal"><a href="#__codelineno-55-88">88</a></span>
<span class="normal"><a href="#__codelineno-55-89">89</a></span>
<span class="normal"><a href="#__codelineno-55-90">90</a></span>
<span class="normal"><a href="#__codelineno-55-91">91</a></span>
<span class="normal"><a href="#__codelineno-55-92">92</a></span>
<span class="normal"><a href="#__codelineno-55-93">93</a></span>
<span class="normal"><a href="#__codelineno-55-94">94</a></span>
<span class="normal"><a href="#__codelineno-55-95">95</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-55-1"><a id="__codelineno-55-1" name="__codelineno-55-1"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">useState</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;react&#39;</span><span class="p">;</span>
</span><span id="__span-55-2"><a id="__codelineno-55-2" name="__codelineno-55-2"></a>
</span><span id="__span-55-3"><a id="__codelineno-55-3" name="__codelineno-55-3"></a><span class="kd">function</span><span class="w"> </span><span class="nx">Square</span><span class="p">({</span><span class="w"> </span><span class="nx">value</span><span class="p">,</span><span class="w"> </span><span class="nx">onSquareClick</span><span class="w"> </span><span class="p">})</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-55-4"><a id="__codelineno-55-4" name="__codelineno-55-4"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-55-5"><a id="__codelineno-55-5" name="__codelineno-55-5"></a><span class="w">    </span><span class="p">&lt;</span><span class="nt">button</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;square&quot;</span><span class="w"> </span><span class="na">onClick</span><span class="o">=</span><span class="p">{</span><span class="nx">onSquareClick</span><span class="p">}&gt;</span>
</span><span id="__span-55-6"><a id="__codelineno-55-6" name="__codelineno-55-6"></a><span class="w">      </span><span class="p">{</span><span class="nx">value</span><span class="p">}</span>
</span><span id="__span-55-7"><a id="__codelineno-55-7" name="__codelineno-55-7"></a><span class="w">    </span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span><span id="__span-55-8"><a id="__codelineno-55-8" name="__codelineno-55-8"></a><span class="w">  </span><span class="p">);</span>
</span><span id="__span-55-9"><a id="__codelineno-55-9" name="__codelineno-55-9"></a><span class="p">}</span>
</span><span id="__span-55-10"><a id="__codelineno-55-10" name="__codelineno-55-10"></a>
</span><span id="__span-55-11"><a id="__codelineno-55-11" name="__codelineno-55-11"></a><span class="kd">function</span><span class="w"> </span><span class="nx">Board</span><span class="p">({</span><span class="w"> </span><span class="nx">xIsNext</span><span class="p">,</span><span class="w"> </span><span class="nx">squares</span><span class="p">,</span><span class="w"> </span><span class="nx">onPlay</span><span class="w"> </span><span class="p">})</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-55-12"><a id="__codelineno-55-12" name="__codelineno-55-12"></a><span class="w">  </span><span class="kd">function</span><span class="w"> </span><span class="nx">handleClick</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-55-13"><a id="__codelineno-55-13" name="__codelineno-55-13"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">calculateWinner</span><span class="p">(</span><span class="nx">squares</span><span class="p">)</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nx">squares</span><span class="p">[</span><span class="nx">i</span><span class="p">])</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-55-14"><a id="__codelineno-55-14" name="__codelineno-55-14"></a><span class="w">      </span><span class="k">return</span><span class="p">;</span>
</span><span id="__span-55-15"><a id="__codelineno-55-15" name="__codelineno-55-15"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-55-16"><a id="__codelineno-55-16" name="__codelineno-55-16"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">nextSquares</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">squares</span><span class="p">.</span><span class="nx">slice</span><span class="p">();</span>
</span><span id="__span-55-17"><a id="__codelineno-55-17" name="__codelineno-55-17"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">xIsNext</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-55-18"><a id="__codelineno-55-18" name="__codelineno-55-18"></a><span class="w">      </span><span class="nx">nextSquares</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;X&#39;</span><span class="p">;</span>
</span><span id="__span-55-19"><a id="__codelineno-55-19" name="__codelineno-55-19"></a><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-55-20"><a id="__codelineno-55-20" name="__codelineno-55-20"></a><span class="w">      </span><span class="nx">nextSquares</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;O&#39;</span><span class="p">;</span>
</span><span id="__span-55-21"><a id="__codelineno-55-21" name="__codelineno-55-21"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-55-22"><a id="__codelineno-55-22" name="__codelineno-55-22"></a><span class="w">    </span><span class="nx">onPlay</span><span class="p">(</span><span class="nx">nextSquares</span><span class="p">);</span>
</span><span id="__span-55-23"><a id="__codelineno-55-23" name="__codelineno-55-23"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-55-24"><a id="__codelineno-55-24" name="__codelineno-55-24"></a>
</span><span id="__span-55-25"><a id="__codelineno-55-25" name="__codelineno-55-25"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">winner</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">calculateWinner</span><span class="p">(</span><span class="nx">squares</span><span class="p">);</span>
</span><span id="__span-55-26"><a id="__codelineno-55-26" name="__codelineno-55-26"></a><span class="w">  </span><span class="kd">let</span><span class="w"> </span><span class="nx">status</span><span class="p">;</span>
</span><span id="__span-55-27"><a id="__codelineno-55-27" name="__codelineno-55-27"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">winner</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-55-28"><a id="__codelineno-55-28" name="__codelineno-55-28"></a><span class="w">    </span><span class="nx">status</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;Winner: &#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">winner</span><span class="p">;</span>
</span><span id="__span-55-29"><a id="__codelineno-55-29" name="__codelineno-55-29"></a><span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-55-30"><a id="__codelineno-55-30" name="__codelineno-55-30"></a><span class="w">    </span><span class="nx">status</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;Next player: &#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="p">(</span><span class="nx">xIsNext</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="s1">&#39;X&#39;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;O&#39;</span><span class="p">);</span>
</span><span id="__span-55-31"><a id="__codelineno-55-31" name="__codelineno-55-31"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-55-32"><a id="__codelineno-55-32" name="__codelineno-55-32"></a>
</span><span id="__span-55-33"><a id="__codelineno-55-33" name="__codelineno-55-33"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-55-34"><a id="__codelineno-55-34" name="__codelineno-55-34"></a><span class="w">    </span><span class="p">&lt;&gt;</span>
</span><span id="__span-55-35"><a id="__codelineno-55-35" name="__codelineno-55-35"></a><span class="w">      </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;status&quot;</span><span class="p">&gt;{</span><span class="nx">status</span><span class="p">}&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="__span-55-36"><a id="__codelineno-55-36" name="__codelineno-55-36"></a><span class="w">      </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;board-row&quot;</span><span class="p">&gt;</span>
</span><span id="__span-55-37"><a id="__codelineno-55-37" name="__codelineno-55-37"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">squares</span><span class="p">[</span><span class="mf">0</span><span class="p">]}</span><span class="w"> </span><span class="na">onSquareClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">handleClick</span><span class="p">(</span><span class="mf">0</span><span class="p">)}</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-55-38"><a id="__codelineno-55-38" name="__codelineno-55-38"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">squares</span><span class="p">[</span><span class="mf">1</span><span class="p">]}</span><span class="w"> </span><span class="na">onSquareClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">handleClick</span><span class="p">(</span><span class="mf">1</span><span class="p">)}</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-55-39"><a id="__codelineno-55-39" name="__codelineno-55-39"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">squares</span><span class="p">[</span><span class="mf">2</span><span class="p">]}</span><span class="w"> </span><span class="na">onSquareClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">handleClick</span><span class="p">(</span><span class="mf">2</span><span class="p">)}</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-55-40"><a id="__codelineno-55-40" name="__codelineno-55-40"></a><span class="w">      </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="__span-55-41"><a id="__codelineno-55-41" name="__codelineno-55-41"></a><span class="w">      </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;board-row&quot;</span><span class="p">&gt;</span>
</span><span id="__span-55-42"><a id="__codelineno-55-42" name="__codelineno-55-42"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">squares</span><span class="p">[</span><span class="mf">3</span><span class="p">]}</span><span class="w"> </span><span class="na">onSquareClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">handleClick</span><span class="p">(</span><span class="mf">3</span><span class="p">)}</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-55-43"><a id="__codelineno-55-43" name="__codelineno-55-43"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">squares</span><span class="p">[</span><span class="mf">4</span><span class="p">]}</span><span class="w"> </span><span class="na">onSquareClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">handleClick</span><span class="p">(</span><span class="mf">4</span><span class="p">)}</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-55-44"><a id="__codelineno-55-44" name="__codelineno-55-44"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">squares</span><span class="p">[</span><span class="mf">5</span><span class="p">]}</span><span class="w"> </span><span class="na">onSquareClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">handleClick</span><span class="p">(</span><span class="mf">5</span><span class="p">)}</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-55-45"><a id="__codelineno-55-45" name="__codelineno-55-45"></a><span class="w">      </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="__span-55-46"><a id="__codelineno-55-46" name="__codelineno-55-46"></a><span class="w">      </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;board-row&quot;</span><span class="p">&gt;</span>
</span><span id="__span-55-47"><a id="__codelineno-55-47" name="__codelineno-55-47"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">squares</span><span class="p">[</span><span class="mf">6</span><span class="p">]}</span><span class="w"> </span><span class="na">onSquareClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">handleClick</span><span class="p">(</span><span class="mf">6</span><span class="p">)}</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-55-48"><a id="__codelineno-55-48" name="__codelineno-55-48"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">squares</span><span class="p">[</span><span class="mf">7</span><span class="p">]}</span><span class="w"> </span><span class="na">onSquareClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">handleClick</span><span class="p">(</span><span class="mf">7</span><span class="p">)}</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-55-49"><a id="__codelineno-55-49" name="__codelineno-55-49"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">squares</span><span class="p">[</span><span class="mf">8</span><span class="p">]}</span><span class="w"> </span><span class="na">onSquareClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">handleClick</span><span class="p">(</span><span class="mf">8</span><span class="p">)}</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-55-50"><a id="__codelineno-55-50" name="__codelineno-55-50"></a><span class="w">      </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="__span-55-51"><a id="__codelineno-55-51" name="__codelineno-55-51"></a><span class="w">    </span><span class="p">&lt;/&gt;</span>
</span><span id="__span-55-52"><a id="__codelineno-55-52" name="__codelineno-55-52"></a><span class="w">  </span><span class="p">);</span>
</span><span id="__span-55-53"><a id="__codelineno-55-53" name="__codelineno-55-53"></a><span class="p">}</span>
</span><span id="__span-55-54"><a id="__codelineno-55-54" name="__codelineno-55-54"></a>
</span><span id="__span-55-55"><a id="__codelineno-55-55" name="__codelineno-55-55"></a><span class="k">export</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">Game</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-55-56"><a id="__codelineno-55-56" name="__codelineno-55-56"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">xIsNext</span><span class="p">,</span><span class="w"> </span><span class="nx">setXIsNext</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useState</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
</span><span id="__span-55-57"><a id="__codelineno-55-57" name="__codelineno-55-57"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">history</span><span class="p">,</span><span class="w"> </span><span class="nx">setHistory</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useState</span><span class="p">([</span><span class="nb">Array</span><span class="p">(</span><span class="mf">9</span><span class="p">).</span><span class="nx">fill</span><span class="p">(</span><span class="kc">null</span><span class="p">)]);</span>
</span><span id="__span-55-58"><a id="__codelineno-55-58" name="__codelineno-55-58"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">currentSquares</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">history</span><span class="p">[</span><span class="nx">history</span><span class="p">.</span><span class="nx">length</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">1</span><span class="p">];</span>
</span><span id="__span-55-59"><a id="__codelineno-55-59" name="__codelineno-55-59"></a>
</span><span id="__span-55-60"><a id="__codelineno-55-60" name="__codelineno-55-60"></a><span class="w">  </span><span class="kd">function</span><span class="w"> </span><span class="nx">handlePlay</span><span class="p">(</span><span class="nx">nextSquares</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-55-61"><a id="__codelineno-55-61" name="__codelineno-55-61"></a><span class="w">    </span><span class="nx">setHistory</span><span class="p">([...</span><span class="nx">history</span><span class="p">,</span><span class="w"> </span><span class="nx">nextSquares</span><span class="p">]);</span>
</span><span id="__span-55-62"><a id="__codelineno-55-62" name="__codelineno-55-62"></a><span class="w">    </span><span class="nx">setXIsNext</span><span class="p">(</span><span class="o">!</span><span class="nx">xIsNext</span><span class="p">);</span>
</span><span id="__span-55-63"><a id="__codelineno-55-63" name="__codelineno-55-63"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-55-64"><a id="__codelineno-55-64" name="__codelineno-55-64"></a>
</span><span id="__span-55-65"><a id="__codelineno-55-65" name="__codelineno-55-65"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-55-66"><a id="__codelineno-55-66" name="__codelineno-55-66"></a><span class="w">    </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;game&quot;</span><span class="p">&gt;</span>
</span><span id="__span-55-67"><a id="__codelineno-55-67" name="__codelineno-55-67"></a><span class="w">      </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;game-board&quot;</span><span class="p">&gt;</span>
</span><span id="__span-55-68"><a id="__codelineno-55-68" name="__codelineno-55-68"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Board</span><span class="w"> </span><span class="na">xIsNext</span><span class="o">=</span><span class="p">{</span><span class="nx">xIsNext</span><span class="p">}</span><span class="w"> </span><span class="na">squares</span><span class="o">=</span><span class="p">{</span><span class="nx">currentSquares</span><span class="p">}</span><span class="w"> </span><span class="na">onPlay</span><span class="o">=</span><span class="p">{</span><span class="nx">handlePlay</span><span class="p">}</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-55-69"><a id="__codelineno-55-69" name="__codelineno-55-69"></a><span class="w">      </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="__span-55-70"><a id="__codelineno-55-70" name="__codelineno-55-70"></a><span class="w">      </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;game-info&quot;</span><span class="p">&gt;</span>
</span><span id="__span-55-71"><a id="__codelineno-55-71" name="__codelineno-55-71"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">ol</span><span class="p">&gt;{</span><span class="cm">/*TODO*/</span><span class="p">}&lt;/</span><span class="nt">ol</span><span class="p">&gt;</span>
</span><span id="__span-55-72"><a id="__codelineno-55-72" name="__codelineno-55-72"></a><span class="w">      </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="__span-55-73"><a id="__codelineno-55-73" name="__codelineno-55-73"></a><span class="w">    </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="__span-55-74"><a id="__codelineno-55-74" name="__codelineno-55-74"></a><span class="w">  </span><span class="p">);</span>
</span><span id="__span-55-75"><a id="__codelineno-55-75" name="__codelineno-55-75"></a><span class="p">}</span>
</span><span id="__span-55-76"><a id="__codelineno-55-76" name="__codelineno-55-76"></a>
</span><span id="__span-55-77"><a id="__codelineno-55-77" name="__codelineno-55-77"></a><span class="kd">function</span><span class="w"> </span><span class="nx">calculateWinner</span><span class="p">(</span><span class="nx">squares</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-55-78"><a id="__codelineno-55-78" name="__codelineno-55-78"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">lines</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
</span><span id="__span-55-79"><a id="__codelineno-55-79" name="__codelineno-55-79"></a><span class="w">    </span><span class="p">[</span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">2</span><span class="p">],</span>
</span><span id="__span-55-80"><a id="__codelineno-55-80" name="__codelineno-55-80"></a><span class="w">    </span><span class="p">[</span><span class="mf">3</span><span class="p">,</span><span class="w"> </span><span class="mf">4</span><span class="p">,</span><span class="w"> </span><span class="mf">5</span><span class="p">],</span>
</span><span id="__span-55-81"><a id="__codelineno-55-81" name="__codelineno-55-81"></a><span class="w">    </span><span class="p">[</span><span class="mf">6</span><span class="p">,</span><span class="w"> </span><span class="mf">7</span><span class="p">,</span><span class="w"> </span><span class="mf">8</span><span class="p">],</span>
</span><span id="__span-55-82"><a id="__codelineno-55-82" name="__codelineno-55-82"></a><span class="w">    </span><span class="p">[</span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">3</span><span class="p">,</span><span class="w"> </span><span class="mf">6</span><span class="p">],</span>
</span><span id="__span-55-83"><a id="__codelineno-55-83" name="__codelineno-55-83"></a><span class="w">    </span><span class="p">[</span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">4</span><span class="p">,</span><span class="w"> </span><span class="mf">7</span><span class="p">],</span>
</span><span id="__span-55-84"><a id="__codelineno-55-84" name="__codelineno-55-84"></a><span class="w">    </span><span class="p">[</span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="mf">5</span><span class="p">,</span><span class="w"> </span><span class="mf">8</span><span class="p">],</span>
</span><span id="__span-55-85"><a id="__codelineno-55-85" name="__codelineno-55-85"></a><span class="w">    </span><span class="p">[</span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">4</span><span class="p">,</span><span class="w"> </span><span class="mf">8</span><span class="p">],</span>
</span><span id="__span-55-86"><a id="__codelineno-55-86" name="__codelineno-55-86"></a><span class="w">    </span><span class="p">[</span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="mf">4</span><span class="p">,</span><span class="w"> </span><span class="mf">6</span><span class="p">],</span>
</span><span id="__span-55-87"><a id="__codelineno-55-87" name="__codelineno-55-87"></a><span class="w">  </span><span class="p">];</span>
</span><span id="__span-55-88"><a id="__codelineno-55-88" name="__codelineno-55-88"></a><span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">let</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="nx">lines</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-55-89"><a id="__codelineno-55-89" name="__codelineno-55-89"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">a</span><span class="p">,</span><span class="w"> </span><span class="nx">b</span><span class="p">,</span><span class="w"> </span><span class="nx">c</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">lines</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
</span><span id="__span-55-90"><a id="__codelineno-55-90" name="__codelineno-55-90"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">squares</span><span class="p">[</span><span class="nx">a</span><span class="p">]</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nx">squares</span><span class="p">[</span><span class="nx">a</span><span class="p">]</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="nx">squares</span><span class="p">[</span><span class="nx">b</span><span class="p">]</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nx">squares</span><span class="p">[</span><span class="nx">a</span><span class="p">]</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="nx">squares</span><span class="p">[</span><span class="nx">c</span><span class="p">])</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-55-91"><a id="__codelineno-55-91" name="__codelineno-55-91"></a><span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="nx">squares</span><span class="p">[</span><span class="nx">a</span><span class="p">];</span>
</span><span id="__span-55-92"><a id="__codelineno-55-92" name="__codelineno-55-92"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-55-93"><a id="__codelineno-55-93" name="__codelineno-55-93"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-55-94"><a id="__codelineno-55-94" name="__codelineno-55-94"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="kc">null</span><span class="p">;</span>
</span><span id="__span-55-95"><a id="__codelineno-55-95" name="__codelineno-55-95"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<h3 id="43">4.3 显示过去的落子<a class="headerlink" href="#43" title="Permanent link">&para;</a></h3>
<p>由于你正在记录井字棋游戏的历史，因此你现在可以向玩家显示过去的动作列表。</p>
<p>像 <code>&lt;button&gt;</code> 这样的 React 元素是常规的 JavaScript 对象；你可以在你的应用程序中传递它们。要在 React 中渲染多个项目，你可以使用 React 元素数组。</p>
<p>你已经有一组 state 为 <code>history</code> 的数组，所以现在你需要将其转换为一组 React 元素。在 JavaScript 中，要将一个数组转换为另一个数组，可以使用 <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/map">数组的 <code>map</code> 方法</a>。</p>
<div class="language-jsx highlight"><pre><span></span><code><span id="__span-56-1"><a id="__codelineno-56-1" name="__codelineno-56-1" href="#__codelineno-56-1"></a><span class="p">[</span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="mf">3</span><span class="p">].</span><span class="nx">map</span><span class="p">((</span><span class="nx">x</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">x</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mf">2</span><span class="p">)</span><span class="w"> </span><span class="c1">// [2, 4, 6]</span>
</span></code></pre></div>
<p>你将使用 <code>map</code> 将你的 <code>history</code> 动作转换为代表屏幕上按钮的 React 元素，并显示一个按钮列表以“跳转”到过去的动作。让我们在 Game 组件中用 <code>map</code> 代替 <code>history</code>：</p>
<div class="language-jsx highlight"><pre><span></span><code><span id="__span-57-1"><a id="__codelineno-57-1" name="__codelineno-57-1" href="#__codelineno-57-1"></a><span class="k">export</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">Game</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-57-2"><a id="__codelineno-57-2" name="__codelineno-57-2" href="#__codelineno-57-2"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">xIsNext</span><span class="p">,</span><span class="w"> </span><span class="nx">setXIsNext</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useState</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
</span><span id="__span-57-3"><a id="__codelineno-57-3" name="__codelineno-57-3" href="#__codelineno-57-3"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">history</span><span class="p">,</span><span class="w"> </span><span class="nx">setHistory</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useState</span><span class="p">([</span><span class="nb">Array</span><span class="p">(</span><span class="mf">9</span><span class="p">).</span><span class="nx">fill</span><span class="p">(</span><span class="kc">null</span><span class="p">)]);</span>
</span><span id="__span-57-4"><a id="__codelineno-57-4" name="__codelineno-57-4" href="#__codelineno-57-4"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">currentSquares</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">history</span><span class="p">[</span><span class="nx">history</span><span class="p">.</span><span class="nx">length</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">1</span><span class="p">];</span>
</span><span id="__span-57-5"><a id="__codelineno-57-5" name="__codelineno-57-5" href="#__codelineno-57-5"></a>
</span><span id="__span-57-6"><a id="__codelineno-57-6" name="__codelineno-57-6" href="#__codelineno-57-6"></a><span class="w">  </span><span class="kd">function</span><span class="w"> </span><span class="nx">handlePlay</span><span class="p">(</span><span class="nx">nextSquares</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-57-7"><a id="__codelineno-57-7" name="__codelineno-57-7" href="#__codelineno-57-7"></a><span class="w">    </span><span class="nx">setHistory</span><span class="p">([...</span><span class="nx">history</span><span class="p">,</span><span class="w"> </span><span class="nx">nextSquares</span><span class="p">]);</span>
</span><span id="__span-57-8"><a id="__codelineno-57-8" name="__codelineno-57-8" href="#__codelineno-57-8"></a><span class="w">    </span><span class="nx">setXIsNext</span><span class="p">(</span><span class="o">!</span><span class="nx">xIsNext</span><span class="p">);</span>
</span><span id="__span-57-9"><a id="__codelineno-57-9" name="__codelineno-57-9" href="#__codelineno-57-9"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-57-10"><a id="__codelineno-57-10" name="__codelineno-57-10" href="#__codelineno-57-10"></a>
</span><span id="__span-57-11"><a id="__codelineno-57-11" name="__codelineno-57-11" href="#__codelineno-57-11"></a><span class="w">  </span><span class="kd">function</span><span class="w"> </span><span class="nx">jumpTo</span><span class="p">(</span><span class="nx">nextMove</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-57-12"><a id="__codelineno-57-12" name="__codelineno-57-12" href="#__codelineno-57-12"></a><span class="w">    </span><span class="c1">// TODO</span>
</span><span id="__span-57-13"><a id="__codelineno-57-13" name="__codelineno-57-13" href="#__codelineno-57-13"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-57-14"><a id="__codelineno-57-14" name="__codelineno-57-14" href="#__codelineno-57-14"></a>
</span><span id="__span-57-15"><a id="__codelineno-57-15" name="__codelineno-57-15" href="#__codelineno-57-15"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">moves</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">history</span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">squares</span><span class="p">,</span><span class="w"> </span><span class="nx">move</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-57-16"><a id="__codelineno-57-16" name="__codelineno-57-16" href="#__codelineno-57-16"></a><span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="nx">description</span><span class="p">;</span>
</span><span id="__span-57-17"><a id="__codelineno-57-17" name="__codelineno-57-17" href="#__codelineno-57-17"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">move</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mf">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-57-18"><a id="__codelineno-57-18" name="__codelineno-57-18" href="#__codelineno-57-18"></a><span class="w">      </span><span class="nx">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;Go to move #&#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">move</span><span class="p">;</span>
</span><span id="__span-57-19"><a id="__codelineno-57-19" name="__codelineno-57-19" href="#__codelineno-57-19"></a><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-57-20"><a id="__codelineno-57-20" name="__codelineno-57-20" href="#__codelineno-57-20"></a><span class="w">      </span><span class="nx">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;Go to game start&#39;</span><span class="p">;</span>
</span><span id="__span-57-21"><a id="__codelineno-57-21" name="__codelineno-57-21" href="#__codelineno-57-21"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-57-22"><a id="__codelineno-57-22" name="__codelineno-57-22" href="#__codelineno-57-22"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-57-23"><a id="__codelineno-57-23" name="__codelineno-57-23" href="#__codelineno-57-23"></a><span class="w">      </span><span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>
</span><span id="__span-57-24"><a id="__codelineno-57-24" name="__codelineno-57-24" href="#__codelineno-57-24"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">button</span><span class="w"> </span><span class="na">onClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">jumpTo</span><span class="p">(</span><span class="nx">move</span><span class="p">)}&gt;{</span><span class="nx">description</span><span class="p">}&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span><span id="__span-57-25"><a id="__codelineno-57-25" name="__codelineno-57-25" href="#__codelineno-57-25"></a><span class="w">      </span><span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
</span><span id="__span-57-26"><a id="__codelineno-57-26" name="__codelineno-57-26" href="#__codelineno-57-26"></a><span class="w">    </span><span class="p">);</span>
</span><span id="__span-57-27"><a id="__codelineno-57-27" name="__codelineno-57-27" href="#__codelineno-57-27"></a><span class="w">  </span><span class="p">});</span>
</span><span id="__span-57-28"><a id="__codelineno-57-28" name="__codelineno-57-28" href="#__codelineno-57-28"></a>
</span><span id="__span-57-29"><a id="__codelineno-57-29" name="__codelineno-57-29" href="#__codelineno-57-29"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-57-30"><a id="__codelineno-57-30" name="__codelineno-57-30" href="#__codelineno-57-30"></a><span class="w">    </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;game&quot;</span><span class="p">&gt;</span>
</span><span id="__span-57-31"><a id="__codelineno-57-31" name="__codelineno-57-31" href="#__codelineno-57-31"></a><span class="w">      </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;game-board&quot;</span><span class="p">&gt;</span>
</span><span id="__span-57-32"><a id="__codelineno-57-32" name="__codelineno-57-32" href="#__codelineno-57-32"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Board</span><span class="w"> </span><span class="na">xIsNext</span><span class="o">=</span><span class="p">{</span><span class="nx">xIsNext</span><span class="p">}</span><span class="w"> </span><span class="na">squares</span><span class="o">=</span><span class="p">{</span><span class="nx">currentSquares</span><span class="p">}</span><span class="w"> </span><span class="na">onPlay</span><span class="o">=</span><span class="p">{</span><span class="nx">handlePlay</span><span class="p">}</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-57-33"><a id="__codelineno-57-33" name="__codelineno-57-33" href="#__codelineno-57-33"></a><span class="w">      </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="__span-57-34"><a id="__codelineno-57-34" name="__codelineno-57-34" href="#__codelineno-57-34"></a><span class="w">      </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;game-info&quot;</span><span class="p">&gt;</span>
</span><span id="__span-57-35"><a id="__codelineno-57-35" name="__codelineno-57-35" href="#__codelineno-57-35"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">ol</span><span class="p">&gt;{</span><span class="nx">moves</span><span class="p">}&lt;/</span><span class="nt">ol</span><span class="p">&gt;</span>
</span><span id="__span-57-36"><a id="__codelineno-57-36" name="__codelineno-57-36" href="#__codelineno-57-36"></a><span class="w">      </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="__span-57-37"><a id="__codelineno-57-37" name="__codelineno-57-37" href="#__codelineno-57-37"></a><span class="w">    </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="__span-57-38"><a id="__codelineno-57-38" name="__codelineno-57-38" href="#__codelineno-57-38"></a><span class="w">  </span><span class="p">);</span>
</span><span id="__span-57-39"><a id="__codelineno-57-39" name="__codelineno-57-39" href="#__codelineno-57-39"></a><span class="p">}</span>
</span></code></pre></div>
<div class="admonition warning">
<p class="admonition-title">控制台</p>
<p>Warning: Each child in an array or iterator should have a unique “key” prop. Check the render method of <code>Game</code>.</p>
</div>
<div class="language-jsx highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-58-1">  1</a></span>
<span class="normal"><a href="#__codelineno-58-2">  2</a></span>
<span class="normal"><a href="#__codelineno-58-3">  3</a></span>
<span class="normal"><a href="#__codelineno-58-4">  4</a></span>
<span class="normal"><a href="#__codelineno-58-5">  5</a></span>
<span class="normal"><a href="#__codelineno-58-6">  6</a></span>
<span class="normal"><a href="#__codelineno-58-7">  7</a></span>
<span class="normal"><a href="#__codelineno-58-8">  8</a></span>
<span class="normal"><a href="#__codelineno-58-9">  9</a></span>
<span class="normal"><a href="#__codelineno-58-10"> 10</a></span>
<span class="normal"><a href="#__codelineno-58-11"> 11</a></span>
<span class="normal"><a href="#__codelineno-58-12"> 12</a></span>
<span class="normal"><a href="#__codelineno-58-13"> 13</a></span>
<span class="normal"><a href="#__codelineno-58-14"> 14</a></span>
<span class="normal"><a href="#__codelineno-58-15"> 15</a></span>
<span class="normal"><a href="#__codelineno-58-16"> 16</a></span>
<span class="normal"><a href="#__codelineno-58-17"> 17</a></span>
<span class="normal"><a href="#__codelineno-58-18"> 18</a></span>
<span class="normal"><a href="#__codelineno-58-19"> 19</a></span>
<span class="normal"><a href="#__codelineno-58-20"> 20</a></span>
<span class="normal"><a href="#__codelineno-58-21"> 21</a></span>
<span class="normal"><a href="#__codelineno-58-22"> 22</a></span>
<span class="normal"><a href="#__codelineno-58-23"> 23</a></span>
<span class="normal"><a href="#__codelineno-58-24"> 24</a></span>
<span class="normal"><a href="#__codelineno-58-25"> 25</a></span>
<span class="normal"><a href="#__codelineno-58-26"> 26</a></span>
<span class="normal"><a href="#__codelineno-58-27"> 27</a></span>
<span class="normal"><a href="#__codelineno-58-28"> 28</a></span>
<span class="normal"><a href="#__codelineno-58-29"> 29</a></span>
<span class="normal"><a href="#__codelineno-58-30"> 30</a></span>
<span class="normal"><a href="#__codelineno-58-31"> 31</a></span>
<span class="normal"><a href="#__codelineno-58-32"> 32</a></span>
<span class="normal"><a href="#__codelineno-58-33"> 33</a></span>
<span class="normal"><a href="#__codelineno-58-34"> 34</a></span>
<span class="normal"><a href="#__codelineno-58-35"> 35</a></span>
<span class="normal"><a href="#__codelineno-58-36"> 36</a></span>
<span class="normal"><a href="#__codelineno-58-37"> 37</a></span>
<span class="normal"><a href="#__codelineno-58-38"> 38</a></span>
<span class="normal"><a href="#__codelineno-58-39"> 39</a></span>
<span class="normal"><a href="#__codelineno-58-40"> 40</a></span>
<span class="normal"><a href="#__codelineno-58-41"> 41</a></span>
<span class="normal"><a href="#__codelineno-58-42"> 42</a></span>
<span class="normal"><a href="#__codelineno-58-43"> 43</a></span>
<span class="normal"><a href="#__codelineno-58-44"> 44</a></span>
<span class="normal"><a href="#__codelineno-58-45"> 45</a></span>
<span class="normal"><a href="#__codelineno-58-46"> 46</a></span>
<span class="normal"><a href="#__codelineno-58-47"> 47</a></span>
<span class="normal"><a href="#__codelineno-58-48"> 48</a></span>
<span class="normal"><a href="#__codelineno-58-49"> 49</a></span>
<span class="normal"><a href="#__codelineno-58-50"> 50</a></span>
<span class="normal"><a href="#__codelineno-58-51"> 51</a></span>
<span class="normal"><a href="#__codelineno-58-52"> 52</a></span>
<span class="normal"><a href="#__codelineno-58-53"> 53</a></span>
<span class="normal"><a href="#__codelineno-58-54"> 54</a></span>
<span class="normal"><a href="#__codelineno-58-55"> 55</a></span>
<span class="normal"><a href="#__codelineno-58-56"> 56</a></span>
<span class="normal"><a href="#__codelineno-58-57"> 57</a></span>
<span class="normal"><a href="#__codelineno-58-58"> 58</a></span>
<span class="normal"><a href="#__codelineno-58-59"> 59</a></span>
<span class="normal"><a href="#__codelineno-58-60"> 60</a></span>
<span class="normal"><a href="#__codelineno-58-61"> 61</a></span>
<span class="normal"><a href="#__codelineno-58-62"> 62</a></span>
<span class="normal"><a href="#__codelineno-58-63"> 63</a></span>
<span class="normal"><a href="#__codelineno-58-64"> 64</a></span>
<span class="normal"><a href="#__codelineno-58-65"> 65</a></span>
<span class="normal"><a href="#__codelineno-58-66"> 66</a></span>
<span class="normal"><a href="#__codelineno-58-67"> 67</a></span>
<span class="normal"><a href="#__codelineno-58-68"> 68</a></span>
<span class="normal"><a href="#__codelineno-58-69"> 69</a></span>
<span class="normal"><a href="#__codelineno-58-70"> 70</a></span>
<span class="normal"><a href="#__codelineno-58-71"> 71</a></span>
<span class="normal"><a href="#__codelineno-58-72"> 72</a></span>
<span class="normal"><a href="#__codelineno-58-73"> 73</a></span>
<span class="normal"><a href="#__codelineno-58-74"> 74</a></span>
<span class="normal"><a href="#__codelineno-58-75"> 75</a></span>
<span class="normal"><a href="#__codelineno-58-76"> 76</a></span>
<span class="normal"><a href="#__codelineno-58-77"> 77</a></span>
<span class="normal"><a href="#__codelineno-58-78"> 78</a></span>
<span class="normal"><a href="#__codelineno-58-79"> 79</a></span>
<span class="normal"><a href="#__codelineno-58-80"> 80</a></span>
<span class="normal"><a href="#__codelineno-58-81"> 81</a></span>
<span class="normal"><a href="#__codelineno-58-82"> 82</a></span>
<span class="normal"><a href="#__codelineno-58-83"> 83</a></span>
<span class="normal"><a href="#__codelineno-58-84"> 84</a></span>
<span class="normal"><a href="#__codelineno-58-85"> 85</a></span>
<span class="normal"><a href="#__codelineno-58-86"> 86</a></span>
<span class="normal"><a href="#__codelineno-58-87"> 87</a></span>
<span class="normal"><a href="#__codelineno-58-88"> 88</a></span>
<span class="normal"><a href="#__codelineno-58-89"> 89</a></span>
<span class="normal"><a href="#__codelineno-58-90"> 90</a></span>
<span class="normal"><a href="#__codelineno-58-91"> 91</a></span>
<span class="normal"><a href="#__codelineno-58-92"> 92</a></span>
<span class="normal"><a href="#__codelineno-58-93"> 93</a></span>
<span class="normal"><a href="#__codelineno-58-94"> 94</a></span>
<span class="normal"><a href="#__codelineno-58-95"> 95</a></span>
<span class="normal"><a href="#__codelineno-58-96"> 96</a></span>
<span class="normal"><a href="#__codelineno-58-97"> 97</a></span>
<span class="normal"><a href="#__codelineno-58-98"> 98</a></span>
<span class="normal"><a href="#__codelineno-58-99"> 99</a></span>
<span class="normal"><a href="#__codelineno-58-100">100</a></span>
<span class="normal"><a href="#__codelineno-58-101">101</a></span>
<span class="normal"><a href="#__codelineno-58-102">102</a></span>
<span class="normal"><a href="#__codelineno-58-103">103</a></span>
<span class="normal"><a href="#__codelineno-58-104">104</a></span>
<span class="normal"><a href="#__codelineno-58-105">105</a></span>
<span class="normal"><a href="#__codelineno-58-106">106</a></span>
<span class="normal"><a href="#__codelineno-58-107">107</a></span>
<span class="normal"><a href="#__codelineno-58-108">108</a></span>
<span class="normal"><a href="#__codelineno-58-109">109</a></span>
<span class="normal"><a href="#__codelineno-58-110">110</a></span>
<span class="normal"><a href="#__codelineno-58-111">111</a></span>
<span class="normal"><a href="#__codelineno-58-112">112</a></span>
<span class="normal"><a href="#__codelineno-58-113">113</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-58-1"><a id="__codelineno-58-1" name="__codelineno-58-1"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">useState</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;react&#39;</span><span class="p">;</span>
</span><span id="__span-58-2"><a id="__codelineno-58-2" name="__codelineno-58-2"></a>
</span><span id="__span-58-3"><a id="__codelineno-58-3" name="__codelineno-58-3"></a><span class="kd">function</span><span class="w"> </span><span class="nx">Square</span><span class="p">({</span><span class="w"> </span><span class="nx">value</span><span class="p">,</span><span class="w"> </span><span class="nx">onSquareClick</span><span class="w"> </span><span class="p">})</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-58-4"><a id="__codelineno-58-4" name="__codelineno-58-4"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-58-5"><a id="__codelineno-58-5" name="__codelineno-58-5"></a><span class="w">    </span><span class="p">&lt;</span><span class="nt">button</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;square&quot;</span><span class="w"> </span><span class="na">onClick</span><span class="o">=</span><span class="p">{</span><span class="nx">onSquareClick</span><span class="p">}&gt;</span>
</span><span id="__span-58-6"><a id="__codelineno-58-6" name="__codelineno-58-6"></a><span class="w">      </span><span class="p">{</span><span class="nx">value</span><span class="p">}</span>
</span><span id="__span-58-7"><a id="__codelineno-58-7" name="__codelineno-58-7"></a><span class="w">    </span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span><span id="__span-58-8"><a id="__codelineno-58-8" name="__codelineno-58-8"></a><span class="w">  </span><span class="p">);</span>
</span><span id="__span-58-9"><a id="__codelineno-58-9" name="__codelineno-58-9"></a><span class="p">}</span>
</span><span id="__span-58-10"><a id="__codelineno-58-10" name="__codelineno-58-10"></a>
</span><span id="__span-58-11"><a id="__codelineno-58-11" name="__codelineno-58-11"></a><span class="kd">function</span><span class="w"> </span><span class="nx">Board</span><span class="p">({</span><span class="w"> </span><span class="nx">xIsNext</span><span class="p">,</span><span class="w"> </span><span class="nx">squares</span><span class="p">,</span><span class="w"> </span><span class="nx">onPlay</span><span class="w"> </span><span class="p">})</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-58-12"><a id="__codelineno-58-12" name="__codelineno-58-12"></a><span class="w">  </span><span class="kd">function</span><span class="w"> </span><span class="nx">handleClick</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-58-13"><a id="__codelineno-58-13" name="__codelineno-58-13"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">calculateWinner</span><span class="p">(</span><span class="nx">squares</span><span class="p">)</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nx">squares</span><span class="p">[</span><span class="nx">i</span><span class="p">])</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-58-14"><a id="__codelineno-58-14" name="__codelineno-58-14"></a><span class="w">      </span><span class="k">return</span><span class="p">;</span>
</span><span id="__span-58-15"><a id="__codelineno-58-15" name="__codelineno-58-15"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-58-16"><a id="__codelineno-58-16" name="__codelineno-58-16"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">nextSquares</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">squares</span><span class="p">.</span><span class="nx">slice</span><span class="p">();</span>
</span><span id="__span-58-17"><a id="__codelineno-58-17" name="__codelineno-58-17"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">xIsNext</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-58-18"><a id="__codelineno-58-18" name="__codelineno-58-18"></a><span class="w">      </span><span class="nx">nextSquares</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;X&#39;</span><span class="p">;</span>
</span><span id="__span-58-19"><a id="__codelineno-58-19" name="__codelineno-58-19"></a><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-58-20"><a id="__codelineno-58-20" name="__codelineno-58-20"></a><span class="w">      </span><span class="nx">nextSquares</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;O&#39;</span><span class="p">;</span>
</span><span id="__span-58-21"><a id="__codelineno-58-21" name="__codelineno-58-21"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-58-22"><a id="__codelineno-58-22" name="__codelineno-58-22"></a><span class="w">    </span><span class="nx">onPlay</span><span class="p">(</span><span class="nx">nextSquares</span><span class="p">);</span>
</span><span id="__span-58-23"><a id="__codelineno-58-23" name="__codelineno-58-23"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-58-24"><a id="__codelineno-58-24" name="__codelineno-58-24"></a>
</span><span id="__span-58-25"><a id="__codelineno-58-25" name="__codelineno-58-25"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">winner</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">calculateWinner</span><span class="p">(</span><span class="nx">squares</span><span class="p">);</span>
</span><span id="__span-58-26"><a id="__codelineno-58-26" name="__codelineno-58-26"></a><span class="w">  </span><span class="kd">let</span><span class="w"> </span><span class="nx">status</span><span class="p">;</span>
</span><span id="__span-58-27"><a id="__codelineno-58-27" name="__codelineno-58-27"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">winner</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-58-28"><a id="__codelineno-58-28" name="__codelineno-58-28"></a><span class="w">    </span><span class="nx">status</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;Winner: &#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">winner</span><span class="p">;</span>
</span><span id="__span-58-29"><a id="__codelineno-58-29" name="__codelineno-58-29"></a><span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-58-30"><a id="__codelineno-58-30" name="__codelineno-58-30"></a><span class="w">    </span><span class="nx">status</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;Next player: &#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="p">(</span><span class="nx">xIsNext</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="s1">&#39;X&#39;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;O&#39;</span><span class="p">);</span>
</span><span id="__span-58-31"><a id="__codelineno-58-31" name="__codelineno-58-31"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-58-32"><a id="__codelineno-58-32" name="__codelineno-58-32"></a>
</span><span id="__span-58-33"><a id="__codelineno-58-33" name="__codelineno-58-33"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-58-34"><a id="__codelineno-58-34" name="__codelineno-58-34"></a><span class="w">    </span><span class="p">&lt;&gt;</span>
</span><span id="__span-58-35"><a id="__codelineno-58-35" name="__codelineno-58-35"></a><span class="w">      </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;status&quot;</span><span class="p">&gt;{</span><span class="nx">status</span><span class="p">}&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="__span-58-36"><a id="__codelineno-58-36" name="__codelineno-58-36"></a><span class="w">      </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;board-row&quot;</span><span class="p">&gt;</span>
</span><span id="__span-58-37"><a id="__codelineno-58-37" name="__codelineno-58-37"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">squares</span><span class="p">[</span><span class="mf">0</span><span class="p">]}</span><span class="w"> </span><span class="na">onSquareClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">handleClick</span><span class="p">(</span><span class="mf">0</span><span class="p">)}</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-58-38"><a id="__codelineno-58-38" name="__codelineno-58-38"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">squares</span><span class="p">[</span><span class="mf">1</span><span class="p">]}</span><span class="w"> </span><span class="na">onSquareClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">handleClick</span><span class="p">(</span><span class="mf">1</span><span class="p">)}</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-58-39"><a id="__codelineno-58-39" name="__codelineno-58-39"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">squares</span><span class="p">[</span><span class="mf">2</span><span class="p">]}</span><span class="w"> </span><span class="na">onSquareClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">handleClick</span><span class="p">(</span><span class="mf">2</span><span class="p">)}</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-58-40"><a id="__codelineno-58-40" name="__codelineno-58-40"></a><span class="w">      </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="__span-58-41"><a id="__codelineno-58-41" name="__codelineno-58-41"></a><span class="w">      </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;board-row&quot;</span><span class="p">&gt;</span>
</span><span id="__span-58-42"><a id="__codelineno-58-42" name="__codelineno-58-42"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">squares</span><span class="p">[</span><span class="mf">3</span><span class="p">]}</span><span class="w"> </span><span class="na">onSquareClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">handleClick</span><span class="p">(</span><span class="mf">3</span><span class="p">)}</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-58-43"><a id="__codelineno-58-43" name="__codelineno-58-43"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">squares</span><span class="p">[</span><span class="mf">4</span><span class="p">]}</span><span class="w"> </span><span class="na">onSquareClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">handleClick</span><span class="p">(</span><span class="mf">4</span><span class="p">)}</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-58-44"><a id="__codelineno-58-44" name="__codelineno-58-44"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">squares</span><span class="p">[</span><span class="mf">5</span><span class="p">]}</span><span class="w"> </span><span class="na">onSquareClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">handleClick</span><span class="p">(</span><span class="mf">5</span><span class="p">)}</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-58-45"><a id="__codelineno-58-45" name="__codelineno-58-45"></a><span class="w">      </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="__span-58-46"><a id="__codelineno-58-46" name="__codelineno-58-46"></a><span class="w">      </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;board-row&quot;</span><span class="p">&gt;</span>
</span><span id="__span-58-47"><a id="__codelineno-58-47" name="__codelineno-58-47"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">squares</span><span class="p">[</span><span class="mf">6</span><span class="p">]}</span><span class="w"> </span><span class="na">onSquareClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">handleClick</span><span class="p">(</span><span class="mf">6</span><span class="p">)}</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-58-48"><a id="__codelineno-58-48" name="__codelineno-58-48"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">squares</span><span class="p">[</span><span class="mf">7</span><span class="p">]}</span><span class="w"> </span><span class="na">onSquareClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">handleClick</span><span class="p">(</span><span class="mf">7</span><span class="p">)}</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-58-49"><a id="__codelineno-58-49" name="__codelineno-58-49"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">squares</span><span class="p">[</span><span class="mf">8</span><span class="p">]}</span><span class="w"> </span><span class="na">onSquareClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">handleClick</span><span class="p">(</span><span class="mf">8</span><span class="p">)}</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-58-50"><a id="__codelineno-58-50" name="__codelineno-58-50"></a><span class="w">      </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="__span-58-51"><a id="__codelineno-58-51" name="__codelineno-58-51"></a><span class="w">    </span><span class="p">&lt;/&gt;</span>
</span><span id="__span-58-52"><a id="__codelineno-58-52" name="__codelineno-58-52"></a><span class="w">  </span><span class="p">);</span>
</span><span id="__span-58-53"><a id="__codelineno-58-53" name="__codelineno-58-53"></a><span class="p">}</span>
</span><span id="__span-58-54"><a id="__codelineno-58-54" name="__codelineno-58-54"></a>
</span><span id="__span-58-55"><a id="__codelineno-58-55" name="__codelineno-58-55"></a><span class="k">export</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">Game</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-58-56"><a id="__codelineno-58-56" name="__codelineno-58-56"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">xIsNext</span><span class="p">,</span><span class="w"> </span><span class="nx">setXIsNext</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useState</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
</span><span id="__span-58-57"><a id="__codelineno-58-57" name="__codelineno-58-57"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">history</span><span class="p">,</span><span class="w"> </span><span class="nx">setHistory</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useState</span><span class="p">([</span><span class="nb">Array</span><span class="p">(</span><span class="mf">9</span><span class="p">).</span><span class="nx">fill</span><span class="p">(</span><span class="kc">null</span><span class="p">)]);</span>
</span><span id="__span-58-58"><a id="__codelineno-58-58" name="__codelineno-58-58"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">currentSquares</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">history</span><span class="p">[</span><span class="nx">history</span><span class="p">.</span><span class="nx">length</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">1</span><span class="p">];</span>
</span><span id="__span-58-59"><a id="__codelineno-58-59" name="__codelineno-58-59"></a>
</span><span id="__span-58-60"><a id="__codelineno-58-60" name="__codelineno-58-60"></a><span class="w">  </span><span class="kd">function</span><span class="w"> </span><span class="nx">handlePlay</span><span class="p">(</span><span class="nx">nextSquares</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-58-61"><a id="__codelineno-58-61" name="__codelineno-58-61"></a><span class="w">    </span><span class="nx">setHistory</span><span class="p">([...</span><span class="nx">history</span><span class="p">,</span><span class="w"> </span><span class="nx">nextSquares</span><span class="p">]);</span>
</span><span id="__span-58-62"><a id="__codelineno-58-62" name="__codelineno-58-62"></a><span class="w">    </span><span class="nx">setXIsNext</span><span class="p">(</span><span class="o">!</span><span class="nx">xIsNext</span><span class="p">);</span>
</span><span id="__span-58-63"><a id="__codelineno-58-63" name="__codelineno-58-63"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-58-64"><a id="__codelineno-58-64" name="__codelineno-58-64"></a>
</span><span id="__span-58-65"><a id="__codelineno-58-65" name="__codelineno-58-65"></a><span class="w">  </span><span class="kd">function</span><span class="w"> </span><span class="nx">jumpTo</span><span class="p">(</span><span class="nx">nextMove</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-58-66"><a id="__codelineno-58-66" name="__codelineno-58-66"></a><span class="w">    </span><span class="c1">// TODO</span>
</span><span id="__span-58-67"><a id="__codelineno-58-67" name="__codelineno-58-67"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-58-68"><a id="__codelineno-58-68" name="__codelineno-58-68"></a>
</span><span id="__span-58-69"><a id="__codelineno-58-69" name="__codelineno-58-69"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">moves</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">history</span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">squares</span><span class="p">,</span><span class="w"> </span><span class="nx">move</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-58-70"><a id="__codelineno-58-70" name="__codelineno-58-70"></a><span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="nx">description</span><span class="p">;</span>
</span><span id="__span-58-71"><a id="__codelineno-58-71" name="__codelineno-58-71"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">move</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mf">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-58-72"><a id="__codelineno-58-72" name="__codelineno-58-72"></a><span class="w">      </span><span class="nx">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;Go to move #&#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">move</span><span class="p">;</span>
</span><span id="__span-58-73"><a id="__codelineno-58-73" name="__codelineno-58-73"></a><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-58-74"><a id="__codelineno-58-74" name="__codelineno-58-74"></a><span class="w">      </span><span class="nx">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;Go to game start&#39;</span><span class="p">;</span>
</span><span id="__span-58-75"><a id="__codelineno-58-75" name="__codelineno-58-75"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-58-76"><a id="__codelineno-58-76" name="__codelineno-58-76"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-58-77"><a id="__codelineno-58-77" name="__codelineno-58-77"></a><span class="w">      </span><span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>
</span><span id="__span-58-78"><a id="__codelineno-58-78" name="__codelineno-58-78"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">button</span><span class="w"> </span><span class="na">onClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">jumpTo</span><span class="p">(</span><span class="nx">move</span><span class="p">)}&gt;{</span><span class="nx">description</span><span class="p">}&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span><span id="__span-58-79"><a id="__codelineno-58-79" name="__codelineno-58-79"></a><span class="w">      </span><span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
</span><span id="__span-58-80"><a id="__codelineno-58-80" name="__codelineno-58-80"></a><span class="w">    </span><span class="p">);</span>
</span><span id="__span-58-81"><a id="__codelineno-58-81" name="__codelineno-58-81"></a><span class="w">  </span><span class="p">});</span>
</span><span id="__span-58-82"><a id="__codelineno-58-82" name="__codelineno-58-82"></a>
</span><span id="__span-58-83"><a id="__codelineno-58-83" name="__codelineno-58-83"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-58-84"><a id="__codelineno-58-84" name="__codelineno-58-84"></a><span class="w">    </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;game&quot;</span><span class="p">&gt;</span>
</span><span id="__span-58-85"><a id="__codelineno-58-85" name="__codelineno-58-85"></a><span class="w">      </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;game-board&quot;</span><span class="p">&gt;</span>
</span><span id="__span-58-86"><a id="__codelineno-58-86" name="__codelineno-58-86"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Board</span><span class="w"> </span><span class="na">xIsNext</span><span class="o">=</span><span class="p">{</span><span class="nx">xIsNext</span><span class="p">}</span><span class="w"> </span><span class="na">squares</span><span class="o">=</span><span class="p">{</span><span class="nx">currentSquares</span><span class="p">}</span><span class="w"> </span><span class="na">onPlay</span><span class="o">=</span><span class="p">{</span><span class="nx">handlePlay</span><span class="p">}</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-58-87"><a id="__codelineno-58-87" name="__codelineno-58-87"></a><span class="w">      </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="__span-58-88"><a id="__codelineno-58-88" name="__codelineno-58-88"></a><span class="w">      </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;game-info&quot;</span><span class="p">&gt;</span>
</span><span id="__span-58-89"><a id="__codelineno-58-89" name="__codelineno-58-89"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">ol</span><span class="p">&gt;{</span><span class="nx">moves</span><span class="p">}&lt;/</span><span class="nt">ol</span><span class="p">&gt;</span>
</span><span id="__span-58-90"><a id="__codelineno-58-90" name="__codelineno-58-90"></a><span class="w">      </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="__span-58-91"><a id="__codelineno-58-91" name="__codelineno-58-91"></a><span class="w">    </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="__span-58-92"><a id="__codelineno-58-92" name="__codelineno-58-92"></a><span class="w">  </span><span class="p">);</span>
</span><span id="__span-58-93"><a id="__codelineno-58-93" name="__codelineno-58-93"></a><span class="p">}</span>
</span><span id="__span-58-94"><a id="__codelineno-58-94" name="__codelineno-58-94"></a>
</span><span id="__span-58-95"><a id="__codelineno-58-95" name="__codelineno-58-95"></a><span class="kd">function</span><span class="w"> </span><span class="nx">calculateWinner</span><span class="p">(</span><span class="nx">squares</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-58-96"><a id="__codelineno-58-96" name="__codelineno-58-96"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">lines</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
</span><span id="__span-58-97"><a id="__codelineno-58-97" name="__codelineno-58-97"></a><span class="w">    </span><span class="p">[</span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">2</span><span class="p">],</span>
</span><span id="__span-58-98"><a id="__codelineno-58-98" name="__codelineno-58-98"></a><span class="w">    </span><span class="p">[</span><span class="mf">3</span><span class="p">,</span><span class="w"> </span><span class="mf">4</span><span class="p">,</span><span class="w"> </span><span class="mf">5</span><span class="p">],</span>
</span><span id="__span-58-99"><a id="__codelineno-58-99" name="__codelineno-58-99"></a><span class="w">    </span><span class="p">[</span><span class="mf">6</span><span class="p">,</span><span class="w"> </span><span class="mf">7</span><span class="p">,</span><span class="w"> </span><span class="mf">8</span><span class="p">],</span>
</span><span id="__span-58-100"><a id="__codelineno-58-100" name="__codelineno-58-100"></a><span class="w">    </span><span class="p">[</span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">3</span><span class="p">,</span><span class="w"> </span><span class="mf">6</span><span class="p">],</span>
</span><span id="__span-58-101"><a id="__codelineno-58-101" name="__codelineno-58-101"></a><span class="w">    </span><span class="p">[</span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">4</span><span class="p">,</span><span class="w"> </span><span class="mf">7</span><span class="p">],</span>
</span><span id="__span-58-102"><a id="__codelineno-58-102" name="__codelineno-58-102"></a><span class="w">    </span><span class="p">[</span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="mf">5</span><span class="p">,</span><span class="w"> </span><span class="mf">8</span><span class="p">],</span>
</span><span id="__span-58-103"><a id="__codelineno-58-103" name="__codelineno-58-103"></a><span class="w">    </span><span class="p">[</span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">4</span><span class="p">,</span><span class="w"> </span><span class="mf">8</span><span class="p">],</span>
</span><span id="__span-58-104"><a id="__codelineno-58-104" name="__codelineno-58-104"></a><span class="w">    </span><span class="p">[</span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="mf">4</span><span class="p">,</span><span class="w"> </span><span class="mf">6</span><span class="p">],</span>
</span><span id="__span-58-105"><a id="__codelineno-58-105" name="__codelineno-58-105"></a><span class="w">  </span><span class="p">];</span>
</span><span id="__span-58-106"><a id="__codelineno-58-106" name="__codelineno-58-106"></a><span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">let</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="nx">lines</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-58-107"><a id="__codelineno-58-107" name="__codelineno-58-107"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">a</span><span class="p">,</span><span class="w"> </span><span class="nx">b</span><span class="p">,</span><span class="w"> </span><span class="nx">c</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">lines</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
</span><span id="__span-58-108"><a id="__codelineno-58-108" name="__codelineno-58-108"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">squares</span><span class="p">[</span><span class="nx">a</span><span class="p">]</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nx">squares</span><span class="p">[</span><span class="nx">a</span><span class="p">]</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="nx">squares</span><span class="p">[</span><span class="nx">b</span><span class="p">]</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nx">squares</span><span class="p">[</span><span class="nx">a</span><span class="p">]</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="nx">squares</span><span class="p">[</span><span class="nx">c</span><span class="p">])</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-58-109"><a id="__codelineno-58-109" name="__codelineno-58-109"></a><span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="nx">squares</span><span class="p">[</span><span class="nx">a</span><span class="p">];</span>
</span><span id="__span-58-110"><a id="__codelineno-58-110" name="__codelineno-58-110"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-58-111"><a id="__codelineno-58-111" name="__codelineno-58-111"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-58-112"><a id="__codelineno-58-112" name="__codelineno-58-112"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="kc">null</span><span class="p">;</span>
</span><span id="__span-58-113"><a id="__codelineno-58-113" name="__codelineno-58-113"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<p>当你在传递给 <code>map</code> 的函数中遍历 <code>history</code> 数组时，<code>squares</code> 参数遍历 <code>history</code> 的每个元素，<code>move</code> 参数遍历每个数组索引：<code>0</code> 、<code>1</code>、<code>2</code>……（在大多数情况下，你需要数组元素，但要渲染落子列表，你只需要索引。）</p>
<p>对于井字棋游戏历史中的每一步，你创建一个列表项 <code>&lt;li&gt;</code>，其中包含一个按钮 <code>&lt;button&gt;</code>。该按钮有一个 <code>onClick</code> 处理程序，它调用一个名为 <code>jumpTo</code> 的函数（你尚未实现）。</p>
<p>现在，你应该会看到游戏中发生的动作列表和开发人员工具控制台中的错误。让我们讨论一下“关键”错误的含义。</p>
<h3 id="44-key">4.4 选择 key<a class="headerlink" href="#44-key" title="Permanent link">&para;</a></h3>
<p>当你渲染一个列表时，React 会存储一些关于每个渲染列表项的信息。当你更新一个列表时，React 需要确定发生了什么变化。你可以添加、删除、重新排列或更新列表的项目。</p>
<p>想象一下从</p>
<div class="language-jsx highlight"><pre><span></span><code><span id="__span-59-1"><a id="__codelineno-59-1" name="__codelineno-59-1" href="#__codelineno-59-1"></a><span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span><span class="nx">Alexa</span><span class="o">:</span><span class="w"> </span><span class="mf">7</span><span class="w"> </span><span class="nx">tasks</span><span class="w"> </span><span class="nx">left</span><span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
</span><span id="__span-59-2"><a id="__codelineno-59-2" name="__codelineno-59-2" href="#__codelineno-59-2"></a><span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span><span class="nx">Ben</span><span class="o">:</span><span class="w"> </span><span class="mf">5</span><span class="w"> </span><span class="nx">tasks</span><span class="w"> </span><span class="nx">left</span><span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
</span></code></pre></div>
<p>到</p>
<div class="language-jsx highlight"><pre><span></span><code><span id="__span-60-1"><a id="__codelineno-60-1" name="__codelineno-60-1" href="#__codelineno-60-1"></a><span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span><span class="nx">Ben</span><span class="o">:</span><span class="w"> </span><span class="mf">9</span><span class="w"> </span><span class="nx">tasks</span><span class="w"> </span><span class="nx">left</span><span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
</span><span id="__span-60-2"><a id="__codelineno-60-2" name="__codelineno-60-2" href="#__codelineno-60-2"></a><span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span><span class="nx">Claudia</span><span class="o">:</span><span class="w"> </span><span class="mf">8</span><span class="w"> </span><span class="nx">tasks</span><span class="w"> </span><span class="nx">left</span><span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
</span><span id="__span-60-3"><a id="__codelineno-60-3" name="__codelineno-60-3" href="#__codelineno-60-3"></a><span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span><span class="nx">Alexa</span><span class="o">:</span><span class="w"> </span><span class="mf">5</span><span class="w"> </span><span class="nx">tasks</span><span class="w"> </span><span class="nx">left</span><span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
</span></code></pre></div>
<p>除了更新的计数之外，阅读本文的人可能会说你交换了 Alexa 和 Ben 的顺序，并在 Alexa 和 Ben 之间插入了 Claudia。然而，React 是一个计算机程序，不知道你的意图，因此你需要为每个列表项指定一个 key 属性，以将每个列表项与其兄弟项区分开来。如果你的数据来自数据库，Alexa、Ben 和 Claudia 的数据库 ID 可以用作 key：</p>
<div class="language-jsx highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-61-1">1</a></span>
<span class="normal"><a href="#__codelineno-61-2">2</a></span>
<span class="normal"><a href="#__codelineno-61-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-61-1"><a id="__codelineno-61-1" name="__codelineno-61-1"></a><span class="p">&lt;</span><span class="nt">li</span><span class="w"> </span><span class="na">key</span><span class="o">=</span><span class="p">{</span><span class="nx">user</span><span class="p">.</span><span class="nx">id</span><span class="p">}&gt;</span>
</span><span id="__span-61-2"><a id="__codelineno-61-2" name="__codelineno-61-2"></a><span class="w">  </span><span class="p">{</span><span class="nx">user</span><span class="p">.</span><span class="nx">name</span><span class="p">}</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="nx">user</span><span class="p">.</span><span class="nx">taskCount</span><span class="p">}</span><span class="w"> </span><span class="nx">tasks</span><span class="w"> </span><span class="nx">left</span>
</span><span id="__span-61-3"><a id="__codelineno-61-3" name="__codelineno-61-3"></a><span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
</span></code></pre></div></td></tr></table></div>
<p>重新渲染列表时，React 获取每个列表项的 key 并搜索前一个列表的项以查找匹配的 key。如果当前列表有一个之前不存在的 key，React 会创建一个组件。如果当前列表缺少前一个列表中存在的 key，React 会销毁前一个组件。如果两个 key 匹配，则落子相应的组件。</p>
<p>key 告诉 React 每个组件的身份，这使得 React 可以在重新渲染时保持 state。如果组件的 key 发生变化，组件将被销毁，新 state 将重新创建。</p>
<p><code>key</code> 是 React 中一个特殊的保留属性。创建元素时，React 提取 <code>key</code> 属性并将 key 直接存储在返回的元素上。尽管 <code>key</code> 看起来像是作为 props 传递的，但 React 会自动使用 <code>key</code> 来决定要更新哪些组件。组件无法询问其父组件指定的 <code>key</code>。</p>
<p><strong>强烈建议你在构建动态列表时分配适当的 key</strong>。如果你没有合适的 key，你可能需要考虑重组你的数据，以便你这样做。</p>
<p>如果没有指定 key，React 会报错，默认使用数组索引作为 key。在尝试重新排序列表项或插入/删除列表项时，使用数组索引作为 key 是有问题的。显式传递 <code>key={i}</code> 可以消除错误，但与数组索引有相同的问题，在大多数情况下不推荐使用。</p>
<p>key 不需要是全局唯一的；它们只需要在组件及其同级组件之间是唯一的。</p>
<h3 id="45">4.5 实现时间旅行<a class="headerlink" href="#45" title="Permanent link">&para;</a></h3>
<p>在井字棋游戏的历史中，过去的每一步都有一个唯一的 ID 与之相关联：它是动作的序号。落子永远不会被重新排序、删除或从中间插入，因此使用落子的索引作为 key 是安全的。</p>
<p>在 <code>Game</code> 函数中，你可以将 key 添加为 <code>&lt;li key={move}&gt;</code>，如果你重新加载渲染的游戏，React 的“key”错误应该会消失：</p>
<div class="language-jsx highlight"><pre><span></span><code><span id="__span-62-1"><a id="__codelineno-62-1" name="__codelineno-62-1" href="#__codelineno-62-1"></a><span class="kd">const</span><span class="w"> </span><span class="nx">moves</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">history</span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">squares</span><span class="p">,</span><span class="w"> </span><span class="nx">move</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-62-2"><a id="__codelineno-62-2" name="__codelineno-62-2" href="#__codelineno-62-2"></a><span class="w">  </span><span class="c1">//...</span>
</span><span id="__span-62-3"><a id="__codelineno-62-3" name="__codelineno-62-3" href="#__codelineno-62-3"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-62-4"><a id="__codelineno-62-4" name="__codelineno-62-4" href="#__codelineno-62-4"></a><span class="w">    </span><span class="p">&lt;</span><span class="nt">li</span><span class="w"> </span><span class="na">key</span><span class="o">=</span><span class="p">{</span><span class="nx">move</span><span class="p">}&gt;</span>
</span><span id="__span-62-5"><a id="__codelineno-62-5" name="__codelineno-62-5" href="#__codelineno-62-5"></a><span class="w">      </span><span class="p">&lt;</span><span class="nt">button</span><span class="w"> </span><span class="na">onClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">jumpTo</span><span class="p">(</span><span class="nx">move</span><span class="p">)}&gt;{</span><span class="nx">description</span><span class="p">}&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span><span id="__span-62-6"><a id="__codelineno-62-6" name="__codelineno-62-6" href="#__codelineno-62-6"></a><span class="w">    </span><span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
</span><span id="__span-62-7"><a id="__codelineno-62-7" name="__codelineno-62-7" href="#__codelineno-62-7"></a><span class="w">  </span><span class="p">);</span>
</span><span id="__span-62-8"><a id="__codelineno-62-8" name="__codelineno-62-8" href="#__codelineno-62-8"></a><span class="p">});</span>
</span></code></pre></div>
<div class="language-jsx highlight"><span class="filename">App.js</span><pre><span></span><code><span id="__span-63-1"><a id="__codelineno-63-1" name="__codelineno-63-1" href="#__codelineno-63-1"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">useState</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;react&#39;</span><span class="p">;</span>
</span><span id="__span-63-2"><a id="__codelineno-63-2" name="__codelineno-63-2" href="#__codelineno-63-2"></a>
</span><span id="__span-63-3"><a id="__codelineno-63-3" name="__codelineno-63-3" href="#__codelineno-63-3"></a><span class="kd">function</span><span class="w"> </span><span class="nx">Square</span><span class="p">({</span><span class="w"> </span><span class="nx">value</span><span class="p">,</span><span class="w"> </span><span class="nx">onSquareClick</span><span class="w"> </span><span class="p">})</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-63-4"><a id="__codelineno-63-4" name="__codelineno-63-4" href="#__codelineno-63-4"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-63-5"><a id="__codelineno-63-5" name="__codelineno-63-5" href="#__codelineno-63-5"></a><span class="w">    </span><span class="p">&lt;</span><span class="nt">button</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;square&quot;</span><span class="w"> </span><span class="na">onClick</span><span class="o">=</span><span class="p">{</span><span class="nx">onSquareClick</span><span class="p">}&gt;</span>
</span><span id="__span-63-6"><a id="__codelineno-63-6" name="__codelineno-63-6" href="#__codelineno-63-6"></a><span class="w">      </span><span class="p">{</span><span class="nx">value</span><span class="p">}</span>
</span><span id="__span-63-7"><a id="__codelineno-63-7" name="__codelineno-63-7" href="#__codelineno-63-7"></a><span class="w">    </span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span><span id="__span-63-8"><a id="__codelineno-63-8" name="__codelineno-63-8" href="#__codelineno-63-8"></a><span class="w">  </span><span class="p">);</span>
</span><span id="__span-63-9"><a id="__codelineno-63-9" name="__codelineno-63-9" href="#__codelineno-63-9"></a><span class="p">}</span>
</span><span id="__span-63-10"><a id="__codelineno-63-10" name="__codelineno-63-10" href="#__codelineno-63-10"></a>
</span><span id="__span-63-11"><a id="__codelineno-63-11" name="__codelineno-63-11" href="#__codelineno-63-11"></a><span class="kd">function</span><span class="w"> </span><span class="nx">Board</span><span class="p">({</span><span class="w"> </span><span class="nx">xIsNext</span><span class="p">,</span><span class="w"> </span><span class="nx">squares</span><span class="p">,</span><span class="w"> </span><span class="nx">onPlay</span><span class="w"> </span><span class="p">})</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-63-12"><a id="__codelineno-63-12" name="__codelineno-63-12" href="#__codelineno-63-12"></a><span class="w">  </span><span class="kd">function</span><span class="w"> </span><span class="nx">handleClick</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-63-13"><a id="__codelineno-63-13" name="__codelineno-63-13" href="#__codelineno-63-13"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">calculateWinner</span><span class="p">(</span><span class="nx">squares</span><span class="p">)</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nx">squares</span><span class="p">[</span><span class="nx">i</span><span class="p">])</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-63-14"><a id="__codelineno-63-14" name="__codelineno-63-14" href="#__codelineno-63-14"></a><span class="w">      </span><span class="k">return</span><span class="p">;</span>
</span><span id="__span-63-15"><a id="__codelineno-63-15" name="__codelineno-63-15" href="#__codelineno-63-15"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-63-16"><a id="__codelineno-63-16" name="__codelineno-63-16" href="#__codelineno-63-16"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">nextSquares</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">squares</span><span class="p">.</span><span class="nx">slice</span><span class="p">();</span>
</span><span id="__span-63-17"><a id="__codelineno-63-17" name="__codelineno-63-17" href="#__codelineno-63-17"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">xIsNext</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-63-18"><a id="__codelineno-63-18" name="__codelineno-63-18" href="#__codelineno-63-18"></a><span class="w">      </span><span class="nx">nextSquares</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;X&#39;</span><span class="p">;</span>
</span><span id="__span-63-19"><a id="__codelineno-63-19" name="__codelineno-63-19" href="#__codelineno-63-19"></a><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-63-20"><a id="__codelineno-63-20" name="__codelineno-63-20" href="#__codelineno-63-20"></a><span class="w">      </span><span class="nx">nextSquares</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;O&#39;</span><span class="p">;</span>
</span><span id="__span-63-21"><a id="__codelineno-63-21" name="__codelineno-63-21" href="#__codelineno-63-21"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-63-22"><a id="__codelineno-63-22" name="__codelineno-63-22" href="#__codelineno-63-22"></a><span class="w">    </span><span class="nx">onPlay</span><span class="p">(</span><span class="nx">nextSquares</span><span class="p">);</span>
</span><span id="__span-63-23"><a id="__codelineno-63-23" name="__codelineno-63-23" href="#__codelineno-63-23"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-63-24"><a id="__codelineno-63-24" name="__codelineno-63-24" href="#__codelineno-63-24"></a>
</span><span id="__span-63-25"><a id="__codelineno-63-25" name="__codelineno-63-25" href="#__codelineno-63-25"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">winner</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">calculateWinner</span><span class="p">(</span><span class="nx">squares</span><span class="p">);</span>
</span><span id="__span-63-26"><a id="__codelineno-63-26" name="__codelineno-63-26" href="#__codelineno-63-26"></a><span class="w">  </span><span class="kd">let</span><span class="w"> </span><span class="nx">status</span><span class="p">;</span>
</span><span id="__span-63-27"><a id="__codelineno-63-27" name="__codelineno-63-27" href="#__codelineno-63-27"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">winner</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-63-28"><a id="__codelineno-63-28" name="__codelineno-63-28" href="#__codelineno-63-28"></a><span class="w">    </span><span class="nx">status</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;Winner: &#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">winner</span><span class="p">;</span>
</span><span id="__span-63-29"><a id="__codelineno-63-29" name="__codelineno-63-29" href="#__codelineno-63-29"></a><span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-63-30"><a id="__codelineno-63-30" name="__codelineno-63-30" href="#__codelineno-63-30"></a><span class="w">    </span><span class="nx">status</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;Next player: &#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="p">(</span><span class="nx">xIsNext</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="s1">&#39;X&#39;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;O&#39;</span><span class="p">);</span>
</span><span id="__span-63-31"><a id="__codelineno-63-31" name="__codelineno-63-31" href="#__codelineno-63-31"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-63-32"><a id="__codelineno-63-32" name="__codelineno-63-32" href="#__codelineno-63-32"></a>
</span><span id="__span-63-33"><a id="__codelineno-63-33" name="__codelineno-63-33" href="#__codelineno-63-33"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-63-34"><a id="__codelineno-63-34" name="__codelineno-63-34" href="#__codelineno-63-34"></a><span class="w">    </span><span class="p">&lt;&gt;</span>
</span><span id="__span-63-35"><a id="__codelineno-63-35" name="__codelineno-63-35" href="#__codelineno-63-35"></a><span class="w">      </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;status&quot;</span><span class="p">&gt;{</span><span class="nx">status</span><span class="p">}&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="__span-63-36"><a id="__codelineno-63-36" name="__codelineno-63-36" href="#__codelineno-63-36"></a><span class="w">      </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;board-row&quot;</span><span class="p">&gt;</span>
</span><span id="__span-63-37"><a id="__codelineno-63-37" name="__codelineno-63-37" href="#__codelineno-63-37"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">squares</span><span class="p">[</span><span class="mf">0</span><span class="p">]}</span><span class="w"> </span><span class="na">onSquareClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">handleClick</span><span class="p">(</span><span class="mf">0</span><span class="p">)}</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-63-38"><a id="__codelineno-63-38" name="__codelineno-63-38" href="#__codelineno-63-38"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">squares</span><span class="p">[</span><span class="mf">1</span><span class="p">]}</span><span class="w"> </span><span class="na">onSquareClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">handleClick</span><span class="p">(</span><span class="mf">1</span><span class="p">)}</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-63-39"><a id="__codelineno-63-39" name="__codelineno-63-39" href="#__codelineno-63-39"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">squares</span><span class="p">[</span><span class="mf">2</span><span class="p">]}</span><span class="w"> </span><span class="na">onSquareClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">handleClick</span><span class="p">(</span><span class="mf">2</span><span class="p">)}</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-63-40"><a id="__codelineno-63-40" name="__codelineno-63-40" href="#__codelineno-63-40"></a><span class="w">      </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="__span-63-41"><a id="__codelineno-63-41" name="__codelineno-63-41" href="#__codelineno-63-41"></a><span class="w">      </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;board-row&quot;</span><span class="p">&gt;</span>
</span><span id="__span-63-42"><a id="__codelineno-63-42" name="__codelineno-63-42" href="#__codelineno-63-42"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">squares</span><span class="p">[</span><span class="mf">3</span><span class="p">]}</span><span class="w"> </span><span class="na">onSquareClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">handleClick</span><span class="p">(</span><span class="mf">3</span><span class="p">)}</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-63-43"><a id="__codelineno-63-43" name="__codelineno-63-43" href="#__codelineno-63-43"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">squares</span><span class="p">[</span><span class="mf">4</span><span class="p">]}</span><span class="w"> </span><span class="na">onSquareClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">handleClick</span><span class="p">(</span><span class="mf">4</span><span class="p">)}</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-63-44"><a id="__codelineno-63-44" name="__codelineno-63-44" href="#__codelineno-63-44"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">squares</span><span class="p">[</span><span class="mf">5</span><span class="p">]}</span><span class="w"> </span><span class="na">onSquareClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">handleClick</span><span class="p">(</span><span class="mf">5</span><span class="p">)}</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-63-45"><a id="__codelineno-63-45" name="__codelineno-63-45" href="#__codelineno-63-45"></a><span class="w">      </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="__span-63-46"><a id="__codelineno-63-46" name="__codelineno-63-46" href="#__codelineno-63-46"></a><span class="w">      </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;board-row&quot;</span><span class="p">&gt;</span>
</span><span id="__span-63-47"><a id="__codelineno-63-47" name="__codelineno-63-47" href="#__codelineno-63-47"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">squares</span><span class="p">[</span><span class="mf">6</span><span class="p">]}</span><span class="w"> </span><span class="na">onSquareClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">handleClick</span><span class="p">(</span><span class="mf">6</span><span class="p">)}</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-63-48"><a id="__codelineno-63-48" name="__codelineno-63-48" href="#__codelineno-63-48"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">squares</span><span class="p">[</span><span class="mf">7</span><span class="p">]}</span><span class="w"> </span><span class="na">onSquareClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">handleClick</span><span class="p">(</span><span class="mf">7</span><span class="p">)}</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-63-49"><a id="__codelineno-63-49" name="__codelineno-63-49" href="#__codelineno-63-49"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">squares</span><span class="p">[</span><span class="mf">8</span><span class="p">]}</span><span class="w"> </span><span class="na">onSquareClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">handleClick</span><span class="p">(</span><span class="mf">8</span><span class="p">)}</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-63-50"><a id="__codelineno-63-50" name="__codelineno-63-50" href="#__codelineno-63-50"></a><span class="w">      </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="__span-63-51"><a id="__codelineno-63-51" name="__codelineno-63-51" href="#__codelineno-63-51"></a><span class="w">    </span><span class="p">&lt;/&gt;</span>
</span><span id="__span-63-52"><a id="__codelineno-63-52" name="__codelineno-63-52" href="#__codelineno-63-52"></a><span class="w">  </span><span class="p">);</span>
</span><span id="__span-63-53"><a id="__codelineno-63-53" name="__codelineno-63-53" href="#__codelineno-63-53"></a><span class="p">}</span>
</span><span id="__span-63-54"><a id="__codelineno-63-54" name="__codelineno-63-54" href="#__codelineno-63-54"></a>
</span><span id="__span-63-55"><a id="__codelineno-63-55" name="__codelineno-63-55" href="#__codelineno-63-55"></a><span class="k">export</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">Game</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-63-56"><a id="__codelineno-63-56" name="__codelineno-63-56" href="#__codelineno-63-56"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">xIsNext</span><span class="p">,</span><span class="w"> </span><span class="nx">setXIsNext</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useState</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
</span><span id="__span-63-57"><a id="__codelineno-63-57" name="__codelineno-63-57" href="#__codelineno-63-57"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">history</span><span class="p">,</span><span class="w"> </span><span class="nx">setHistory</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useState</span><span class="p">([</span><span class="nb">Array</span><span class="p">(</span><span class="mf">9</span><span class="p">).</span><span class="nx">fill</span><span class="p">(</span><span class="kc">null</span><span class="p">)]);</span>
</span><span id="__span-63-58"><a id="__codelineno-63-58" name="__codelineno-63-58" href="#__codelineno-63-58"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">currentSquares</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">history</span><span class="p">[</span><span class="nx">history</span><span class="p">.</span><span class="nx">length</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">1</span><span class="p">];</span>
</span><span id="__span-63-59"><a id="__codelineno-63-59" name="__codelineno-63-59" href="#__codelineno-63-59"></a>
</span><span id="__span-63-60"><a id="__codelineno-63-60" name="__codelineno-63-60" href="#__codelineno-63-60"></a><span class="w">  </span><span class="kd">function</span><span class="w"> </span><span class="nx">handlePlay</span><span class="p">(</span><span class="nx">nextSquares</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-63-61"><a id="__codelineno-63-61" name="__codelineno-63-61" href="#__codelineno-63-61"></a><span class="w">    </span><span class="nx">setHistory</span><span class="p">([...</span><span class="nx">history</span><span class="p">,</span><span class="w"> </span><span class="nx">nextSquares</span><span class="p">]);</span>
</span><span id="__span-63-62"><a id="__codelineno-63-62" name="__codelineno-63-62" href="#__codelineno-63-62"></a><span class="w">    </span><span class="nx">setXIsNext</span><span class="p">(</span><span class="o">!</span><span class="nx">xIsNext</span><span class="p">);</span>
</span><span id="__span-63-63"><a id="__codelineno-63-63" name="__codelineno-63-63" href="#__codelineno-63-63"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-63-64"><a id="__codelineno-63-64" name="__codelineno-63-64" href="#__codelineno-63-64"></a>
</span><span id="__span-63-65"><a id="__codelineno-63-65" name="__codelineno-63-65" href="#__codelineno-63-65"></a><span class="w">  </span><span class="kd">function</span><span class="w"> </span><span class="nx">jumpTo</span><span class="p">(</span><span class="nx">nextMove</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-63-66"><a id="__codelineno-63-66" name="__codelineno-63-66" href="#__codelineno-63-66"></a><span class="w">    </span><span class="c1">// TODO</span>
</span><span id="__span-63-67"><a id="__codelineno-63-67" name="__codelineno-63-67" href="#__codelineno-63-67"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-63-68"><a id="__codelineno-63-68" name="__codelineno-63-68" href="#__codelineno-63-68"></a>
</span><span id="__span-63-69"><a id="__codelineno-63-69" name="__codelineno-63-69" href="#__codelineno-63-69"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">moves</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">history</span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">squares</span><span class="p">,</span><span class="w"> </span><span class="nx">move</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-63-70"><a id="__codelineno-63-70" name="__codelineno-63-70" href="#__codelineno-63-70"></a><span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="nx">description</span><span class="p">;</span>
</span><span id="__span-63-71"><a id="__codelineno-63-71" name="__codelineno-63-71" href="#__codelineno-63-71"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">move</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mf">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-63-72"><a id="__codelineno-63-72" name="__codelineno-63-72" href="#__codelineno-63-72"></a><span class="w">      </span><span class="nx">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;Go to move #&#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">move</span><span class="p">;</span>
</span><span id="__span-63-73"><a id="__codelineno-63-73" name="__codelineno-63-73" href="#__codelineno-63-73"></a><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-63-74"><a id="__codelineno-63-74" name="__codelineno-63-74" href="#__codelineno-63-74"></a><span class="w">      </span><span class="nx">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;Go to game start&#39;</span><span class="p">;</span>
</span><span id="__span-63-75"><a id="__codelineno-63-75" name="__codelineno-63-75" href="#__codelineno-63-75"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-63-76"><a id="__codelineno-63-76" name="__codelineno-63-76" href="#__codelineno-63-76"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-63-77"><a id="__codelineno-63-77" name="__codelineno-63-77" href="#__codelineno-63-77"></a><span class="w">      </span><span class="p">&lt;</span><span class="nt">li</span><span class="w"> </span><span class="na">key</span><span class="o">=</span><span class="p">{</span><span class="nx">move</span><span class="p">}&gt;</span>
</span><span id="__span-63-78"><a id="__codelineno-63-78" name="__codelineno-63-78" href="#__codelineno-63-78"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">button</span><span class="w"> </span><span class="na">onClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">jumpTo</span><span class="p">(</span><span class="nx">move</span><span class="p">)}&gt;{</span><span class="nx">description</span><span class="p">}&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span><span id="__span-63-79"><a id="__codelineno-63-79" name="__codelineno-63-79" href="#__codelineno-63-79"></a><span class="w">      </span><span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
</span><span id="__span-63-80"><a id="__codelineno-63-80" name="__codelineno-63-80" href="#__codelineno-63-80"></a><span class="w">    </span><span class="p">);</span>
</span><span id="__span-63-81"><a id="__codelineno-63-81" name="__codelineno-63-81" href="#__codelineno-63-81"></a><span class="w">  </span><span class="p">});</span>
</span><span id="__span-63-82"><a id="__codelineno-63-82" name="__codelineno-63-82" href="#__codelineno-63-82"></a>
</span><span id="__span-63-83"><a id="__codelineno-63-83" name="__codelineno-63-83" href="#__codelineno-63-83"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-63-84"><a id="__codelineno-63-84" name="__codelineno-63-84" href="#__codelineno-63-84"></a><span class="w">    </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;game&quot;</span><span class="p">&gt;</span>
</span><span id="__span-63-85"><a id="__codelineno-63-85" name="__codelineno-63-85" href="#__codelineno-63-85"></a><span class="w">      </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;game-board&quot;</span><span class="p">&gt;</span>
</span><span id="__span-63-86"><a id="__codelineno-63-86" name="__codelineno-63-86" href="#__codelineno-63-86"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Board</span><span class="w"> </span><span class="na">xIsNext</span><span class="o">=</span><span class="p">{</span><span class="nx">xIsNext</span><span class="p">}</span><span class="w"> </span><span class="na">squares</span><span class="o">=</span><span class="p">{</span><span class="nx">currentSquares</span><span class="p">}</span><span class="w"> </span><span class="na">onPlay</span><span class="o">=</span><span class="p">{</span><span class="nx">handlePlay</span><span class="p">}</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-63-87"><a id="__codelineno-63-87" name="__codelineno-63-87" href="#__codelineno-63-87"></a><span class="w">      </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="__span-63-88"><a id="__codelineno-63-88" name="__codelineno-63-88" href="#__codelineno-63-88"></a><span class="w">      </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;game-info&quot;</span><span class="p">&gt;</span>
</span><span id="__span-63-89"><a id="__codelineno-63-89" name="__codelineno-63-89" href="#__codelineno-63-89"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">ol</span><span class="p">&gt;{</span><span class="nx">moves</span><span class="p">}&lt;/</span><span class="nt">ol</span><span class="p">&gt;</span>
</span><span id="__span-63-90"><a id="__codelineno-63-90" name="__codelineno-63-90" href="#__codelineno-63-90"></a><span class="w">      </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="__span-63-91"><a id="__codelineno-63-91" name="__codelineno-63-91" href="#__codelineno-63-91"></a><span class="w">    </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="__span-63-92"><a id="__codelineno-63-92" name="__codelineno-63-92" href="#__codelineno-63-92"></a><span class="w">  </span><span class="p">);</span>
</span><span id="__span-63-93"><a id="__codelineno-63-93" name="__codelineno-63-93" href="#__codelineno-63-93"></a><span class="p">}</span>
</span><span id="__span-63-94"><a id="__codelineno-63-94" name="__codelineno-63-94" href="#__codelineno-63-94"></a>
</span><span id="__span-63-95"><a id="__codelineno-63-95" name="__codelineno-63-95" href="#__codelineno-63-95"></a><span class="kd">function</span><span class="w"> </span><span class="nx">calculateWinner</span><span class="p">(</span><span class="nx">squares</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-63-96"><a id="__codelineno-63-96" name="__codelineno-63-96" href="#__codelineno-63-96"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">lines</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
</span><span id="__span-63-97"><a id="__codelineno-63-97" name="__codelineno-63-97" href="#__codelineno-63-97"></a><span class="w">    </span><span class="p">[</span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">2</span><span class="p">],</span>
</span><span id="__span-63-98"><a id="__codelineno-63-98" name="__codelineno-63-98" href="#__codelineno-63-98"></a><span class="w">    </span><span class="p">[</span><span class="mf">3</span><span class="p">,</span><span class="w"> </span><span class="mf">4</span><span class="p">,</span><span class="w"> </span><span class="mf">5</span><span class="p">],</span>
</span><span id="__span-63-99"><a id="__codelineno-63-99" name="__codelineno-63-99" href="#__codelineno-63-99"></a><span class="w">    </span><span class="p">[</span><span class="mf">6</span><span class="p">,</span><span class="w"> </span><span class="mf">7</span><span class="p">,</span><span class="w"> </span><span class="mf">8</span><span class="p">],</span>
</span><span id="__span-63-100"><a id="__codelineno-63-100" name="__codelineno-63-100" href="#__codelineno-63-100"></a><span class="w">    </span><span class="p">[</span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">3</span><span class="p">,</span><span class="w"> </span><span class="mf">6</span><span class="p">],</span>
</span><span id="__span-63-101"><a id="__codelineno-63-101" name="__codelineno-63-101" href="#__codelineno-63-101"></a><span class="w">    </span><span class="p">[</span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">4</span><span class="p">,</span><span class="w"> </span><span class="mf">7</span><span class="p">],</span>
</span><span id="__span-63-102"><a id="__codelineno-63-102" name="__codelineno-63-102" href="#__codelineno-63-102"></a><span class="w">    </span><span class="p">[</span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="mf">5</span><span class="p">,</span><span class="w"> </span><span class="mf">8</span><span class="p">],</span>
</span><span id="__span-63-103"><a id="__codelineno-63-103" name="__codelineno-63-103" href="#__codelineno-63-103"></a><span class="w">    </span><span class="p">[</span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">4</span><span class="p">,</span><span class="w"> </span><span class="mf">8</span><span class="p">],</span>
</span><span id="__span-63-104"><a id="__codelineno-63-104" name="__codelineno-63-104" href="#__codelineno-63-104"></a><span class="w">    </span><span class="p">[</span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="mf">4</span><span class="p">,</span><span class="w"> </span><span class="mf">6</span><span class="p">],</span>
</span><span id="__span-63-105"><a id="__codelineno-63-105" name="__codelineno-63-105" href="#__codelineno-63-105"></a><span class="w">  </span><span class="p">];</span>
</span><span id="__span-63-106"><a id="__codelineno-63-106" name="__codelineno-63-106" href="#__codelineno-63-106"></a><span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">let</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="nx">lines</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-63-107"><a id="__codelineno-63-107" name="__codelineno-63-107" href="#__codelineno-63-107"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">a</span><span class="p">,</span><span class="w"> </span><span class="nx">b</span><span class="p">,</span><span class="w"> </span><span class="nx">c</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">lines</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
</span><span id="__span-63-108"><a id="__codelineno-63-108" name="__codelineno-63-108" href="#__codelineno-63-108"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">squares</span><span class="p">[</span><span class="nx">a</span><span class="p">]</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nx">squares</span><span class="p">[</span><span class="nx">a</span><span class="p">]</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="nx">squares</span><span class="p">[</span><span class="nx">b</span><span class="p">]</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nx">squares</span><span class="p">[</span><span class="nx">a</span><span class="p">]</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="nx">squares</span><span class="p">[</span><span class="nx">c</span><span class="p">])</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-63-109"><a id="__codelineno-63-109" name="__codelineno-63-109" href="#__codelineno-63-109"></a><span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="nx">squares</span><span class="p">[</span><span class="nx">a</span><span class="p">];</span>
</span><span id="__span-63-110"><a id="__codelineno-63-110" name="__codelineno-63-110" href="#__codelineno-63-110"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-63-111"><a id="__codelineno-63-111" name="__codelineno-63-111" href="#__codelineno-63-111"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-63-112"><a id="__codelineno-63-112" name="__codelineno-63-112" href="#__codelineno-63-112"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="kc">null</span><span class="p">;</span>
</span><span id="__span-63-113"><a id="__codelineno-63-113" name="__codelineno-63-113" href="#__codelineno-63-113"></a><span class="p">}</span>
</span></code></pre></div>
<p>在你可以实现 <code>jumpTo</code> 之前，你需要 <code>Game</code> 组件来跟踪用户当前正在查看的步骤。为此，定义一个名为 <code>currentMove</code> 的新 state 变量，默认为 <code>0</code>：</p>
<div class="language-jsx highlight"><pre><span></span><code><span id="__span-64-1"><a id="__codelineno-64-1" name="__codelineno-64-1" href="#__codelineno-64-1"></a><span class="k">export</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">Game</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-64-2"><a id="__codelineno-64-2" name="__codelineno-64-2" href="#__codelineno-64-2"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">xIsNext</span><span class="p">,</span><span class="w"> </span><span class="nx">setXIsNext</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useState</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
</span><span id="__span-64-3"><a id="__codelineno-64-3" name="__codelineno-64-3" href="#__codelineno-64-3"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">history</span><span class="p">,</span><span class="w"> </span><span class="nx">setHistory</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useState</span><span class="p">([</span><span class="nb">Array</span><span class="p">(</span><span class="mf">9</span><span class="p">).</span><span class="nx">fill</span><span class="p">(</span><span class="kc">null</span><span class="p">)]);</span>
</span><span id="__span-64-4"><a id="__codelineno-64-4" name="__codelineno-64-4" href="#__codelineno-64-4"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">currentMove</span><span class="p">,</span><span class="w"> </span><span class="nx">setCurrentMove</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useState</span><span class="p">(</span><span class="mf">0</span><span class="p">);</span>
</span><span id="__span-64-5"><a id="__codelineno-64-5" name="__codelineno-64-5" href="#__codelineno-64-5"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">currentSquares</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">history</span><span class="p">[</span><span class="nx">history</span><span class="p">.</span><span class="nx">length</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">1</span><span class="p">];</span>
</span><span id="__span-64-6"><a id="__codelineno-64-6" name="__codelineno-64-6" href="#__codelineno-64-6"></a><span class="w">  </span><span class="c1">//...</span>
</span><span id="__span-64-7"><a id="__codelineno-64-7" name="__codelineno-64-7" href="#__codelineno-64-7"></a><span class="p">}</span>
</span></code></pre></div>
<p>接下来，更新 <code>Game</code> 中的 <code>jumpTo</code> 函数来更新 <code>currentMove</code>。如果你将 <code>currentMove</code> 更改为偶数，你还将设置 <code>xIsNext</code> 为 <code>true</code>。</p>
<div class="language-jsx highlight"><pre><span></span><code><span id="__span-65-1"><a id="__codelineno-65-1" name="__codelineno-65-1" href="#__codelineno-65-1"></a><span class="k">export</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">Game</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-65-2"><a id="__codelineno-65-2" name="__codelineno-65-2" href="#__codelineno-65-2"></a><span class="w">  </span><span class="c1">// ...</span>
</span><span id="__span-65-3"><a id="__codelineno-65-3" name="__codelineno-65-3" href="#__codelineno-65-3"></a><span class="w">  </span><span class="kd">function</span><span class="w"> </span><span class="nx">jumpTo</span><span class="p">(</span><span class="nx">nextMove</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-65-4"><a id="__codelineno-65-4" name="__codelineno-65-4" href="#__codelineno-65-4"></a><span class="w">    </span><span class="nx">setCurrentMove</span><span class="p">(</span><span class="nx">nextMove</span><span class="p">);</span>
</span><span id="__span-65-5"><a id="__codelineno-65-5" name="__codelineno-65-5" href="#__codelineno-65-5"></a><span class="w">    </span><span class="nx">setXIsNext</span><span class="p">(</span><span class="nx">nextMove</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mf">2</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="mf">0</span><span class="p">);</span>
</span><span id="__span-65-6"><a id="__codelineno-65-6" name="__codelineno-65-6" href="#__codelineno-65-6"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-65-7"><a id="__codelineno-65-7" name="__codelineno-65-7" href="#__codelineno-65-7"></a><span class="w">  </span><span class="c1">//...</span>
</span><span id="__span-65-8"><a id="__codelineno-65-8" name="__codelineno-65-8" href="#__codelineno-65-8"></a><span class="p">}</span>
</span></code></pre></div>
<p>你现在将对 <code>Game</code> 的 <code>handlePlay</code> 函数进行两处更改，该函数在你单击方块时调用。</p>
<ul>
<li>如果你“回到过去”然后从那一点开始采取新的行动，你只想保持那一点的历史。不是在 <code>history</code> 中的所有项目（<code>...</code> 扩展语法）之后添加 <code>nextSquares</code>，而是在 <code>history.slice(0, currentMove + 1)</code> 中的所有项目之后添加它，这样你就只保留旧历史的那部分。</li>
<li>每次落子时，你都需要更新 <code>currentMove</code> 以指向最新的历史条目。</li>
</ul>
<div class="language-jsx highlight"><pre><span></span><code><span id="__span-66-1"><a id="__codelineno-66-1" name="__codelineno-66-1" href="#__codelineno-66-1"></a><span class="kd">function</span><span class="w"> </span><span class="nx">handlePlay</span><span class="p">(</span><span class="nx">nextSquares</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-66-2"><a id="__codelineno-66-2" name="__codelineno-66-2" href="#__codelineno-66-2"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">nextHistory</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[...</span><span class="nx">history</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="nx">currentMove</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">1</span><span class="p">),</span><span class="w"> </span><span class="nx">nextSquares</span><span class="p">];</span>
</span><span id="__span-66-3"><a id="__codelineno-66-3" name="__codelineno-66-3" href="#__codelineno-66-3"></a><span class="w">  </span><span class="nx">setHistory</span><span class="p">(</span><span class="nx">nextHistory</span><span class="p">);</span>
</span><span id="__span-66-4"><a id="__codelineno-66-4" name="__codelineno-66-4" href="#__codelineno-66-4"></a><span class="w">  </span><span class="nx">setCurrentMove</span><span class="p">(</span><span class="nx">nextHistory</span><span class="p">.</span><span class="nx">length</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">1</span><span class="p">);</span>
</span><span id="__span-66-5"><a id="__codelineno-66-5" name="__codelineno-66-5" href="#__codelineno-66-5"></a><span class="w">  </span><span class="nx">setXIsNext</span><span class="p">(</span><span class="o">!</span><span class="nx">xIsNext</span><span class="p">);</span>
</span><span id="__span-66-6"><a id="__codelineno-66-6" name="__codelineno-66-6" href="#__codelineno-66-6"></a><span class="p">}</span>
</span></code></pre></div>
<p>最后，你将修改 <code>Game</code> 组件以渲染当前选定的着法，而不是始终渲染最后的着法：</p>
<div class="language-jsx highlight"><pre><span></span><code><span id="__span-67-1"><a id="__codelineno-67-1" name="__codelineno-67-1" href="#__codelineno-67-1"></a><span class="k">export</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">Game</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-67-2"><a id="__codelineno-67-2" name="__codelineno-67-2" href="#__codelineno-67-2"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">xIsNext</span><span class="p">,</span><span class="w"> </span><span class="nx">setXIsNext</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useState</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
</span><span id="__span-67-3"><a id="__codelineno-67-3" name="__codelineno-67-3" href="#__codelineno-67-3"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">history</span><span class="p">,</span><span class="w"> </span><span class="nx">setHistory</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useState</span><span class="p">([</span><span class="nb">Array</span><span class="p">(</span><span class="mf">9</span><span class="p">).</span><span class="nx">fill</span><span class="p">(</span><span class="kc">null</span><span class="p">)]);</span>
</span><span id="__span-67-4"><a id="__codelineno-67-4" name="__codelineno-67-4" href="#__codelineno-67-4"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">currentMove</span><span class="p">,</span><span class="w"> </span><span class="nx">setCurrentMove</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useState</span><span class="p">(</span><span class="mf">0</span><span class="p">);</span>
</span><span id="__span-67-5"><a id="__codelineno-67-5" name="__codelineno-67-5" href="#__codelineno-67-5"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">currentSquares</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">history</span><span class="p">[</span><span class="nx">currentMove</span><span class="p">];</span>
</span><span id="__span-67-6"><a id="__codelineno-67-6" name="__codelineno-67-6" href="#__codelineno-67-6"></a>
</span><span id="__span-67-7"><a id="__codelineno-67-7" name="__codelineno-67-7" href="#__codelineno-67-7"></a><span class="w">  </span><span class="c1">// ...</span>
</span><span id="__span-67-8"><a id="__codelineno-67-8" name="__codelineno-67-8" href="#__codelineno-67-8"></a><span class="p">}</span>
</span></code></pre></div>
<p>如果你点击游戏历史中的任何一步，井字棋棋盘应立即更新以显示该步骤发生后棋盘的样子。</p>
<div class="language-jsx highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">App.js</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-68-1">  1</a></span>
<span class="normal"><a href="#__codelineno-68-2">  2</a></span>
<span class="normal"><a href="#__codelineno-68-3">  3</a></span>
<span class="normal"><a href="#__codelineno-68-4">  4</a></span>
<span class="normal"><a href="#__codelineno-68-5">  5</a></span>
<span class="normal"><a href="#__codelineno-68-6">  6</a></span>
<span class="normal"><a href="#__codelineno-68-7">  7</a></span>
<span class="normal"><a href="#__codelineno-68-8">  8</a></span>
<span class="normal"><a href="#__codelineno-68-9">  9</a></span>
<span class="normal"><a href="#__codelineno-68-10"> 10</a></span>
<span class="normal"><a href="#__codelineno-68-11"> 11</a></span>
<span class="normal"><a href="#__codelineno-68-12"> 12</a></span>
<span class="normal"><a href="#__codelineno-68-13"> 13</a></span>
<span class="normal"><a href="#__codelineno-68-14"> 14</a></span>
<span class="normal"><a href="#__codelineno-68-15"> 15</a></span>
<span class="normal"><a href="#__codelineno-68-16"> 16</a></span>
<span class="normal"><a href="#__codelineno-68-17"> 17</a></span>
<span class="normal"><a href="#__codelineno-68-18"> 18</a></span>
<span class="normal"><a href="#__codelineno-68-19"> 19</a></span>
<span class="normal"><a href="#__codelineno-68-20"> 20</a></span>
<span class="normal"><a href="#__codelineno-68-21"> 21</a></span>
<span class="normal"><a href="#__codelineno-68-22"> 22</a></span>
<span class="normal"><a href="#__codelineno-68-23"> 23</a></span>
<span class="normal"><a href="#__codelineno-68-24"> 24</a></span>
<span class="normal"><a href="#__codelineno-68-25"> 25</a></span>
<span class="normal"><a href="#__codelineno-68-26"> 26</a></span>
<span class="normal"><a href="#__codelineno-68-27"> 27</a></span>
<span class="normal"><a href="#__codelineno-68-28"> 28</a></span>
<span class="normal"><a href="#__codelineno-68-29"> 29</a></span>
<span class="normal"><a href="#__codelineno-68-30"> 30</a></span>
<span class="normal"><a href="#__codelineno-68-31"> 31</a></span>
<span class="normal"><a href="#__codelineno-68-32"> 32</a></span>
<span class="normal"><a href="#__codelineno-68-33"> 33</a></span>
<span class="normal"><a href="#__codelineno-68-34"> 34</a></span>
<span class="normal"><a href="#__codelineno-68-35"> 35</a></span>
<span class="normal"><a href="#__codelineno-68-36"> 36</a></span>
<span class="normal"><a href="#__codelineno-68-37"> 37</a></span>
<span class="normal"><a href="#__codelineno-68-38"> 38</a></span>
<span class="normal"><a href="#__codelineno-68-39"> 39</a></span>
<span class="normal"><a href="#__codelineno-68-40"> 40</a></span>
<span class="normal"><a href="#__codelineno-68-41"> 41</a></span>
<span class="normal"><a href="#__codelineno-68-42"> 42</a></span>
<span class="normal"><a href="#__codelineno-68-43"> 43</a></span>
<span class="normal"><a href="#__codelineno-68-44"> 44</a></span>
<span class="normal"><a href="#__codelineno-68-45"> 45</a></span>
<span class="normal"><a href="#__codelineno-68-46"> 46</a></span>
<span class="normal"><a href="#__codelineno-68-47"> 47</a></span>
<span class="normal"><a href="#__codelineno-68-48"> 48</a></span>
<span class="normal"><a href="#__codelineno-68-49"> 49</a></span>
<span class="normal"><a href="#__codelineno-68-50"> 50</a></span>
<span class="normal"><a href="#__codelineno-68-51"> 51</a></span>
<span class="normal"><a href="#__codelineno-68-52"> 52</a></span>
<span class="normal"><a href="#__codelineno-68-53"> 53</a></span>
<span class="normal"><a href="#__codelineno-68-54"> 54</a></span>
<span class="normal"><a href="#__codelineno-68-55"> 55</a></span>
<span class="normal"><a href="#__codelineno-68-56"> 56</a></span>
<span class="normal"><a href="#__codelineno-68-57"> 57</a></span>
<span class="normal"><a href="#__codelineno-68-58"> 58</a></span>
<span class="normal"><a href="#__codelineno-68-59"> 59</a></span>
<span class="normal"><a href="#__codelineno-68-60"> 60</a></span>
<span class="normal"><a href="#__codelineno-68-61"> 61</a></span>
<span class="normal"><a href="#__codelineno-68-62"> 62</a></span>
<span class="normal"><a href="#__codelineno-68-63"> 63</a></span>
<span class="normal"><a href="#__codelineno-68-64"> 64</a></span>
<span class="normal"><a href="#__codelineno-68-65"> 65</a></span>
<span class="normal"><a href="#__codelineno-68-66"> 66</a></span>
<span class="normal"><a href="#__codelineno-68-67"> 67</a></span>
<span class="normal"><a href="#__codelineno-68-68"> 68</a></span>
<span class="normal"><a href="#__codelineno-68-69"> 69</a></span>
<span class="normal"><a href="#__codelineno-68-70"> 70</a></span>
<span class="normal"><a href="#__codelineno-68-71"> 71</a></span>
<span class="normal"><a href="#__codelineno-68-72"> 72</a></span>
<span class="normal"><a href="#__codelineno-68-73"> 73</a></span>
<span class="normal"><a href="#__codelineno-68-74"> 74</a></span>
<span class="normal"><a href="#__codelineno-68-75"> 75</a></span>
<span class="normal"><a href="#__codelineno-68-76"> 76</a></span>
<span class="normal"><a href="#__codelineno-68-77"> 77</a></span>
<span class="normal"><a href="#__codelineno-68-78"> 78</a></span>
<span class="normal"><a href="#__codelineno-68-79"> 79</a></span>
<span class="normal"><a href="#__codelineno-68-80"> 80</a></span>
<span class="normal"><a href="#__codelineno-68-81"> 81</a></span>
<span class="normal"><a href="#__codelineno-68-82"> 82</a></span>
<span class="normal"><a href="#__codelineno-68-83"> 83</a></span>
<span class="normal"><a href="#__codelineno-68-84"> 84</a></span>
<span class="normal"><a href="#__codelineno-68-85"> 85</a></span>
<span class="normal"><a href="#__codelineno-68-86"> 86</a></span>
<span class="normal"><a href="#__codelineno-68-87"> 87</a></span>
<span class="normal"><a href="#__codelineno-68-88"> 88</a></span>
<span class="normal"><a href="#__codelineno-68-89"> 89</a></span>
<span class="normal"><a href="#__codelineno-68-90"> 90</a></span>
<span class="normal"><a href="#__codelineno-68-91"> 91</a></span>
<span class="normal"><a href="#__codelineno-68-92"> 92</a></span>
<span class="normal"><a href="#__codelineno-68-93"> 93</a></span>
<span class="normal"><a href="#__codelineno-68-94"> 94</a></span>
<span class="normal"><a href="#__codelineno-68-95"> 95</a></span>
<span class="normal"><a href="#__codelineno-68-96"> 96</a></span>
<span class="normal"><a href="#__codelineno-68-97"> 97</a></span>
<span class="normal"><a href="#__codelineno-68-98"> 98</a></span>
<span class="normal"><a href="#__codelineno-68-99"> 99</a></span>
<span class="normal"><a href="#__codelineno-68-100">100</a></span>
<span class="normal"><a href="#__codelineno-68-101">101</a></span>
<span class="normal"><a href="#__codelineno-68-102">102</a></span>
<span class="normal"><a href="#__codelineno-68-103">103</a></span>
<span class="normal"><a href="#__codelineno-68-104">104</a></span>
<span class="normal"><a href="#__codelineno-68-105">105</a></span>
<span class="normal"><a href="#__codelineno-68-106">106</a></span>
<span class="normal"><a href="#__codelineno-68-107">107</a></span>
<span class="normal"><a href="#__codelineno-68-108">108</a></span>
<span class="normal"><a href="#__codelineno-68-109">109</a></span>
<span class="normal"><a href="#__codelineno-68-110">110</a></span>
<span class="normal"><a href="#__codelineno-68-111">111</a></span>
<span class="normal"><a href="#__codelineno-68-112">112</a></span>
<span class="normal"><a href="#__codelineno-68-113">113</a></span>
<span class="normal"><a href="#__codelineno-68-114">114</a></span>
<span class="normal"><a href="#__codelineno-68-115">115</a></span>
<span class="normal"><a href="#__codelineno-68-116">116</a></span>
<span class="normal"><a href="#__codelineno-68-117">117</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-68-1"><a id="__codelineno-68-1" name="__codelineno-68-1"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">useState</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;react&#39;</span><span class="p">;</span>
</span><span id="__span-68-2"><a id="__codelineno-68-2" name="__codelineno-68-2"></a>
</span><span id="__span-68-3"><a id="__codelineno-68-3" name="__codelineno-68-3"></a><span class="kd">function</span><span class="w"> </span><span class="nx">Square</span><span class="p">({</span><span class="nx">value</span><span class="p">,</span><span class="w"> </span><span class="nx">onSquareClick</span><span class="p">})</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-68-4"><a id="__codelineno-68-4" name="__codelineno-68-4"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-68-5"><a id="__codelineno-68-5" name="__codelineno-68-5"></a><span class="w">    </span><span class="p">&lt;</span><span class="nt">button</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;square&quot;</span><span class="w"> </span><span class="na">onClick</span><span class="o">=</span><span class="p">{</span><span class="nx">onSquareClick</span><span class="p">}&gt;</span>
</span><span id="__span-68-6"><a id="__codelineno-68-6" name="__codelineno-68-6"></a><span class="w">      </span><span class="p">{</span><span class="nx">value</span><span class="p">}</span>
</span><span id="__span-68-7"><a id="__codelineno-68-7" name="__codelineno-68-7"></a><span class="w">    </span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span><span id="__span-68-8"><a id="__codelineno-68-8" name="__codelineno-68-8"></a><span class="w">  </span><span class="p">);</span>
</span><span id="__span-68-9"><a id="__codelineno-68-9" name="__codelineno-68-9"></a><span class="p">}</span>
</span><span id="__span-68-10"><a id="__codelineno-68-10" name="__codelineno-68-10"></a>
</span><span id="__span-68-11"><a id="__codelineno-68-11" name="__codelineno-68-11"></a><span class="kd">function</span><span class="w"> </span><span class="nx">Board</span><span class="p">({</span><span class="w"> </span><span class="nx">xIsNext</span><span class="p">,</span><span class="w"> </span><span class="nx">squares</span><span class="p">,</span><span class="w"> </span><span class="nx">onPlay</span><span class="w"> </span><span class="p">})</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-68-12"><a id="__codelineno-68-12" name="__codelineno-68-12"></a><span class="w">  </span><span class="kd">function</span><span class="w"> </span><span class="nx">handleClick</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-68-13"><a id="__codelineno-68-13" name="__codelineno-68-13"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">calculateWinner</span><span class="p">(</span><span class="nx">squares</span><span class="p">)</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nx">squares</span><span class="p">[</span><span class="nx">i</span><span class="p">])</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-68-14"><a id="__codelineno-68-14" name="__codelineno-68-14"></a><span class="w">      </span><span class="k">return</span><span class="p">;</span>
</span><span id="__span-68-15"><a id="__codelineno-68-15" name="__codelineno-68-15"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-68-16"><a id="__codelineno-68-16" name="__codelineno-68-16"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">nextSquares</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">squares</span><span class="p">.</span><span class="nx">slice</span><span class="p">();</span>
</span><span id="__span-68-17"><a id="__codelineno-68-17" name="__codelineno-68-17"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">xIsNext</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-68-18"><a id="__codelineno-68-18" name="__codelineno-68-18"></a><span class="w">      </span><span class="nx">nextSquares</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;X&#39;</span><span class="p">;</span>
</span><span id="__span-68-19"><a id="__codelineno-68-19" name="__codelineno-68-19"></a><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-68-20"><a id="__codelineno-68-20" name="__codelineno-68-20"></a><span class="w">      </span><span class="nx">nextSquares</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;O&#39;</span><span class="p">;</span>
</span><span id="__span-68-21"><a id="__codelineno-68-21" name="__codelineno-68-21"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-68-22"><a id="__codelineno-68-22" name="__codelineno-68-22"></a><span class="w">    </span><span class="nx">onPlay</span><span class="p">(</span><span class="nx">nextSquares</span><span class="p">);</span>
</span><span id="__span-68-23"><a id="__codelineno-68-23" name="__codelineno-68-23"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-68-24"><a id="__codelineno-68-24" name="__codelineno-68-24"></a>
</span><span id="__span-68-25"><a id="__codelineno-68-25" name="__codelineno-68-25"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">winner</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">calculateWinner</span><span class="p">(</span><span class="nx">squares</span><span class="p">);</span>
</span><span id="__span-68-26"><a id="__codelineno-68-26" name="__codelineno-68-26"></a><span class="w">  </span><span class="kd">let</span><span class="w"> </span><span class="nx">status</span><span class="p">;</span>
</span><span id="__span-68-27"><a id="__codelineno-68-27" name="__codelineno-68-27"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">winner</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-68-28"><a id="__codelineno-68-28" name="__codelineno-68-28"></a><span class="w">    </span><span class="nx">status</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;Winner: &#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">winner</span><span class="p">;</span>
</span><span id="__span-68-29"><a id="__codelineno-68-29" name="__codelineno-68-29"></a><span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-68-30"><a id="__codelineno-68-30" name="__codelineno-68-30"></a><span class="w">    </span><span class="nx">status</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;Next player: &#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="p">(</span><span class="nx">xIsNext</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="s1">&#39;X&#39;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;O&#39;</span><span class="p">);</span>
</span><span id="__span-68-31"><a id="__codelineno-68-31" name="__codelineno-68-31"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-68-32"><a id="__codelineno-68-32" name="__codelineno-68-32"></a>
</span><span id="__span-68-33"><a id="__codelineno-68-33" name="__codelineno-68-33"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-68-34"><a id="__codelineno-68-34" name="__codelineno-68-34"></a><span class="w">    </span><span class="p">&lt;&gt;</span>
</span><span id="__span-68-35"><a id="__codelineno-68-35" name="__codelineno-68-35"></a><span class="w">      </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;status&quot;</span><span class="p">&gt;{</span><span class="nx">status</span><span class="p">}&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="__span-68-36"><a id="__codelineno-68-36" name="__codelineno-68-36"></a><span class="w">      </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;board-row&quot;</span><span class="p">&gt;</span>
</span><span id="__span-68-37"><a id="__codelineno-68-37" name="__codelineno-68-37"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">squares</span><span class="p">[</span><span class="mf">0</span><span class="p">]}</span><span class="w"> </span><span class="na">onSquareClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">handleClick</span><span class="p">(</span><span class="mf">0</span><span class="p">)}</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-68-38"><a id="__codelineno-68-38" name="__codelineno-68-38"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">squares</span><span class="p">[</span><span class="mf">1</span><span class="p">]}</span><span class="w"> </span><span class="na">onSquareClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">handleClick</span><span class="p">(</span><span class="mf">1</span><span class="p">)}</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-68-39"><a id="__codelineno-68-39" name="__codelineno-68-39"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">squares</span><span class="p">[</span><span class="mf">2</span><span class="p">]}</span><span class="w"> </span><span class="na">onSquareClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">handleClick</span><span class="p">(</span><span class="mf">2</span><span class="p">)}</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-68-40"><a id="__codelineno-68-40" name="__codelineno-68-40"></a><span class="w">      </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="__span-68-41"><a id="__codelineno-68-41" name="__codelineno-68-41"></a><span class="w">      </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;board-row&quot;</span><span class="p">&gt;</span>
</span><span id="__span-68-42"><a id="__codelineno-68-42" name="__codelineno-68-42"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">squares</span><span class="p">[</span><span class="mf">3</span><span class="p">]}</span><span class="w"> </span><span class="na">onSquareClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">handleClick</span><span class="p">(</span><span class="mf">3</span><span class="p">)}</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-68-43"><a id="__codelineno-68-43" name="__codelineno-68-43"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">squares</span><span class="p">[</span><span class="mf">4</span><span class="p">]}</span><span class="w"> </span><span class="na">onSquareClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">handleClick</span><span class="p">(</span><span class="mf">4</span><span class="p">)}</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-68-44"><a id="__codelineno-68-44" name="__codelineno-68-44"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">squares</span><span class="p">[</span><span class="mf">5</span><span class="p">]}</span><span class="w"> </span><span class="na">onSquareClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">handleClick</span><span class="p">(</span><span class="mf">5</span><span class="p">)}</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-68-45"><a id="__codelineno-68-45" name="__codelineno-68-45"></a><span class="w">      </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="__span-68-46"><a id="__codelineno-68-46" name="__codelineno-68-46"></a><span class="w">      </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;board-row&quot;</span><span class="p">&gt;</span>
</span><span id="__span-68-47"><a id="__codelineno-68-47" name="__codelineno-68-47"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">squares</span><span class="p">[</span><span class="mf">6</span><span class="p">]}</span><span class="w"> </span><span class="na">onSquareClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">handleClick</span><span class="p">(</span><span class="mf">6</span><span class="p">)}</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-68-48"><a id="__codelineno-68-48" name="__codelineno-68-48"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">squares</span><span class="p">[</span><span class="mf">7</span><span class="p">]}</span><span class="w"> </span><span class="na">onSquareClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">handleClick</span><span class="p">(</span><span class="mf">7</span><span class="p">)}</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-68-49"><a id="__codelineno-68-49" name="__codelineno-68-49"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Square</span><span class="w"> </span><span class="na">value</span><span class="o">=</span><span class="p">{</span><span class="nx">squares</span><span class="p">[</span><span class="mf">8</span><span class="p">]}</span><span class="w"> </span><span class="na">onSquareClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">handleClick</span><span class="p">(</span><span class="mf">8</span><span class="p">)}</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-68-50"><a id="__codelineno-68-50" name="__codelineno-68-50"></a><span class="w">      </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="__span-68-51"><a id="__codelineno-68-51" name="__codelineno-68-51"></a><span class="w">    </span><span class="p">&lt;/&gt;</span>
</span><span id="__span-68-52"><a id="__codelineno-68-52" name="__codelineno-68-52"></a><span class="w">  </span><span class="p">);</span>
</span><span id="__span-68-53"><a id="__codelineno-68-53" name="__codelineno-68-53"></a><span class="p">}</span>
</span><span id="__span-68-54"><a id="__codelineno-68-54" name="__codelineno-68-54"></a>
</span><span id="__span-68-55"><a id="__codelineno-68-55" name="__codelineno-68-55"></a><span class="k">export</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">Game</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-68-56"><a id="__codelineno-68-56" name="__codelineno-68-56"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">xIsNext</span><span class="p">,</span><span class="w"> </span><span class="nx">setXIsNext</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useState</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
</span><span id="__span-68-57"><a id="__codelineno-68-57" name="__codelineno-68-57"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">history</span><span class="p">,</span><span class="w"> </span><span class="nx">setHistory</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useState</span><span class="p">([</span><span class="nb">Array</span><span class="p">(</span><span class="mf">9</span><span class="p">).</span><span class="nx">fill</span><span class="p">(</span><span class="kc">null</span><span class="p">)]);</span>
</span><span id="__span-68-58"><a id="__codelineno-68-58" name="__codelineno-68-58"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">currentMove</span><span class="p">,</span><span class="w"> </span><span class="nx">setCurrentMove</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useState</span><span class="p">(</span><span class="mf">0</span><span class="p">);</span>
</span><span id="__span-68-59"><a id="__codelineno-68-59" name="__codelineno-68-59"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">currentSquares</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">history</span><span class="p">[</span><span class="nx">currentMove</span><span class="p">];</span>
</span><span id="__span-68-60"><a id="__codelineno-68-60" name="__codelineno-68-60"></a>
</span><span id="__span-68-61"><a id="__codelineno-68-61" name="__codelineno-68-61"></a><span class="w">  </span><span class="kd">function</span><span class="w"> </span><span class="nx">handlePlay</span><span class="p">(</span><span class="nx">nextSquares</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-68-62"><a id="__codelineno-68-62" name="__codelineno-68-62"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">nextHistory</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[...</span><span class="nx">history</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="nx">currentMove</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">1</span><span class="p">),</span><span class="w"> </span><span class="nx">nextSquares</span><span class="p">];</span>
</span><span id="__span-68-63"><a id="__codelineno-68-63" name="__codelineno-68-63"></a><span class="w">    </span><span class="nx">setHistory</span><span class="p">(</span><span class="nx">nextHistory</span><span class="p">);</span>
</span><span id="__span-68-64"><a id="__codelineno-68-64" name="__codelineno-68-64"></a><span class="w">    </span><span class="nx">setCurrentMove</span><span class="p">(</span><span class="nx">nextHistory</span><span class="p">.</span><span class="nx">length</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">1</span><span class="p">);</span>
</span><span id="__span-68-65"><a id="__codelineno-68-65" name="__codelineno-68-65"></a><span class="w">    </span><span class="nx">setXIsNext</span><span class="p">(</span><span class="o">!</span><span class="nx">xIsNext</span><span class="p">);</span>
</span><span id="__span-68-66"><a id="__codelineno-68-66" name="__codelineno-68-66"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-68-67"><a id="__codelineno-68-67" name="__codelineno-68-67"></a>
</span><span id="__span-68-68"><a id="__codelineno-68-68" name="__codelineno-68-68"></a><span class="w">  </span><span class="kd">function</span><span class="w"> </span><span class="nx">jumpTo</span><span class="p">(</span><span class="nx">nextMove</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-68-69"><a id="__codelineno-68-69" name="__codelineno-68-69"></a><span class="w">    </span><span class="nx">setCurrentMove</span><span class="p">(</span><span class="nx">nextMove</span><span class="p">);</span>
</span><span id="__span-68-70"><a id="__codelineno-68-70" name="__codelineno-68-70"></a><span class="w">    </span><span class="nx">setXIsNext</span><span class="p">(</span><span class="nx">nextMove</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mf">2</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="mf">0</span><span class="p">);</span>
</span><span id="__span-68-71"><a id="__codelineno-68-71" name="__codelineno-68-71"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-68-72"><a id="__codelineno-68-72" name="__codelineno-68-72"></a>
</span><span id="__span-68-73"><a id="__codelineno-68-73" name="__codelineno-68-73"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">moves</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">history</span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">squares</span><span class="p">,</span><span class="w"> </span><span class="nx">move</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-68-74"><a id="__codelineno-68-74" name="__codelineno-68-74"></a><span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="nx">description</span><span class="p">;</span>
</span><span id="__span-68-75"><a id="__codelineno-68-75" name="__codelineno-68-75"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">move</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mf">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-68-76"><a id="__codelineno-68-76" name="__codelineno-68-76"></a><span class="w">      </span><span class="nx">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;Go to move #&#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">move</span><span class="p">;</span>
</span><span id="__span-68-77"><a id="__codelineno-68-77" name="__codelineno-68-77"></a><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-68-78"><a id="__codelineno-68-78" name="__codelineno-68-78"></a><span class="w">      </span><span class="nx">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;Go to game start&#39;</span><span class="p">;</span>
</span><span id="__span-68-79"><a id="__codelineno-68-79" name="__codelineno-68-79"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-68-80"><a id="__codelineno-68-80" name="__codelineno-68-80"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-68-81"><a id="__codelineno-68-81" name="__codelineno-68-81"></a><span class="w">      </span><span class="p">&lt;</span><span class="nt">li</span><span class="w"> </span><span class="na">key</span><span class="o">=</span><span class="p">{</span><span class="nx">move</span><span class="p">}&gt;</span>
</span><span id="__span-68-82"><a id="__codelineno-68-82" name="__codelineno-68-82"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">button</span><span class="w"> </span><span class="na">onClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">jumpTo</span><span class="p">(</span><span class="nx">move</span><span class="p">)}&gt;{</span><span class="nx">description</span><span class="p">}&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span><span id="__span-68-83"><a id="__codelineno-68-83" name="__codelineno-68-83"></a><span class="w">      </span><span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
</span><span id="__span-68-84"><a id="__codelineno-68-84" name="__codelineno-68-84"></a><span class="w">    </span><span class="p">);</span>
</span><span id="__span-68-85"><a id="__codelineno-68-85" name="__codelineno-68-85"></a><span class="w">  </span><span class="p">});</span>
</span><span id="__span-68-86"><a id="__codelineno-68-86" name="__codelineno-68-86"></a>
</span><span id="__span-68-87"><a id="__codelineno-68-87" name="__codelineno-68-87"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-68-88"><a id="__codelineno-68-88" name="__codelineno-68-88"></a><span class="w">    </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;game&quot;</span><span class="p">&gt;</span>
</span><span id="__span-68-89"><a id="__codelineno-68-89" name="__codelineno-68-89"></a><span class="w">      </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;game-board&quot;</span><span class="p">&gt;</span>
</span><span id="__span-68-90"><a id="__codelineno-68-90" name="__codelineno-68-90"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">Board</span><span class="w"> </span><span class="na">xIsNext</span><span class="o">=</span><span class="p">{</span><span class="nx">xIsNext</span><span class="p">}</span><span class="w"> </span><span class="na">squares</span><span class="o">=</span><span class="p">{</span><span class="nx">currentSquares</span><span class="p">}</span><span class="w"> </span><span class="na">onPlay</span><span class="o">=</span><span class="p">{</span><span class="nx">handlePlay</span><span class="p">}</span><span class="w"> </span><span class="p">/&gt;</span>
</span><span id="__span-68-91"><a id="__codelineno-68-91" name="__codelineno-68-91"></a><span class="w">      </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="__span-68-92"><a id="__codelineno-68-92" name="__codelineno-68-92"></a><span class="w">      </span><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">className</span><span class="o">=</span><span class="s">&quot;game-info&quot;</span><span class="p">&gt;</span>
</span><span id="__span-68-93"><a id="__codelineno-68-93" name="__codelineno-68-93"></a><span class="w">        </span><span class="p">&lt;</span><span class="nt">ol</span><span class="p">&gt;{</span><span class="nx">moves</span><span class="p">}&lt;/</span><span class="nt">ol</span><span class="p">&gt;</span>
</span><span id="__span-68-94"><a id="__codelineno-68-94" name="__codelineno-68-94"></a><span class="w">      </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="__span-68-95"><a id="__codelineno-68-95" name="__codelineno-68-95"></a><span class="w">    </span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="__span-68-96"><a id="__codelineno-68-96" name="__codelineno-68-96"></a><span class="w">  </span><span class="p">);</span>
</span><span id="__span-68-97"><a id="__codelineno-68-97" name="__codelineno-68-97"></a><span class="p">}</span>
</span><span id="__span-68-98"><a id="__codelineno-68-98" name="__codelineno-68-98"></a>
</span><span id="__span-68-99"><a id="__codelineno-68-99" name="__codelineno-68-99"></a><span class="kd">function</span><span class="w"> </span><span class="nx">calculateWinner</span><span class="p">(</span><span class="nx">squares</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-68-100"><a id="__codelineno-68-100" name="__codelineno-68-100"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">lines</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
</span><span id="__span-68-101"><a id="__codelineno-68-101" name="__codelineno-68-101"></a><span class="w">    </span><span class="p">[</span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">2</span><span class="p">],</span>
</span><span id="__span-68-102"><a id="__codelineno-68-102" name="__codelineno-68-102"></a><span class="w">    </span><span class="p">[</span><span class="mf">3</span><span class="p">,</span><span class="w"> </span><span class="mf">4</span><span class="p">,</span><span class="w"> </span><span class="mf">5</span><span class="p">],</span>
</span><span id="__span-68-103"><a id="__codelineno-68-103" name="__codelineno-68-103"></a><span class="w">    </span><span class="p">[</span><span class="mf">6</span><span class="p">,</span><span class="w"> </span><span class="mf">7</span><span class="p">,</span><span class="w"> </span><span class="mf">8</span><span class="p">],</span>
</span><span id="__span-68-104"><a id="__codelineno-68-104" name="__codelineno-68-104"></a><span class="w">    </span><span class="p">[</span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">3</span><span class="p">,</span><span class="w"> </span><span class="mf">6</span><span class="p">],</span>
</span><span id="__span-68-105"><a id="__codelineno-68-105" name="__codelineno-68-105"></a><span class="w">    </span><span class="p">[</span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">4</span><span class="p">,</span><span class="w"> </span><span class="mf">7</span><span class="p">],</span>
</span><span id="__span-68-106"><a id="__codelineno-68-106" name="__codelineno-68-106"></a><span class="w">    </span><span class="p">[</span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="mf">5</span><span class="p">,</span><span class="w"> </span><span class="mf">8</span><span class="p">],</span>
</span><span id="__span-68-107"><a id="__codelineno-68-107" name="__codelineno-68-107"></a><span class="w">    </span><span class="p">[</span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">4</span><span class="p">,</span><span class="w"> </span><span class="mf">8</span><span class="p">],</span>
</span><span id="__span-68-108"><a id="__codelineno-68-108" name="__codelineno-68-108"></a><span class="w">    </span><span class="p">[</span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="mf">4</span><span class="p">,</span><span class="w"> </span><span class="mf">6</span><span class="p">],</span>
</span><span id="__span-68-109"><a id="__codelineno-68-109" name="__codelineno-68-109"></a><span class="w">  </span><span class="p">];</span>
</span><span id="__span-68-110"><a id="__codelineno-68-110" name="__codelineno-68-110"></a><span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">let</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="nx">lines</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-68-111"><a id="__codelineno-68-111" name="__codelineno-68-111"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">a</span><span class="p">,</span><span class="w"> </span><span class="nx">b</span><span class="p">,</span><span class="w"> </span><span class="nx">c</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">lines</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
</span><span id="__span-68-112"><a id="__codelineno-68-112" name="__codelineno-68-112"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">squares</span><span class="p">[</span><span class="nx">a</span><span class="p">]</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nx">squares</span><span class="p">[</span><span class="nx">a</span><span class="p">]</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="nx">squares</span><span class="p">[</span><span class="nx">b</span><span class="p">]</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nx">squares</span><span class="p">[</span><span class="nx">a</span><span class="p">]</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="nx">squares</span><span class="p">[</span><span class="nx">c</span><span class="p">])</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-68-113"><a id="__codelineno-68-113" name="__codelineno-68-113"></a><span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="nx">squares</span><span class="p">[</span><span class="nx">a</span><span class="p">];</span>
</span><span id="__span-68-114"><a id="__codelineno-68-114" name="__codelineno-68-114"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-68-115"><a id="__codelineno-68-115" name="__codelineno-68-115"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-68-116"><a id="__codelineno-68-116" name="__codelineno-68-116"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="kc">null</span><span class="p">;</span>
</span><span id="__span-68-117"><a id="__codelineno-68-117" name="__codelineno-68-117"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<h3 id="46">4.6 最后清理<a class="headerlink" href="#46" title="Permanent link">&para;</a></h3>
<p>如果仔细查看代码，你可能会注意到当 <code>currentMove</code> 为偶数时为 <code>xIsNext === true</code>，而当 <code>currentMove</code> 为奇数时为 <code>xIsNext === false</code>。换句话说，如果你知道 <code>currentMove</code> 的值，那么你总能算出 <code>xIsNext</code> 应该是什么。</p>
<p>你没有理由将这两者都存储在 state 中。事实上，总是尽量避免冗余的 state。简化你在 state 中存储的内容可以减少错误并使你的代码更易于理解。更改 <code>Game</code> 使其不将 <code>xIsNext</code> 存储为单独的 state 变量，而是根据 <code>currentMove</code> 计算出来：</p>
<p>```jsx linenum="1"
export default function Game() {
  const [history, setHistory] = useState([Array(9).fill(null)]);
  const [currentMove, setCurrentMove] = useState(0);
  const xIsNext = currentMove % 2 === 0;
  const currentSquares = history[currentMove];</p>
<p>function handlePlay(nextSquares) {
    const nextHistory = [...history.slice(0, currentMove + 1), nextSquares];
    setHistory(nextHistory);
    setCurrentMove(nextHistory.length - 1);
  }</p>
<p>function jumpTo(nextMove) {
    setCurrentMove(nextMove);
  }
  // ...
}
<div class="language-text highlight"><pre><span></span><code><span id="__span-69-1"><a id="__codelineno-69-1" name="__codelineno-69-1" href="#__codelineno-69-1"></a>你不再需要 `xIsNext` state 声明或对 `setXIsNext` 的调用。现在，`xIsNext` 不可能与 `currentMove` 不同步，即使你的代码写错了。
</span><span id="__span-69-2"><a id="__codelineno-69-2" name="__codelineno-69-2" href="#__codelineno-69-2"></a>
</span><span id="__span-69-3"><a id="__codelineno-69-3" name="__codelineno-69-3" href="#__codelineno-69-3"></a>
</span><span id="__span-69-4"><a id="__codelineno-69-4" name="__codelineno-69-4" href="#__codelineno-69-4"></a>### 4.7 收尾 
</span><span id="__span-69-5"><a id="__codelineno-69-5" name="__codelineno-69-5" href="#__codelineno-69-5"></a>
</span><span id="__span-69-6"><a id="__codelineno-69-6" name="__codelineno-69-6" href="#__codelineno-69-6"></a>祝贺！你已经创建了一个井字棋游戏，你实现了：
</span><span id="__span-69-7"><a id="__codelineno-69-7" name="__codelineno-69-7" href="#__codelineno-69-7"></a>
</span><span id="__span-69-8"><a id="__codelineno-69-8" name="__codelineno-69-8" href="#__codelineno-69-8"></a>- 你现在可以玩的井字棋游戏
</span><span id="__span-69-9"><a id="__codelineno-69-9" name="__codelineno-69-9" href="#__codelineno-69-9"></a>- 玩家在赢的时候有提示
</span><span id="__span-69-10"><a id="__codelineno-69-10" name="__codelineno-69-10" href="#__codelineno-69-10"></a>- 随着游戏的进行存储游戏的历史
</span><span id="__span-69-11"><a id="__codelineno-69-11" name="__codelineno-69-11" href="#__codelineno-69-11"></a>- 允许玩家回顾游戏的历史并查看棋盘的以前的版本
</span><span id="__span-69-12"><a id="__codelineno-69-12" name="__codelineno-69-12" href="#__codelineno-69-12"></a>
</span><span id="__span-69-13"><a id="__codelineno-69-13" name="__codelineno-69-13" href="#__codelineno-69-13"></a>干得好！我们希望你现在觉得你对 React 的工作原理有了很好的了解。
</span><span id="__span-69-14"><a id="__codelineno-69-14" name="__codelineno-69-14" href="#__codelineno-69-14"></a>
</span><span id="__span-69-15"><a id="__codelineno-69-15" name="__codelineno-69-15" href="#__codelineno-69-15"></a>在这里对照一下最终的结果吧：
</span><span id="__span-69-16"><a id="__codelineno-69-16" name="__codelineno-69-16" href="#__codelineno-69-16"></a>
</span><span id="__span-69-17"><a id="__codelineno-69-17" name="__codelineno-69-17" href="#__codelineno-69-17"></a>```jsx linenums=&quot;1&quot; title=&quot;App.js&quot;
</span><span id="__span-69-18"><a id="__codelineno-69-18" name="__codelineno-69-18" href="#__codelineno-69-18"></a>import { useState } from &#39;react&#39;;
</span><span id="__span-69-19"><a id="__codelineno-69-19" name="__codelineno-69-19" href="#__codelineno-69-19"></a>
</span><span id="__span-69-20"><a id="__codelineno-69-20" name="__codelineno-69-20" href="#__codelineno-69-20"></a>function Square({ value, onSquareClick }) {
</span><span id="__span-69-21"><a id="__codelineno-69-21" name="__codelineno-69-21" href="#__codelineno-69-21"></a>  return (
</span><span id="__span-69-22"><a id="__codelineno-69-22" name="__codelineno-69-22" href="#__codelineno-69-22"></a>    &lt;button className=&quot;square&quot; onClick={onSquareClick}&gt;
</span><span id="__span-69-23"><a id="__codelineno-69-23" name="__codelineno-69-23" href="#__codelineno-69-23"></a>      {value}
</span><span id="__span-69-24"><a id="__codelineno-69-24" name="__codelineno-69-24" href="#__codelineno-69-24"></a>    &lt;/button&gt;
</span><span id="__span-69-25"><a id="__codelineno-69-25" name="__codelineno-69-25" href="#__codelineno-69-25"></a>  );
</span><span id="__span-69-26"><a id="__codelineno-69-26" name="__codelineno-69-26" href="#__codelineno-69-26"></a>}
</span><span id="__span-69-27"><a id="__codelineno-69-27" name="__codelineno-69-27" href="#__codelineno-69-27"></a>
</span><span id="__span-69-28"><a id="__codelineno-69-28" name="__codelineno-69-28" href="#__codelineno-69-28"></a>function Board({ xIsNext, squares, onPlay }) {
</span><span id="__span-69-29"><a id="__codelineno-69-29" name="__codelineno-69-29" href="#__codelineno-69-29"></a>  function handleClick(i) {
</span><span id="__span-69-30"><a id="__codelineno-69-30" name="__codelineno-69-30" href="#__codelineno-69-30"></a>    if (calculateWinner(squares) || squares[i]) {
</span><span id="__span-69-31"><a id="__codelineno-69-31" name="__codelineno-69-31" href="#__codelineno-69-31"></a>      return;
</span><span id="__span-69-32"><a id="__codelineno-69-32" name="__codelineno-69-32" href="#__codelineno-69-32"></a>    }
</span><span id="__span-69-33"><a id="__codelineno-69-33" name="__codelineno-69-33" href="#__codelineno-69-33"></a>    const nextSquares = squares.slice();
</span><span id="__span-69-34"><a id="__codelineno-69-34" name="__codelineno-69-34" href="#__codelineno-69-34"></a>    if (xIsNext) {
</span><span id="__span-69-35"><a id="__codelineno-69-35" name="__codelineno-69-35" href="#__codelineno-69-35"></a>      nextSquares[i] = &#39;X&#39;;
</span><span id="__span-69-36"><a id="__codelineno-69-36" name="__codelineno-69-36" href="#__codelineno-69-36"></a>    } else {
</span><span id="__span-69-37"><a id="__codelineno-69-37" name="__codelineno-69-37" href="#__codelineno-69-37"></a>      nextSquares[i] = &#39;O&#39;;
</span><span id="__span-69-38"><a id="__codelineno-69-38" name="__codelineno-69-38" href="#__codelineno-69-38"></a>    }
</span><span id="__span-69-39"><a id="__codelineno-69-39" name="__codelineno-69-39" href="#__codelineno-69-39"></a>    onPlay(nextSquares);
</span><span id="__span-69-40"><a id="__codelineno-69-40" name="__codelineno-69-40" href="#__codelineno-69-40"></a>  }
</span><span id="__span-69-41"><a id="__codelineno-69-41" name="__codelineno-69-41" href="#__codelineno-69-41"></a>
</span><span id="__span-69-42"><a id="__codelineno-69-42" name="__codelineno-69-42" href="#__codelineno-69-42"></a>  const winner = calculateWinner(squares);
</span><span id="__span-69-43"><a id="__codelineno-69-43" name="__codelineno-69-43" href="#__codelineno-69-43"></a>  let status;
</span><span id="__span-69-44"><a id="__codelineno-69-44" name="__codelineno-69-44" href="#__codelineno-69-44"></a>  if (winner) {
</span><span id="__span-69-45"><a id="__codelineno-69-45" name="__codelineno-69-45" href="#__codelineno-69-45"></a>    status = &#39;Winner: &#39; + winner;
</span><span id="__span-69-46"><a id="__codelineno-69-46" name="__codelineno-69-46" href="#__codelineno-69-46"></a>  } else {
</span><span id="__span-69-47"><a id="__codelineno-69-47" name="__codelineno-69-47" href="#__codelineno-69-47"></a>    status = &#39;Next player: &#39; + (xIsNext ? &#39;X&#39; : &#39;O&#39;);
</span><span id="__span-69-48"><a id="__codelineno-69-48" name="__codelineno-69-48" href="#__codelineno-69-48"></a>  }
</span><span id="__span-69-49"><a id="__codelineno-69-49" name="__codelineno-69-49" href="#__codelineno-69-49"></a>
</span><span id="__span-69-50"><a id="__codelineno-69-50" name="__codelineno-69-50" href="#__codelineno-69-50"></a>  return (
</span><span id="__span-69-51"><a id="__codelineno-69-51" name="__codelineno-69-51" href="#__codelineno-69-51"></a>    &lt;&gt;
</span><span id="__span-69-52"><a id="__codelineno-69-52" name="__codelineno-69-52" href="#__codelineno-69-52"></a>      &lt;div className=&quot;status&quot;&gt;{status}&lt;/div&gt;
</span><span id="__span-69-53"><a id="__codelineno-69-53" name="__codelineno-69-53" href="#__codelineno-69-53"></a>      &lt;div className=&quot;board-row&quot;&gt;
</span><span id="__span-69-54"><a id="__codelineno-69-54" name="__codelineno-69-54" href="#__codelineno-69-54"></a>        &lt;Square value={squares[0]} onSquareClick={() =&gt; handleClick(0)} /&gt;
</span><span id="__span-69-55"><a id="__codelineno-69-55" name="__codelineno-69-55" href="#__codelineno-69-55"></a>        &lt;Square value={squares[1]} onSquareClick={() =&gt; handleClick(1)} /&gt;
</span><span id="__span-69-56"><a id="__codelineno-69-56" name="__codelineno-69-56" href="#__codelineno-69-56"></a>        &lt;Square value={squares[2]} onSquareClick={() =&gt; handleClick(2)} /&gt;
</span><span id="__span-69-57"><a id="__codelineno-69-57" name="__codelineno-69-57" href="#__codelineno-69-57"></a>      &lt;/div&gt;
</span><span id="__span-69-58"><a id="__codelineno-69-58" name="__codelineno-69-58" href="#__codelineno-69-58"></a>      &lt;div className=&quot;board-row&quot;&gt;
</span><span id="__span-69-59"><a id="__codelineno-69-59" name="__codelineno-69-59" href="#__codelineno-69-59"></a>        &lt;Square value={squares[3]} onSquareClick={() =&gt; handleClick(3)} /&gt;
</span><span id="__span-69-60"><a id="__codelineno-69-60" name="__codelineno-69-60" href="#__codelineno-69-60"></a>        &lt;Square value={squares[4]} onSquareClick={() =&gt; handleClick(4)} /&gt;
</span><span id="__span-69-61"><a id="__codelineno-69-61" name="__codelineno-69-61" href="#__codelineno-69-61"></a>        &lt;Square value={squares[5]} onSquareClick={() =&gt; handleClick(5)} /&gt;
</span><span id="__span-69-62"><a id="__codelineno-69-62" name="__codelineno-69-62" href="#__codelineno-69-62"></a>      &lt;/div&gt;
</span><span id="__span-69-63"><a id="__codelineno-69-63" name="__codelineno-69-63" href="#__codelineno-69-63"></a>      &lt;div className=&quot;board-row&quot;&gt;
</span><span id="__span-69-64"><a id="__codelineno-69-64" name="__codelineno-69-64" href="#__codelineno-69-64"></a>        &lt;Square value={squares[6]} onSquareClick={() =&gt; handleClick(6)} /&gt;
</span><span id="__span-69-65"><a id="__codelineno-69-65" name="__codelineno-69-65" href="#__codelineno-69-65"></a>        &lt;Square value={squares[7]} onSquareClick={() =&gt; handleClick(7)} /&gt;
</span><span id="__span-69-66"><a id="__codelineno-69-66" name="__codelineno-69-66" href="#__codelineno-69-66"></a>        &lt;Square value={squares[8]} onSquareClick={() =&gt; handleClick(8)} /&gt;
</span><span id="__span-69-67"><a id="__codelineno-69-67" name="__codelineno-69-67" href="#__codelineno-69-67"></a>      &lt;/div&gt;
</span><span id="__span-69-68"><a id="__codelineno-69-68" name="__codelineno-69-68" href="#__codelineno-69-68"></a>    &lt;/&gt;
</span><span id="__span-69-69"><a id="__codelineno-69-69" name="__codelineno-69-69" href="#__codelineno-69-69"></a>  );
</span><span id="__span-69-70"><a id="__codelineno-69-70" name="__codelineno-69-70" href="#__codelineno-69-70"></a>}
</span><span id="__span-69-71"><a id="__codelineno-69-71" name="__codelineno-69-71" href="#__codelineno-69-71"></a>
</span><span id="__span-69-72"><a id="__codelineno-69-72" name="__codelineno-69-72" href="#__codelineno-69-72"></a>export default function Game() {
</span><span id="__span-69-73"><a id="__codelineno-69-73" name="__codelineno-69-73" href="#__codelineno-69-73"></a>  const [history, setHistory] = useState([Array(9).fill(null)]);
</span><span id="__span-69-74"><a id="__codelineno-69-74" name="__codelineno-69-74" href="#__codelineno-69-74"></a>  const [currentMove, setCurrentMove] = useState(0);
</span><span id="__span-69-75"><a id="__codelineno-69-75" name="__codelineno-69-75" href="#__codelineno-69-75"></a>  const xIsNext = currentMove % 2 === 0;
</span><span id="__span-69-76"><a id="__codelineno-69-76" name="__codelineno-69-76" href="#__codelineno-69-76"></a>  const currentSquares = history[currentMove];
</span><span id="__span-69-77"><a id="__codelineno-69-77" name="__codelineno-69-77" href="#__codelineno-69-77"></a>
</span><span id="__span-69-78"><a id="__codelineno-69-78" name="__codelineno-69-78" href="#__codelineno-69-78"></a>  function handlePlay(nextSquares) {
</span><span id="__span-69-79"><a id="__codelineno-69-79" name="__codelineno-69-79" href="#__codelineno-69-79"></a>    const nextHistory = [...history.slice(0, currentMove + 1), nextSquares];
</span><span id="__span-69-80"><a id="__codelineno-69-80" name="__codelineno-69-80" href="#__codelineno-69-80"></a>    setHistory(nextHistory);
</span><span id="__span-69-81"><a id="__codelineno-69-81" name="__codelineno-69-81" href="#__codelineno-69-81"></a>    setCurrentMove(nextHistory.length - 1);
</span><span id="__span-69-82"><a id="__codelineno-69-82" name="__codelineno-69-82" href="#__codelineno-69-82"></a>  }
</span><span id="__span-69-83"><a id="__codelineno-69-83" name="__codelineno-69-83" href="#__codelineno-69-83"></a>
</span><span id="__span-69-84"><a id="__codelineno-69-84" name="__codelineno-69-84" href="#__codelineno-69-84"></a>  function jumpTo(nextMove) {
</span><span id="__span-69-85"><a id="__codelineno-69-85" name="__codelineno-69-85" href="#__codelineno-69-85"></a>    setCurrentMove(nextMove);
</span><span id="__span-69-86"><a id="__codelineno-69-86" name="__codelineno-69-86" href="#__codelineno-69-86"></a>  }
</span><span id="__span-69-87"><a id="__codelineno-69-87" name="__codelineno-69-87" href="#__codelineno-69-87"></a>
</span><span id="__span-69-88"><a id="__codelineno-69-88" name="__codelineno-69-88" href="#__codelineno-69-88"></a>  const moves = history.map((squares, move) =&gt; {
</span><span id="__span-69-89"><a id="__codelineno-69-89" name="__codelineno-69-89" href="#__codelineno-69-89"></a>    let description;
</span><span id="__span-69-90"><a id="__codelineno-69-90" name="__codelineno-69-90" href="#__codelineno-69-90"></a>    if (move &gt; 0) {
</span><span id="__span-69-91"><a id="__codelineno-69-91" name="__codelineno-69-91" href="#__codelineno-69-91"></a>      description = &#39;Go to move #&#39; + move;
</span><span id="__span-69-92"><a id="__codelineno-69-92" name="__codelineno-69-92" href="#__codelineno-69-92"></a>    } else {
</span><span id="__span-69-93"><a id="__codelineno-69-93" name="__codelineno-69-93" href="#__codelineno-69-93"></a>      description = &#39;Go to game start&#39;;
</span><span id="__span-69-94"><a id="__codelineno-69-94" name="__codelineno-69-94" href="#__codelineno-69-94"></a>    }
</span><span id="__span-69-95"><a id="__codelineno-69-95" name="__codelineno-69-95" href="#__codelineno-69-95"></a>    return (
</span><span id="__span-69-96"><a id="__codelineno-69-96" name="__codelineno-69-96" href="#__codelineno-69-96"></a>      &lt;li key={move}&gt;
</span><span id="__span-69-97"><a id="__codelineno-69-97" name="__codelineno-69-97" href="#__codelineno-69-97"></a>        &lt;button onClick={() =&gt; jumpTo(move)}&gt;{description}&lt;/button&gt;
</span><span id="__span-69-98"><a id="__codelineno-69-98" name="__codelineno-69-98" href="#__codelineno-69-98"></a>      &lt;/li&gt;
</span><span id="__span-69-99"><a id="__codelineno-69-99" name="__codelineno-69-99" href="#__codelineno-69-99"></a>    );
</span><span id="__span-69-100"><a id="__codelineno-69-100" name="__codelineno-69-100" href="#__codelineno-69-100"></a>  });
</span><span id="__span-69-101"><a id="__codelineno-69-101" name="__codelineno-69-101" href="#__codelineno-69-101"></a>
</span><span id="__span-69-102"><a id="__codelineno-69-102" name="__codelineno-69-102" href="#__codelineno-69-102"></a>  return (
</span><span id="__span-69-103"><a id="__codelineno-69-103" name="__codelineno-69-103" href="#__codelineno-69-103"></a>    &lt;div className=&quot;game&quot;&gt;
</span><span id="__span-69-104"><a id="__codelineno-69-104" name="__codelineno-69-104" href="#__codelineno-69-104"></a>      &lt;div className=&quot;game-board&quot;&gt;
</span><span id="__span-69-105"><a id="__codelineno-69-105" name="__codelineno-69-105" href="#__codelineno-69-105"></a>        &lt;Board xIsNext={xIsNext} squares={currentSquares} onPlay={handlePlay} /&gt;
</span><span id="__span-69-106"><a id="__codelineno-69-106" name="__codelineno-69-106" href="#__codelineno-69-106"></a>      &lt;/div&gt;
</span><span id="__span-69-107"><a id="__codelineno-69-107" name="__codelineno-69-107" href="#__codelineno-69-107"></a>      &lt;div className=&quot;game-info&quot;&gt;
</span><span id="__span-69-108"><a id="__codelineno-69-108" name="__codelineno-69-108" href="#__codelineno-69-108"></a>        &lt;ol&gt;{moves}&lt;/ol&gt;
</span><span id="__span-69-109"><a id="__codelineno-69-109" name="__codelineno-69-109" href="#__codelineno-69-109"></a>      &lt;/div&gt;
</span><span id="__span-69-110"><a id="__codelineno-69-110" name="__codelineno-69-110" href="#__codelineno-69-110"></a>    &lt;/div&gt;
</span><span id="__span-69-111"><a id="__codelineno-69-111" name="__codelineno-69-111" href="#__codelineno-69-111"></a>  );
</span><span id="__span-69-112"><a id="__codelineno-69-112" name="__codelineno-69-112" href="#__codelineno-69-112"></a>}
</span><span id="__span-69-113"><a id="__codelineno-69-113" name="__codelineno-69-113" href="#__codelineno-69-113"></a>
</span><span id="__span-69-114"><a id="__codelineno-69-114" name="__codelineno-69-114" href="#__codelineno-69-114"></a>function calculateWinner(squares) {
</span><span id="__span-69-115"><a id="__codelineno-69-115" name="__codelineno-69-115" href="#__codelineno-69-115"></a>  const lines = [
</span><span id="__span-69-116"><a id="__codelineno-69-116" name="__codelineno-69-116" href="#__codelineno-69-116"></a>    [0, 1, 2],
</span><span id="__span-69-117"><a id="__codelineno-69-117" name="__codelineno-69-117" href="#__codelineno-69-117"></a>    [3, 4, 5],
</span><span id="__span-69-118"><a id="__codelineno-69-118" name="__codelineno-69-118" href="#__codelineno-69-118"></a>    [6, 7, 8],
</span><span id="__span-69-119"><a id="__codelineno-69-119" name="__codelineno-69-119" href="#__codelineno-69-119"></a>    [0, 3, 6],
</span><span id="__span-69-120"><a id="__codelineno-69-120" name="__codelineno-69-120" href="#__codelineno-69-120"></a>    [1, 4, 7],
</span><span id="__span-69-121"><a id="__codelineno-69-121" name="__codelineno-69-121" href="#__codelineno-69-121"></a>    [2, 5, 8],
</span><span id="__span-69-122"><a id="__codelineno-69-122" name="__codelineno-69-122" href="#__codelineno-69-122"></a>    [0, 4, 8],
</span><span id="__span-69-123"><a id="__codelineno-69-123" name="__codelineno-69-123" href="#__codelineno-69-123"></a>    [2, 4, 6],
</span><span id="__span-69-124"><a id="__codelineno-69-124" name="__codelineno-69-124" href="#__codelineno-69-124"></a>  ];
</span><span id="__span-69-125"><a id="__codelineno-69-125" name="__codelineno-69-125" href="#__codelineno-69-125"></a>  for (let i = 0; i &lt; lines.length; i++) {
</span><span id="__span-69-126"><a id="__codelineno-69-126" name="__codelineno-69-126" href="#__codelineno-69-126"></a>    const [a, b, c] = lines[i];
</span><span id="__span-69-127"><a id="__codelineno-69-127" name="__codelineno-69-127" href="#__codelineno-69-127"></a>    if (squares[a] &amp;&amp; squares[a] === squares[b] &amp;&amp; squares[a] === squares[c]) {
</span><span id="__span-69-128"><a id="__codelineno-69-128" name="__codelineno-69-128" href="#__codelineno-69-128"></a>      return squares[a];
</span><span id="__span-69-129"><a id="__codelineno-69-129" name="__codelineno-69-129" href="#__codelineno-69-129"></a>    }
</span><span id="__span-69-130"><a id="__codelineno-69-130" name="__codelineno-69-130" href="#__codelineno-69-130"></a>  }
</span><span id="__span-69-131"><a id="__codelineno-69-131" name="__codelineno-69-131" href="#__codelineno-69-131"></a>  return null;
</span><span id="__span-69-132"><a id="__codelineno-69-132" name="__codelineno-69-132" href="#__codelineno-69-132"></a>}
</span></code></pre></div></p>
<p>如果你有额外的时间或想练习新的 React 技能，这里有一些你可以改进井字棋游戏的想法，按难度递增的顺序列出：</p>
<ol>
<li>仅针对当前着手，显示“You are at move #…”而不是按钮。</li>
<li>重写 <code>Board</code> 以使用两个循环来制作方块而不是对它们进行硬编码。</li>
<li>添加一个切换按钮，使可以按升序或降序对落子的步数进行排序。</li>
<li>当有人获胜时，突出显示致使获胜的三个方块（当没有人获胜时，显示一条关于结果为平局的消息）。</li>
<li>在“落子”的历史列表中以 (row, col) 格式显示每步的位置。</li>
</ol>
<p>在本教程中，你已经接触到了 React 概念，包括元素、组件、props 和 state。现在你已经了解了这些概念在构建游戏时是如何工作的，请查看 <a href="https://zh-hans.react.dev/learn/thinking-in-react">React 哲学</a> 以了解这些 React 概念在构建应用的 UI 时是如何工作的。</p>
<p>\</p>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  回到页面顶部
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="页脚" >
        
          
          <a href="../.." class="md-footer__link md-footer__link--prev" aria-label="上一页: React 中文文档">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                上一页
              </span>
              <div class="md-ellipsis">
                React 中文文档
              </div>
            </div>
          </a>
        
        
          
          <a href="../thinking-in-react/" class="md-footer__link md-footer__link--next" aria-label="下一页: React 哲学">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                下一页
              </span>
              <div class="md-ellipsis">
                React 哲学
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2024, Mingmin Yu
    </div>
  
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://cn.vuejs.org/guide/introduction.html" target="_blank" rel="noopener" title="cn.vuejs.org" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M96 0C43 0 0 43 0 96v320c0 53 43 96 96 96h320c17.7 0 32-14.3 32-32s-14.3-32-32-32v-64c17.7 0 32-14.3 32-32V32c0-17.7-14.3-32-32-32H96m0 384h256v64H96c-17.7 0-32-14.3-32-32s14.3-32 32-32m32-240c0-8.8 7.2-16 16-16h192c8.8 0 16 7.2 16 16s-7.2 16-16 16H144c-8.8 0-16-7.2-16-16m16 48h192c8.8 0 16 7.2 16 16s-7.2 16-16 16H144c-8.8 0-16-7.2-16-16s7.2-16 16-16"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
      <div class="md-progress" data-md-component="progress" role="progressbar"></div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["announce.dismiss", "content.code.annotate", "content.code.copy", "content.code.select", "content.tooltips", "content.tabs.link", "content.footnote.tooltips", "navigation.instant", "navigation.instant.progress", "navigation.footer", "navigation.tabs", "navigation.tabs.sticky", "navigation.top", "navigation.indexes", "navigation.tracking", "search.highlight", "search.share", "search.suggest", "toc.follow"], "search": "../../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.83f73b43.min.js"></script>
      
        <script src="../../assets/javascripts/toggle-sidebar.js" async></script>
      
    
  </body>
</html>